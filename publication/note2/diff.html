<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.7.27" />
<meta charset="utf-8" />
<meta name="generator" content="ReSpec 25.1.0" />
<meta name="viewport" content=
"width=device-width, initial-scale=1, shrink-to-fit=no" />
<style>
<![CDATA[
  /* --- EXAMPLES --- */
  span.example-title {
    text-transform: none;
  }
  aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
  }
  div.illegal-example { color: red }
  div.illegal-example p { color: black }
  aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
  }

  aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
  }
  aside.example div.example span.example-title {
    color: #999;
  }
]]>
</style>

<style>
<![CDATA[
  /* --- ISSUES/NOTES --- */
  .issue-label {
    text-transform: initial;
  }

  .warning > p:first-child { margin-top: 0 }
  .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
  }
  span.warning { padding: .1em .5em .15em; }

  .issue.closed span.issue-number {
    text-decoration: line-through;
  }

  .warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
  }

  .warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 1.3em;
    float: left;
    padding-right: .3em;
    margin-top: -0.3em;
  }

  li.task-list-item {
    list-style: none;
  }

  input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
  }

  .issue a.respec-gh-label {
  padding: 5px;
  margin: 0 2px 0 2px;
  font-size: 10px;
  text-transform: none;
  text-decoration: none;
  font-weight: bold;
  border-radius: 4px;
  position: relative;
  bottom: 2px;
  border: none;
  display: inline-block;
  }

  .issue a.respec-label-dark {
  color: #fff;
  background-color: #000;
  }

  .issue a.respec-label-light {
  color: #000;
  background-color: #fff;
  }
]]>
</style>

<style>
<![CDATA[
  /* dfn popup panel that list all local references to a dfn */
  dfn {
  cursor: pointer;
  }

  .dfn-panel {
  position: absolute;
  left: var(--left); /* set via JS */
  top: var(--top); /* set via JS */
  z-index: 35;
  height: auto;
  width: max-content;
  max-width: 300px;
  max-height: 500px;
  overflow: auto;
  padding: 0.5em 0.75em;
  font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
  background: #dddddd;
  color: black;
  border: outset 0.2em;
  }

  .dfn-panel * {
  margin: 0;
  }

  .dfn-panel > b {
  display: block;
  }

  .dfn-panel ul a[href] {
  color: black;
  }

  .dfn-panel a:not(:hover) {
  text-decoration: none !important;
  border-bottom: none !important;
  }

  .dfn-panel a[href]:hover {
  border-bottom-width: 1px;
  }

  .dfn-panel > b + b {
  margin-top: 0.25em;
  }

  .dfn-panel ul {
  padding: 0;
  }

  .dfn-panel li {
  list-style: inside;
  }

  .dfn-panel.docked {
  display: inline-block;
  position: fixed;
  left: 0.5em;
  top: unset;
  bottom: 2em;
  margin: 0 auto;
  /* 0.75em from padding (x2), 0.5em from left position, 0.2em border (x2) */
  max-width: calc(100vw - 0.75em * 2 - 0.5em - 0.2em * 2);
  max-height: 30vh;
  }
]]>
</style>
<title>Web of Things (WoT) Binding Templates</title>

<style id="respec-mainstyle">
<![CDATA[
  /*****************************************************************
  * ReSpec specific CSS
  *****************************************************************/
  @keyframes pop {
  0% {
    transform: scale(1, 1);
  }
  25% {
    transform: scale(1.25, 1.25);
    opacity: 0.75;
  }
  100% {
    transform: scale(1, 1);
  }
  }

  /* Override code highlighter background */
  .hljs {
  background: transparent !important;
  }

  /* --- INLINES --- */
  h1 abbr,
  h2 abbr,
  h3 abbr,
  h4 abbr,
  h5 abbr,
  h6 abbr,
  a abbr {
  border: none;
  }

  dfn {
  font-weight: bold;
  }

  a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
  }

  a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
  }

  a.bibref {
  text-decoration: none;
  }

  .respec-offending-element:target {
  animation: pop 0.25s ease-in-out 0s 1;
  }

  .respec-offending-element,
  a[href].respec-offending-element {
  text-decoration: red wavy underline;
  }
  @supports not (text-decoration: red wavy underline) {
  .respec-offending-element:not(pre) {
    display: inline-block;
  }
  .respec-offending-element {
    /* Red squiggly line */
    background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=)
      bottom repeat-x;
  }
  }

  #references :target {
  background: #eaf3ff;
  animation: pop 0.4s ease-in-out 0s 1;
  }

  cite .bibref {
  font-style: normal;
  }

  code {
  color: #c83500;
  }

  th code {
  color: inherit;
  }

  a[href].orcid {
    padding-left: 4px;
    padding-right: 4px;
  }

  a[href].orcid > svg {
    margin-bottom: -2px;
  }

  /* --- TOC --- */

  .toc a,
  .tof a {
  text-decoration: none;
  }

  a .secno,
  a .figno {
  color: #000;
  }

  ul.tof,
  ol.tof {
  list-style: none outside none;
  }

  .caption {
  margin-top: 0.5em;
  font-style: italic;
  }

  /* --- TABLE --- */

  table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
  }

  .simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
  }

  .simple th a {
  color: #fff;
  padding: 3px 5px;
  text-align: left;
  }

  .simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
  }

  .simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
  }

  .simple tr:nth-child(even) {
  background: #f0f6ff;
  }

  /* --- DL --- */

  .section dd > p:first-child {
  margin-top: 0;
  }

  .section dd > p:last-child {
  margin-bottom: 0;
  }

  .section dd {
  margin-bottom: 1em;
  }

  .section dl.attrs dd,
  .section dl.eldef dd {
  margin-bottom: 0;
  }

  #issue-summary > ul,
  .respec-dfn-list {
  column-count: 2;
  }

  #issue-summary li,
  .respec-dfn-list li {
  list-style: none;
  }

  details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
  }

  details.respec-tests-details > * {
  padding-right: 2em;
  }

  details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: 0.3em;
  background-color: white;
  padding-bottom: 0.5em;
  }

  details.respec-tests-details[open] > summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
  }

  details.respec-tests-details > ul {
  width: 100%;
  margin-top: -0.3em;
  }

  details.respec-tests-details > li {
  padding-left: 1em;
  }

  a[href].self-link:hover {
  opacity: 1;
  text-decoration: none;
  background-color: transparent;
  }

  h2,
  h3,
  h4,
  h5,
  h6 {
  position: relative;
  }

  aside.example .marker > a.self-link {
  color: inherit;
  }

  h2 > a.self-link,
  h3 > a.self-link,
  h4 > a.self-link,
  h5 > a.self-link,
  h6 > a.self-link {
  border: none;
  color: inherit;
  font-size: 83%;
  height: 2em;
  left: -1.6em;
  opacity: 0.5;
  position: absolute;
  text-align: center;
  text-decoration: none;
  top: 0;
  transition: opacity 0.2s;
  width: 2em;
  }

  h2 > a.self-link::before,
  h3 > a.self-link::before,
  h4 > a.self-link::before,
  h5 > a.self-link::before,
  h6 > a.self-link::before {
  content: "§";
  display: block;
  }

  @media (max-width: 767px) {
  dd {
    margin-left: 0;
  }

  /* Don't position self-link in headings off-screen */
  h2 > a.self-link,
  h3 > a.self-link,
  h4 > a.self-link,
  h5 > a.self-link,
  h6 > a.self-link {
    left: auto;
    top: auto;
  }
  }

  @media print {
  .removeOnSave {
    display: none;
  }
  }
]]>
</style>
<meta name="description" content=
"W3C Web of Things enables applications to interact with and orchestrate connected Things at Web scale. The standardized abstract interaction model exposed by the WoT Thing Description enables applications to scale and evolve independently of the individual Things." />
<link rel="canonical" href=
"https://www.w3.org/TR/wot-binding-templates/" />
<style>
<![CDATA[
  /*
  Atom One Light by Daniel Gamage
  Original One Light Syntax theme from https://github.com/atom/one-light-syntax
  base:    #fafafa
  mono-1:  #383a42
  mono-2:  #686b77
  mono-3:  #a0a1a7
  hue-1:   #0184bb
  hue-2:   #4078f2
  hue-3:   #a626a4
  hue-4:   #50a14f
  hue-5:   #e45649
  hue-5-2: #c91243
  hue-6:   #986801
  hue-6-2: #c18401
  */

  .hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #383a42;
  background: #fafafa;
  }

  .hljs-comment,
  .hljs-quote {
  color: #a0a1a7;
  font-style: italic;
  }

  .hljs-doctag,
  .hljs-keyword,
  .hljs-formula {
  color: #a626a4;
  }

  .hljs-section,
  .hljs-name,
  .hljs-selector-tag,
  .hljs-deletion,
  .hljs-subst {
  color: #e45649;
  }

  .hljs-literal {
  color: #0184bb;
  }

  .hljs-string,
  .hljs-regexp,
  .hljs-addition,
  .hljs-attribute,
  .hljs-meta-string {
  color: #50a14f;
  }

  .hljs-built_in,
  .hljs-class .hljs-title {
  color: #c18401;
  }

  .hljs-attr,
  .hljs-variable,
  .hljs-template-variable,
  .hljs-type,
  .hljs-selector-class,
  .hljs-selector-attr,
  .hljs-selector-pseudo,
  .hljs-number {
  color: #986801;
  }

  .hljs-symbol,
  .hljs-bullet,
  .hljs-link,
  .hljs-meta,
  .hljs-selector-id,
  .hljs-title {
  color: #4078f2;
  }

  .hljs-emphasis {
  font-style: italic;
  }

  .hljs-strong {
  font-weight: bold;
  }

  .hljs-link {
  text-decoration: underline;
  }
]]>
</style>

<style>
<![CDATA[
  var {
  position: relative;
  cursor: pointer;
  }

  var[data-type]::before,
  var[data-type]::after {
  position: absolute;
  left: 50%;
  top: -6px;
  opacity: 0;
  transition: opacity 0.4s;
  pointer-events: none;
  }

  /* the triangle or arrow or caret or whatever */
  var[data-type]::before {
  content: "";
  transform: translateX(-50%);
  border-width: 4px 6px 0 6px;
  border-style: solid;
  border-color: transparent;
  border-top-color: #000;
  }

  /* actual text */
  var[data-type]::after {
  content: attr(data-type);
  transform: translateX(-50%) translateY(-100%);
  background: #000;
  text-align: center;
  /* additional styling */
  font-family: "Dank Mono", "Fira Code", monospace;
  font-style: normal;
  padding: 6px;
  border-radius: 3px;
  color: #daca88;
  text-indent: 0;
  font-weight: normal;
  }

  var[data-type]:hover::after,
  var[data-type]:hover::before {
  opacity: 1;
  }
]]>
</style>

<script id="initialUserConfig" type="application/json">
<![CDATA[
  {
  "specStatus": "ED",
  "processVersion": 2017,
  "shortName": "wot-binding-templates",
  "copyrightStart": 2017,
  "wg": "Web of Things Working Group",
  "wgURI": "https://www.w3.org/WoT/WG/",
  "wgPublicList": "public-wot-wg",
  "edDraftURI": "https://w3c.github.io/wot-binding-templates/",
  "githubAPI": "https://api.github.com/repos/w3c/wot-binding-templates",
  "issueBase": "https://www.github.com/w3c/wot-binding-templates/issues",
  "editors": [
    {
      "name": "Michael Koster",
      "w3cid": "110658",
      "company": "SmartThings",
      "companyURL": "https://www.smartthings.com/"
    },
    {
      "name": "Ege Korkan",
      "w3cid": "110131",
      "company": "Siemens AG",
      "companyURL": "https://www.siemens.com/"
    }
  ],
  "otherLinks": [
    {
      "key": "Contributors",
      "data": [
        {
          "value": "In the GitHub repository",
          "href": "https://github.com/w3c/wot-binding-templates/graphs/contributors"
        }
      ]
    },
    {
      "key": "Repository",
      "data": [
        {
          "value": "We are on GitHub",
          "href": "https://github.com/w3c/wot-binding-templates/"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/wot-binding-templates/issues"
        }
      ]
    }
  ],
  "localBiblio": {
    "CoRE-RD": {
      "href": "https://tools.ietf.org/html/draft-ietf-core-resource-directory-11",
      "title": "CoRE Resource Directory",
      "status": "Internet-Draft",
      "publisher": "IETF",
      "date": "03 July 2017"
    },
    "wot-security-guidelines": {
      "href": "https://w3c.github.io/wot-security/",
      "title": "Web of Things (WoT) Security and Privacy Guidelines",
      "status": "W3C Editor's Draft",
      "publisher": "W3C",
      "date": "21 August 2019"
    },
    "iana-web-socket-registry": {
      "href": "https://www.iana.org/assignments/websocket/websocket.xml#subprotocol-name",
      "title": "IANA Registry for Websocket Subprotocols",
      "status": "",
      "publisher": "IANA",
      "date": "24 May 2019",
      "id": "iana-web-socket-registry"
    },
    "MQTT": {
      "href": "https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html",
      "title": "MQTT Version 5.0",
      "status": "",
      "publisher": "MQTT",
      "date": "07 March 2019",
      "authors": [
        "Andrew Banks",
        "Ed Briggs",
        "Ken Borgendale",
        "Rahul Gupta"
      ],
      "id": "mqtt"
    }
  },
  "publishISODate": "2020-01-13T00:00:00.000Z",
  "generatedSubtitle": "Editor's Draft 13 January 2020"
  }
]]>
</script>
<link rel="stylesheet" href=
"https://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE" />
<style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>
<body class="h-entry toc-inline">
<div class="head">
<a class="logo" href= "https://www.w3.org/">
<img alt="W3C" width="72" height="48" src= "https://www.w3.org/StyleSheets/TR/2016/logos/W3C" />
</a>
<h1 id="title" class="title p-name">
Web
of
Things
(WoT)
<del class="diff-old">Protocol
</del>
Binding
Templates
</h1>
<h2 id="w3c-working-group-note-30-january-2020">
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
Working
Group
Note
<time class="dt-published" datetime="2020-01-30">
30
January
2020
</time>
</h2>
<dl>
<dt>
This
version:
</dt>
<dd>
<a class="u-url" href= "https://www.w3.org/TR/2020/NOTE-wot-binding-templates-20200130/">
https://www.w3.org/TR/2020/NOTE-wot-binding-templates-20200130/
</a>
</dd>
<dt>
Latest
published
version:
</dt>
<dd>
<a href= "https://www.w3.org/TR/wot-binding-templates/">
https://www.w3.org/TR/wot-binding-templates/
</a>
</dd>
<dt>
Latest
editor's
draft:
</dt>
<dd>
<a href= "https://w3c.github.io/wot-binding-templates/">
https://w3c.github.io/wot-binding-templates/
</a>
</dd>
<dt>
Previous
version:
</dt>
<dd>
<a class="u-url" href= "https://www.w3.org/TR/2018/NOTE-wot-binding-templates-20180405/">
https://www.w3.org/TR/2018/NOTE-wot-binding-templates-20180405/
</a>
</dd>
<dt>
<del class="diff-old">Editor:
</del>
<ins class="diff-chg">Editors:
</ins>
</dt>
<dd class="p-author h-card vcard" data-editor-id="110658">
<span class="p-name fn">
Michael
Koster
</span>
(
<del class="diff-old">Invited
Expert
</del>
<a class= "p-org org h-org h-card" href= "https://www.smartthings.com/">
<ins class="diff-chg">SmartThings
</ins></a><ins class="diff-chg">
)
</ins></dd><dd class="p-author h-card vcard" data-editor-id="110131"><span class="p-name fn"><ins class="diff-chg">
Ege
Korkan
</ins></span><ins class="diff-chg">
(
</ins><a class= "p-org org h-org h-card" href="https://www.siemens.com/"><ins class="diff-chg">
Siemens
AG
</ins>
</a>
)
</dd>
<dt>
Contributors:
</dt>
<dd>
<a href= "https://github.com/w3c/wot-binding-templates/graphs/contributors">
In
the
GitHub
repository
</a>
</dd>
<dt>
Repository:
</dt>
<dd>
<a href="https://github.com/w3c/wot-binding-templates/">
We
are
on
GitHub
</a>
</dd>
<dd>
<a href= "https://github.com/w3c/wot-binding-templates/issues">
File
a
bug
</a>
</dd>
</dl>
<p class="copyright">
<a href= "https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
Copyright
</a>
©
<del class="diff-old">2018
</del>
<ins class="diff-chg">2017-2020
</ins>
<a href="https://www.w3.org/">
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
</a>
<sup>
®
</sup>
(
<a href= "https://www.csail.mit.edu/">
<abbr title= "Massachusetts Institute of Technology">
MIT
</abbr>
</a>,
<a href= "https://www.ercim.eu/">
<abbr title= "European Research Consortium for Informatics and Mathematics">
ERCIM
</abbr>
</a>,
<a href="https://www.keio.ac.jp/">
Keio
</a>,
<a href= "https://ev.buaa.edu.cn/">
Beihang
</a>
).
W3C
<a href= "https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
liability
</a>,
<a href= "https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
trademark
</a>
and
<a rel="license" href= "https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">
permissive
document
license
</a>
rules
apply.
</p>
<hr title="Separator for header" />
</div>
<section id="abstract" class="introductory">
<h2>
Abstract
</h2>
<p>
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Web
of
Things
enables
applications
to
interact
with
and
orchestrate
connected
Things
at
Web
scale.
The
standardized
abstract
interaction
model
exposed
by
the
WoT
Thing
Description
enables
applications
to
scale
and
evolve
independently
of
the
individual
Things.
</p>
<p>
Many
network-level
protocols
and
standards
for
connected
Things
have
already
been
developed,
and
have
millions
of
devices
deployed
in
the
field
today.
These
standards
are
converging
on
a
common
set
of
transport
protocols
and
transfer
layers,
but
each
has
peculiar
content
formats,
payload
schemas,
and
data
types.
</p>
<p>
Despite
using
unique
formats
and
data
models,
the
high-level
interactions
exposed
by
most
connected
things
can
be
modeled
using
the
Property,
Action,
and
Event
interaction
<del class="diff-old">patterns
</del>
<ins class="diff-chg">affordances
</ins>
of
the
WoT
Thing
Description.
</p>
<p>
<del class="diff-old">Protocol
</del>
Binding
Templates
enable
a
Thing
Description
to
be
adapted
to
the
specific
protocol
<ins class="diff-new">or
data
payload
</ins>
usage
across
the
different
standards.
This
is
done
through
additional
descriptive
vocabulary
that
is
used
in
the
Thing
Description.
</p>
<p>
This
document
describes
the
initial
set
of
<del class="diff-old">design
pattern
and
</del>
vocabulary
extensions
to
the
WoT
Thing
Description
that
make
up
the
<del class="diff-old">Protocol
</del>
Binding
Templates.
It
is
expected
over
time
that
additional
protocols
<ins class="diff-new">and
payload
structures
</ins>
will
be
accommodated
by
further
extending
the
Binding
<del class="diff-old">Templates,
adding
new
vocabulary
and
new
design
patterns.
</del>
<ins class="diff-chg">Templates.
</ins>
</p>
</section>
<section id="sotd" class="introductory">
<h2>
Status
of
This
Document
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
Other
documents
may
supersede
this
document.
A
list
of
current
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href= "https://www.w3.org/TR/">
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
technical
reports
index
</a>
at
https://www.w3.org/TR/.
</em>
</p>
<div class="note" id="issue-container-generatedID">
<div role="heading" class="ednote-title marker" id="h-ednote" aria-level="3">
<span>
Editor's
note
</span>
<del class="diff-old">:
</del>
<span class= "issue-label">:
The
W3C
WoT
WG
is
asking
for
feedback
</span>
</div>
<p class="">
Please
contribute
to
this
draft
using
the
<a href= "https://github.com/w3c/wot-binding-templates/issues">
GitHub
Issue
</a>
feature
of
the
<a href= "https://github.com/w3c/wot-binding-templates/">
WoT
<del class="diff-old">Protocol
</del>
Binding
Templates
</a>
repository.
For
feedback
on
security
and
privacy
considerations,
please
use
the
<a href= "https://github.com/w3c/wot-security/issues">
WoT
Security
and
Privacy
</a>
Issues,
as
they
are
cross-cutting
over
all
our
documents.
</p>
</div>
<p>
This
document
was
published
by
the
<a href= "https://www.w3.org/WoT/WG/">
Web
of
Things
Working
Group
</a>
as
an
Editor's
Draft.
</p>
<p>
Comments
regarding
this
document
are
welcome.
Please
send
them
to
<a href="mailto:public-wot-wg@w3.org">
public-wot-wg@w3.org
</a>
(
<del class="diff-old">subscribe
,
</del>
<a href= "https://lists.w3.org/Archives/Public/public-wot-wg/">
archives
</a>
).
</p>
<p>
Publication
as
<del class="diff-old">a
Working
Group
Note
</del>
<ins class="diff-chg">an
Editor's
Draft
</ins>
does
not
imply
endorsement
by
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Membership.
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</p>
<p data-deliverer="95969">
This
document
was
produced
by
a
group
operating
under
the
<a href= "https://www.w3.org/Consortium/Patent-Policy/">
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
</p>
<p>
This
document
is
governed
by
the
<a id="w3c_process_revision" href="https://www.w3.org/2019/Process-20190301/">
1
<del class="diff-old">February
2018
</del>
<ins class="diff-chg">March
2019
</ins>
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Process
Document
</a>.
</p>
</section>
<nav id="toc">
<h2 class="introductory" id="table-of-contents">
Table
of
Contents
</h2>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#introduction">
<bdi class="secno">
1.
</bdi>
Introduction
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#protocol-methods-and-options">
<bdi class="secno">
1.1
<del class="diff-old">Protocol
Adaptation
1.1.1
</del>
</bdi>
Protocol
Methods
and
Options
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#media-types">
<del class="diff-old">1.1.2
</del>
<bdi class="secno">
<ins class="diff-chg">1.2
</ins></bdi>
Media
Types
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#payload-structure-0">
<del class="diff-old">1.1.3
</del>
<bdi class="secno">
<ins class="diff-chg">1.3
</ins></bdi>
Payload
Structure
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#data-types-and-value-constraints">
<del class="diff-old">1.1.4
</del>
<bdi class="secno">
<ins class="diff-chg">1.4
</ins></bdi>
Data
Types
and
Value
Constraints
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#conformance">
<bdi class="secno">
2.
<del class="diff-old">Protocol
</del>
</bdi>
<ins class="diff-chg">Conformance
</ins></a></li><li class="tocline"><a class="tocxref" href= "#terminology"><bdi class="secno"><ins class="diff-chg">
3.
</ins></bdi><ins class="diff-chg">
Terminology
</ins></a></li><li class="tocline"><a class="tocxref" href= "#binding-overview"><bdi class="secno"><ins class="diff-chg">
4.
</ins></bdi>
Binding
Templates
Overview
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#sec-data-schema">
<del class="diff-old">2.1
</del>
<bdi class="secno">
<ins class="diff-chg">4.1
</ins></bdi>
Data
Schema
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#payload-structure">
<del class="diff-old">2.1.1
</del>
<bdi class="secno">
<ins class="diff-chg">4.1.1
</ins></bdi>
Payload
Structure
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#data-types-constraints">
<del class="diff-old">2.1.2
</del>
<bdi class="secno">
<ins class="diff-chg">4.1.2
</ins></bdi>
Data
Types
and
value
constraints
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#mapping-to-xml-schema">
<bdi class="secno">
<ins class="diff-new">4.1.3
</ins></bdi><ins class="diff-new">
XML
Schema
Binding
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#mapping-to-xml-schema-object"><bdi class="secno"><ins class="diff-new">
4.1.3.1
</ins></bdi><ins class="diff-new">
Object
Definition
to
XML
Schema
</ins></a></li><li class="tocline"><a class="tocxref" href= "#mapping-to-xml-schema-array"><bdi class="secno"><ins class="diff-new">
4.1.3.2
</ins></bdi><ins class="diff-new">
Array
Schema
to
XML
Schema
</ins></a></li></ol></li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#form-element">
<del class="diff-old">2.2
Form
</del>
<bdi class="secno">
<ins class="diff-chg">4.2
</ins></bdi><ins class="diff-chg">
Forms
</ins>
Element
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#operation-types">
<del class="diff-old">2.2.1
Relation
</del>
<bdi class="secno">
<ins class="diff-chg">4.2.1
</ins></bdi><ins class="diff-chg">
Operation
</ins>
Types
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#content-types">
<del class="diff-old">2.2.2
Media
</del>
<bdi class="secno">
<ins class="diff-chg">4.2.2
</ins></bdi><ins class="diff-chg">
Content
</ins>
Types
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#protocol-methods-options">
<del class="diff-old">2.2.3
</del>
<bdi class="secno">
<ins class="diff-chg">4.2.3
</ins></bdi>
Protocol
Methods
and
Options
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#uri-variables">
<bdi class="secno">
<ins class="diff-new">4.2.4
</ins></bdi><ins class="diff-new">
URI
Template
Variables
</ins></a></li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#sec-interaction-patterns">
<del class="diff-old">2.3
</del>
<bdi class="secno">
<ins class="diff-chg">4.3
</ins></bdi>
Interaction
<del class="diff-old">Types
</del>
<ins class="diff-chg">Affordances
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#property-bindings">
<del class="diff-old">2.3.1
</del>
<bdi class="secno">
<ins class="diff-chg">4.3.1
</ins></bdi>
Bindings
for
Properties
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#action-bindings">
<del class="diff-old">2.3.2
</del>
<bdi class="secno">
<ins class="diff-chg">4.3.2
</ins></bdi>
Bindings
for
Actions
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#event-bindings">
<del class="diff-old">2.3.3
</del>
<bdi class="secno">
<ins class="diff-chg">4.3.3
</ins></bdi>
Bindings
for
Events
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#processing-model">
<del class="diff-old">2.4
</del>
<bdi class="secno">
<ins class="diff-chg">4.4
</ins></bdi>
Processing
Model
and
Runtime
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#vocabulary">
<del class="diff-old">3.
</del>
<bdi class="secno">
<ins class="diff-chg">5.
</ins></bdi>
Vocabulary
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#dataschema-vocabulary">
<del class="diff-old">3.1
</del>
<bdi class="secno">
<ins class="diff-chg">5.1
</ins></bdi>
<code>
DataSchema
</code>
Vocabulary
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#form-operation-type-vocabulary">
<del class="diff-old">3.2
Interaction
Verbs
</del>
<bdi class="secno">
<ins class="diff-chg">5.2
</ins></bdi><ins class="diff-chg">
Form
Operation
Type
Vocabulary
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#property-forms">
<del class="diff-old">3.2.1
</del>
<bdi class="secno">
<ins class="diff-chg">5.2.1
</ins></bdi>
Property
<del class="diff-old">Interactions
</del>
<ins class="diff-chg">Forms
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#action-forms">
<del class="diff-old">3.2.2
</del>
<bdi class="secno">
<ins class="diff-chg">5.2.2
</ins></bdi>
Action
<del class="diff-old">Interactions
</del>
<ins class="diff-chg">Forms
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#event-forms">
<del class="diff-old">3.2.3
</del>
<bdi class="secno">
<ins class="diff-chg">5.2.3
</ins></bdi>
Event
<del class="diff-old">Interactions
</del>
<ins class="diff-chg">Forms
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#protocol-vocabulary">
<del class="diff-old">3.3
Form
</del>
<bdi class="secno">
<ins class="diff-chg">5.3
</ins></bdi><ins class="diff-chg">
Protocol
</ins>
Vocabulary
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#http-vocabulary">
<del class="diff-old">3.3.1
</del>
<bdi class="secno">
<ins class="diff-chg">5.3.1
</ins></bdi>
HTTP
<del class="diff-old">form
vocabulary
</del>
<ins class="diff-chg">Vocabulary
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#http-vocabulary-terms"><bdi class="secno"><ins class="diff-chg">
5.3.1.1
</ins></bdi><ins class="diff-chg">
HTTP
Vocabulary
Terms
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#http-default-vocabulary-terms">
<del class="diff-old">3.3.2
</del>
<bdi class="secno">
<ins class="diff-chg">5.3.1.2
</ins></bdi><ins class="diff-chg">
HTTP
Default
Vocabulary
Terms
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#coap-vocabulary"><bdi class="secno"><ins class="diff-chg">
5.3.2
</ins></bdi>
CoAP
<del class="diff-old">form
vocabulary
</del>
<ins class="diff-chg">Vocabulary
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#coap-vocabulary-terms"><bdi class="secno"><ins class="diff-chg">
5.3.2.1
</ins></bdi><ins class="diff-chg">
CoAP
Vocabulary
Terms
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#coap-default-vocabulary-terms">
<del class="diff-old">3.3.3
</del>
<bdi class="secno">
<ins class="diff-chg">5.3.2.2
</ins></bdi><ins class="diff-chg">
CoAP
Default
Vocabulary
Terms
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#mqtt-vocabulary"><bdi class="secno"><ins class="diff-chg">
5.3.3
</ins></bdi>
MQTT
<del class="diff-old">form
vocabulary
</del>
<ins class="diff-chg">Vocabulary
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#mqtt-vocabulary-terms"><bdi class="secno"><ins class="diff-chg">
5.3.3.1
</ins></bdi><ins class="diff-chg">
MQTT
Vocabulary
Terms
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#mqtt-default-vocabulary-terms">
<del class="diff-old">3.3.4
subProtocol
form
vocabulary
</del>
<bdi class="secno">
<ins class="diff-chg">5.3.3.2
</ins></bdi><ins class="diff-chg">
MQTT
Default
Vocabulary
Terms
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#subprotocol-vocabulary"><bdi class="secno"><ins class="diff-chg">
5.3.4
</ins></bdi><code><ins class="diff-chg">
subprotocol
</ins></code><ins class="diff-chg">
Vocabulary
</ins>
</a>
</li>
</ol>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#binding-examples">
<del class="diff-old">4.
</del>
<bdi class="secno">
<ins class="diff-chg">6.
</ins></bdi>
Examples
of
Thing
Descriptions
including
protocol
bindings
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#sec-security-considerations">
<del class="diff-old">5.
References
</del>
<bdi class="secno">
<ins class="diff-chg">7.
</ins></bdi><ins class="diff-chg">
Security
and
Privacy
Considerations
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#appendix-example-sequences">
<del class="diff-old">6.
Security
</del>
<bdi class="secno">
<ins class="diff-chg">A.
</ins></bdi><ins class="diff-chg">
Example
Sequences
of
Interaction
Affordances
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#property-interactions"><bdi class="secno"><ins class="diff-chg">
A.1
</ins></bdi><ins class="diff-chg">
Property
Interactions
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#read-property-http-binding"><bdi class="secno"><ins class="diff-chg">
A.1.1
</ins></bdi><ins class="diff-chg">
Read
property
(HTTP
binding)
</ins></a></li><li class="tocline"><a class="tocxref" href= "#write-property-http-binding"><bdi class="secno"><ins class="diff-chg">
A.1.2
</ins></bdi><ins class="diff-chg">
Write
property
(HTTP
binding)
</ins></a></li><li class="tocline"><a class="tocxref" href= "#observe-property-http-binding-with-long-polling-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.1.3
</ins></bdi><ins class="diff-chg">
Observe
property
(HTTP
binding
with
Long
Polling
subprotocol)
</ins></a></li><li class="tocline"><a class="tocxref" href= "#observe-property-http-binding-with-server-sent-event-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.1.4
</ins></bdi><ins class="diff-chg">
Observe
property
(HTTP
binding
with
Server
Sent
Event
subprotocol)
</ins></a></li><li class="tocline"><a class="tocxref" href= "#observe-property-http-binding-with-websocket-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.1.5
</ins></bdi><ins class="diff-chg">
Observe
property
(HTTP
binding
with
WebSocket
subprotocol)
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#action-interactions"><bdi class="secno"><ins class="diff-chg">
A.2
</ins></bdi><ins class="diff-chg">
Action
Interactions
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#invoke-action-http-binding"><bdi class="secno"><ins class="diff-chg">
A.2.1
</ins></bdi><ins class="diff-chg">
Invoke
action
(HTTP
binding)
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#event-interactions"><bdi class="secno"><ins class="diff-chg">
A.3
</ins></bdi><ins class="diff-chg">
Event
Interactions
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#subscribe-notify-and-unsubscribe-event-http-binding-with-long-polling-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.3.1
</ins></bdi><ins class="diff-chg">
Subscribe,
notify
</ins>
and
<del class="diff-old">Privacy
Considerations
</del>
<ins class="diff-chg">unsubscribe
event
(HTTP
binding
with
Long
Polling
subprotocol)
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#subscribe-notify-and-unsubscribe-event-http-binding-with-server-sent-event-subprotocol">
<bdi class="secno">
<ins class="diff-chg">A.3.2
</ins></bdi><ins class="diff-chg">
Subscribe,
notify
and
unsubscribe
event
(HTTP
binding
with
Server
Sent
Event
subprotocol)
</ins></a>
<del class="diff-old">A.
</del>
</li>
<li class="tocline">
<a class="tocxref" href= "#subscribe-notify-and-unsubscribe-event-http-binding-with-websocket-subprotocol">
<bdi class="secno">
<ins class="diff-chg">A.3.3
</ins></bdi><ins class="diff-chg">
Subscribe,
notify
and
unsubscribe
event
(HTTP
binding
with
WebSocket
subprotocol)
</ins></a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href= "#sec-acknowledgements"><bdi class="secno"><ins class="diff-chg">
B.
</ins></bdi>
Acknowledgements
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#references">
<bdi class="secno">
<ins class="diff-new">C.
</ins></bdi><ins class="diff-new">
References
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#normative-references"><bdi class="secno"><ins class="diff-new">
C.1
</ins></bdi><ins class="diff-new">
Normative
references
</ins></a></li><li class="tocline"><a class="tocxref" href= "#informative-references"><bdi class="secno"><ins class="diff-new">
C.2
</ins></bdi><ins class="diff-new">
Informative
references
</ins></a></li></ol></li>
</ol>
</nav>
<section id="introduction">
<h2 id="x1-introduction">
<bdi class="secno">
1.
</bdi>
Introduction
<a class="self-link" aria-label="§" href= "#introduction">
</a>
</h2>
<p>
<del class="diff-old">Protocol
</del>
Binding
Templates
consist
of
reusable
vocabulary
and
<del class="diff-old">design
pattern
</del>
extensions
to
the
WoT
Thing
<del class="diff-old">Description
</del>
<ins class="diff-chg">Description[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description"><ins class="diff-chg">
WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-chg">
]
</ins>
format
that
enable
an
application
client
<ins class="diff-new">(a
Consumer)
</ins>
to
interact,
using
a
consistent
interaction
model,
with
Things
that
expose
diverse
protocols
and
protocol
usage.
</p>
<del class="diff-old">1.1
Protocol
Adaptation
</del>
<p>
<del class="diff-old">Protocol
</del>
Binding
Templates
enable
<del class="diff-old">clients
</del>
<ins class="diff-chg">Consumers
</ins>
to
adapt
to
the
underlying
protocol
and
network-facing
API
constructions.
Once
the
base
protocol
(e.g.,
<del class="diff-old">HTTP,
CoAP,
MQTT,
</del>
<ins class="diff-chg">HTTP[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-chg">
RFC7231
</ins></a></cite><ins class="diff-chg">
],
CoAP[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7252" title= "The Constrained Application Protocol (CoAP)"><ins class="diff-chg">
RFC7252
</ins></a></cite><ins class="diff-chg">
],
MQTT[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-mqtt" title="MQTT Version 5.0"><ins class="diff-chg">
MQTT
</ins></a></cite><ins class="diff-chg">
],
</ins>
etc.)
is
identified,
the
following
adaptions
<del class="diff-old">specifiy
</del>
<ins class="diff-chg">specify
</ins>
the
particular
use
within
the
given
<del class="diff-old">Platform.
</del>
<ins class="diff-chg">platform.
</ins>
</p>
<div class="note" id="issue-container-generatedID-0">
<div role="heading" class="ednote-title marker" id="h-ednote-0" aria-level="3">
<span>
Editor's
note
</span>
<del class="diff-old">:
</del>
<span class= "issue-label">:
Additional
Protocol
Bindings
</span>
</div>
<p class="">
This
document
contains
examples
of
Protocol
Bindings
for
HTTP,
CoAP,
and
MQTT.
Other
<del class="diff-old">prococols
</del>
<ins class="diff-chg">protocols
</ins>
may
be
<del class="diff-old">added,
</del>
<ins class="diff-chg">added
</ins>
following
the
same
design
<del class="diff-old">style,
</del>
<ins class="diff-chg">style
</ins>
and
using
payload
mappings
that
can
be
expressed
as
JSON
compatible
entities.
Future
extensions
to
other
payload
definition
formats
are
also
contemplated.
</p>
</div>
<section id="protocol-methods-and-options">
<h3 id="x1-1-protocol-methods-and-options">
<del class="diff-old">1.1.1
</del>
<bdi class= "secno">
<ins class="diff-chg">1.1
</ins></bdi>
Protocol
Methods
and
Options
<a class="self-link" aria-label="§" href="#protocol-methods-and-options">
</a>
</h3>
<p>
Most
protocols
have
a
relatively
small
set
of
methods
that
define
the
message
type,
the
semantic
intention
of
the
message.
<del class="diff-old">As
a
starting
point,
a
superset
of
</del>
REST
and
PubSub
<del class="diff-old">can
cover
most
standard
communication
patterns.
</del>
<ins class="diff-chg">architecture
patterns
result
in
different
protocols
with
different
methods.
</ins>
Common
methods
<ins class="diff-new">found
in
these
protocols
</ins>
are
GET,
PUT,
POST,
DELETE,
PUBLISH,
and
SUBSCRIBE.
<ins class="diff-new">Binding
Templates
describe
how
these
existing
methods
and
vocabularies
can
be
described
in
a
Thing
Description.
</ins>
</p>
<p>
<del class="diff-old">The
</del>
<ins class="diff-chg">This
is
done
by
mapping
the
</ins>
protocol
methods
<del class="diff-old">are
mapped
</del>
to
the
abstract
WoT
Interaction
<del class="diff-old">verbs
</del>
<ins class="diff-chg">Affordance
terms
</ins>
<code>
<del class="diff-old">readProperty
</del>
<ins class="diff-chg">readproperty
</ins>
</code>,
<code>
<del class="diff-old">writeProperty
</del>
<ins class="diff-chg">writeproperty
</ins>
</code>,
<code>
<del class="diff-old">observeProperty
</del>
<ins class="diff-chg">observeproperty
</ins>
</code>,
<code>
<del class="diff-old">invokeAction
</del>
<ins class="diff-chg">unobserveproperty
</ins>
</code>,
<code>
<del class="diff-old">subscribeEvent
</del>
<ins class="diff-chg">invokeaction
</ins>
</code>,
<code>
<del class="diff-old">unsubscribeEvent
</del>
<ins class="diff-chg">subscribeevent
</ins></code>,<code><ins class="diff-chg">
unsubscribeevent
</ins></code>,<code><ins class="diff-chg">
readallproperties
</ins></code>,<code><ins class="diff-chg">
writeallproperties
</ins></code>,<code><ins class="diff-chg">
readmultipleproperties
</ins></code>,<code><ins class="diff-chg">
writemultipleproperties
</ins>
</code>.
</p>
<p>
Possible
protocol
options
are
also
specified
in
the
Protocol
Binding.
They
are
used
to
select
transfer
modes,
to
request
notifications
from
observable
resources,
or
otherwise
extend
the
semantics
of
the
protocol
methods.
</p>
</section>
<section id="media-types">
<h3 id="x1-2-media-types">
<del class="diff-old">1.1.2
</del>
<bdi class="secno">
<ins class="diff-chg">1.2
</ins></bdi>
Media
Types
<a class="self-link" aria-label="§" href= "#media-types">
</a>
</h3>
<p>
Maximum
use
should
be
made
of
IANA-registered
Media
Types
<ins class="diff-new">[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-iana-media-types" title= "Media Types"><ins class="diff-new">
IANA-MEDIA-TYPES
</ins></a></cite><ins class="diff-new">
]
</ins>
(e.g.,
<code>
application/json
</code>
)
in
order
to
decouple
applications
from
connected
Things.
Standard
bridges
and
translations
from
proprietary
formats
to
Web-friendly
languages
such
as
JSON
and
XML
are
part
of
the
adaptation
needed.
</p>
<p>
<del class="diff-old">WoT
Protocol
Bindings
depend
on
consistent
use
</del>
<ins class="diff-chg">Correct
indication
</ins>
of
Media
Types
<del class="diff-old">for
customization
</del>
<ins class="diff-chg">enables
proper
processing
</ins>
of
the
<ins class="diff-new">serialized
documents.
This
way,
the
documents
can
be
exchanged
in
any
format
and
allow
the
</ins>
upper
<del class="diff-old">layers.
</del>
<ins class="diff-chg">layers
of
an
application
to
adapt
to
different
formats.
</ins>
</p>
</section>
<section id="payload-structure-0">
<h3 id="x1-3-payload-structure">
<del class="diff-old">1.1.3
</del>
<bdi class="secno">
<ins class="diff-chg">1.3
</ins></bdi>
Payload
Structure
<a class="self-link" aria-label="§" href= "#payload-structure-0">
</a>
</h3>
<p>
Data
serialized
to
a
standard
Media
Type
still
remains
in
a
structure
specific
to
the
<del class="diff-old">Platform
</del>
<ins class="diff-chg">platform
</ins>
data
model
and
needs
to
be
understood
by
<del class="diff-old">clients
</del>
<ins class="diff-chg">Consumers
</ins>
(cf.
various
types
of
JSON
documents).
</p>
<p>
The
data
definition
language
of
<code>
DataSchema
</code>
elements,
described
in
<del class="diff-old">[TD],
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description"><ins class="diff-chg">
WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-chg">
],
</ins>
allows
for
describing
arbitrary
structures
by
nesting
of
arrays
and
objects.
Constants
and
variable
specifications
may
be
intermixed.
</p>
</section>
<section id="data-types-and-value-constraints">
<h3 id="x1-4-data-types-and-value-constraints">
<del class="diff-old">1.1.4
</del>
<bdi class= "secno">
<ins class="diff-chg">1.4
</ins></bdi>
Data
Types
and
Value
Constraints
<a class= "self-link" aria-label="§" href= "#data-types-and-value-constraints">
</a>
</h3>
<p>
Simple
data
types
and
value
constraints
are
currently
used
in
a
layered
and
descriptive
way
in
<del class="diff-old">WoT
Thing
Description.
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description"><ins class="diff-chg">
WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-chg">
].
</ins>
Additional
forms
of
constraints
are
available
to
help
adapt
to
the
underlying
data
types.
A
<del class="diff-old">Platform-specific
</del>
<ins class="diff-chg">platform-specific
</ins>
8-bit
unsigned
integer,
for
instance,
can
be
defined
as
Integer
with
a
minimum
of
0
and
maximum
of
255;
the
system-specific
representation
(e.g.,
exact
number
of
bits)
on
<del class="diff-old">server
</del>
<ins class="diff-chg">the
Thing
</ins>
and
<del class="diff-old">client
</del>
<ins class="diff-chg">the
Consumer
</ins>
is
not
relevant
for
interoperability.
</p>
</section>
</section>
<section id="conformance">
<h2 id="x2-conformance">
<bdi class="secno">
2.
</bdi>
<ins class="diff-chg">Conformance
</ins><a class="self-link" aria-label="§" href= "#conformance"></a></h2><p><ins class="diff-chg">
As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</ins></p><p><ins class="diff-chg">
The
key
words
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em>,<em class= "rfc2119"><ins class="diff-chg">
MUST
NOT
</ins></em>,<em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em>,<ins class="diff-chg">
and
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
NOT
</ins></em><ins class="diff-chg">
in
this
document
are
to
be
interpreted
as
described
in
</ins><a href= "https://tools.ietf.org/html/bcp14"><ins class="diff-chg">
BCP
14
</ins></a><ins class="diff-chg">
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-rfc2119" title= "Key words for use in RFCs to Indicate Requirement Levels"><ins class="diff-chg">
RFC2119
</ins></a></cite><ins class="diff-chg">
]
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc8174" title= "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"><ins class="diff-chg">
RFC8174
</ins></a></cite><ins class="diff-chg">
]
when,
and
only
when,
they
appear
in
all
capitals,
as
shown
here.
</ins></p></section><section id="terminology" class="informative"><h2 id="x3-terminology"><bdi class="secno"><ins class="diff-chg">
3.
</ins></bdi><ins class="diff-chg">
Terminology
</ins><a class="self-link" aria-label="§" href= "#terminology"></a></h2><p><em><ins class="diff-chg">
This
section
is
non-normative.
</ins></em></p><p><ins class="diff-chg">
The
fundamental
WoT
terminology
such
as
</ins><dfn data-dfn-type="dfn" id="dfn-thing"><ins class="diff-chg">
Thing
</ins></dfn>,<dfn data-dfn-type="dfn" id= "dfn-consumer"><ins class="diff-chg">
Consumer
</ins></dfn>,<dfn data-dfn-type="dfn" data-plurals="thing descriptions" id="dfn-thing-description"><ins class="diff-chg">
Thing
Description
</ins></dfn><ins class="diff-chg">
(
</ins><dfn data-dfn-type="dfn" id="dfn-td"><ins class="diff-chg">
TD
</ins></dfn><ins class="diff-chg">
),
</ins><dfn data-dfn-type="dfn" id="dfn-interaction-model"><ins class="diff-chg">
Interaction
Model
</ins></dfn>,<dfn data-dfn-type="dfn" id= "dfn-interaction-affordance"><ins class="diff-chg">
Interaction
Affordance
</ins></dfn>,<dfn data-dfn-type="dfn" id="dfn-property"><ins class="diff-chg">
Property
</ins></dfn>,<dfn data-dfn-type="dfn" id="dfn-action"><ins class="diff-chg">
Action
</ins></dfn>,<dfn data-dfn-type="dfn" id="dfn-event"><ins class="diff-chg">
Event
</ins></dfn>,<dfn data-dfn-type="dfn" id="dfn-protocol-binding"><ins class="diff-chg">
Protocol
Binding
</ins></dfn>,<dfn data-dfn-type="dfn" id= "dfn-servient"><ins class="diff-chg">
Servient
</ins></dfn>,<dfn data-dfn-type="dfn" id= "dfn-wot-interface"><ins class="diff-chg">
WoT
Interface
</ins></dfn>,<dfn data-dfn-type="dfn" id="dfn-wot-runtime"><ins class="diff-chg">
WoT
Runtime
</ins></dfn>,<ins class="diff-chg">
etc.
is
defined
in
</ins><a href= "https://w3c.github.io/wot-architecture/#terminology"><ins class="diff-chg">
Section
3
</ins></a><ins class="diff-chg">
of
the
WoT
Architecture
specification
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-architecture" title= "Web of Things (WoT) Architecture"><ins class="diff-chg">
WOT-ARCHITECTURE
</ins></a></cite><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
In
addition,
this
specification
introduces
the
following
definitions:
</ins></p><dl><dt><dfn id="dfn-context-ext" data-dfn-type="dfn" data-plurals= "td context extensions"><ins class="diff-chg">
TD
Context
Extension
</ins></dfn></dt><dd><ins class="diff-chg">
A
mechanism
to
extend
</ins><a href="#dfn-thing-description" class= "internalDFN" data-link-type="dfn"><ins class="diff-chg">
Thing
Descriptions
</ins></a><ins class="diff-chg">
with
additional
</ins><a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn"><ins class="diff-chg">
Vocabulary
Terms
</ins></a><ins class="diff-chg">
using
</ins><code><ins class="diff-chg">
@context
</ins></code><ins class="diff-chg">
as
specified
in
JSON-LD[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-json-ld11" title= "JSON-LD 1.1"><ins class="diff-chg">
json-ld11
</ins></a></cite><ins class="diff-chg">
].
It
is
the
basis
for
semantic
annotations
and
extensions
to
core
mechanisms
such
as
</ins>
Protocol
<ins class="diff-new">Bindings,
Security
Schemes,
and
Data
Schemas.
</ins></dd><dt><dfn id="dfn-vocab" data-dfn-type="dfn"><ins class="diff-new">
Vocabulary
</ins></dfn></dt><dd><ins class="diff-new">
A
collection
of
</ins><a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn"><ins class="diff-new">
Vocabulary
Terms
</ins></a>,<ins class="diff-new">
identified
by
a
namespace
IRI.
</ins></dd><dt><dfn id="dfn-term" data-dfn-type="dfn"><ins class="diff-new">
Term
</ins></dfn><ins class="diff-new">
and
</ins><dfn id= "dfn-vocab-term" data-dfn-type="dfn" data-plurals= "vocabulary terms"><ins class="diff-new">
Vocabulary
Term
</ins></dfn></dt><dd><ins class="diff-new">
A
character
string.
When
a
</ins><a href="#dfn-term" class= "internalDFN" data-link-type="dfn"><ins class="diff-new">
Term
</ins></a><ins class="diff-new">
is
part
of
a
</ins><a href= "#dfn-vocab" class="internalDFN" data-link-type= "dfn"><ins class="diff-new">
Vocabulary
</ins></a>,<ins class="diff-new">
i.e.,
prefixed
by
a
namespace
IRI[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc3987" title= "Internationalized Resource Identifiers (IRIs)"><ins class="diff-new">
RFC3987
</ins></a></cite><ins class="diff-new">
],
it
is
called
a
</ins><a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn"><ins class="diff-new">
Vocabulary
Term
</ins></a>.<ins class="diff-new">
For
the
sake
of
readability,
</ins><a href="#dfn-vocab-term" class="internalDFN" data-link-type="dfn"><ins class="diff-new">
Vocabulary
Terms
</ins></a><ins class="diff-new">
present
in
this
document
are
always
written
in
a
compact
form
and
not
as
full
IRIs.
</ins></dd></dl></section><section id="binding-overview" class="informative"><h2 id="x4-binding-templates-overview"><bdi class="secno"><ins class="diff-new">
4.
</ins></bdi>
Binding
Templates
Overview
<a class="self-link" aria-label="§" href= "#binding-overview">
</a>
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
This
section
describes
the
mechanisms
of
<del class="diff-old">protocol
</del>
binding
templates
with
examples.
</p>
<section id="sec-data-schema">
<h3 id="x4-1-data-schema">
<del class="diff-old">2.1
</del>
<bdi class="secno">
<ins class="diff-chg">4.1
</ins></bdi>
Data
Schema
<a class="self-link" aria-label="§" href= "#sec-data-schema">
</a>
</h3>
<p>
<del class="diff-old">The
DataSchema
elements
describe
</del>
<ins class="diff-chg">A
data
schema
describes
</ins>
the
payload
structure
and
<ins class="diff-new">included
</ins>
data
items
that
are
passed
between
<del class="diff-old">client
</del>
<ins class="diff-chg">the
Consumer
</ins>
and
<del class="diff-old">server
</del>
<ins class="diff-chg">the
Thing
</ins>
during
interactions.
</p>
<section id="payload-structure">
<h4 id="x4-1-1-payload-structure">
<del class="diff-old">2.1.1
</del>
<bdi class="secno">
<ins class="diff-chg">4.1.1
</ins></bdi>
Payload
Structure
<a class="self-link" aria-label="§" href= "#payload-structure">
</a>
</h4>
<p>
Payload
Structure
is
determined
by
<del class="diff-old">the
</del>
<code>
DataSchema
<del class="diff-old">elements.
[TD]
describes
the
use
</del>
</code>
<ins class="diff-chg">elements
of
a
Thing
Description.
DataSchema
elements
should
be
used
by
an
instance
of
a
</ins><code><ins class="diff-chg">
PropertyAffordance
</ins></code>,<code><ins class="diff-chg">
input
</ins></code><ins class="diff-chg">
/
</ins><code><ins class="diff-chg">
output
</ins></code><ins class="diff-chg">
of
</ins><code><ins class="diff-chg">
ActionAffordance
</ins></code>,<code><ins class="diff-chg">
data
</ins></code><ins class="diff-chg">
/
</ins><code><ins class="diff-chg">
subscription
</ins></code><ins class="diff-chg">
/
</ins><code><ins class="diff-chg">
cancellation
</ins></code><ins class="diff-chg">
of
an
</ins><code><ins class="diff-chg">
EventAffordance
</ins></code><ins class="diff-chg">
or
by
a
</ins><code><ins class="diff-chg">
uriVariable
</ins></code>
of
the
<code>
<ins class="diff-new">InteractionAffordance
</ins></code>.<ins class="diff-new">
As
indicated
in
the
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description"><ins class="diff-new">
WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-new">
],
</ins><code>
DataSchema
</code>
<ins class="diff-new">Vocabulary
is
a
subset
of
JSON
Schema
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-json-schema" title= "JSON Schema: core definitions and terminology"><ins class="diff-new">
json-schema
</ins></a></cite><ins class="diff-new">
]
</ins></p><p><ins class="diff-new">
In
the
case
of
Action
Affordances,
the
additional
</ins>
keywords
<del class="diff-old">"schema",
"inputSchema",
</del>
<code>
<ins class="diff-chg">input
</ins></code>
and
<del class="diff-old">outputSchema
</del>
<code>
<ins class="diff-chg">output
</ins></code><ins class="diff-chg">
are
used
to
provide
two
different
schemas
when
data
might
be
exchanged
</ins>
in
<del class="diff-old">the
examples
contained
</del>
<ins class="diff-chg">both
directions,
such
as
</ins>
in
<del class="diff-old">this
document.
</del>
<ins class="diff-chg">the
case
of
invoking
an
Action
Affordance
with
input
parameters
and
receiving
status
information.
</ins></p><p><ins class="diff-chg">
In
the
case
of
Event
Affordances,
the
additional
keywords
</ins><code><ins class="diff-chg">
data
</ins></code>,<code><ins class="diff-chg">
subscription
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
cancellation
</ins></code><ins class="diff-chg">
are
used
to
describe
the
payload
when
the
event
data
is
delivered
by
the
Exposed
Thing,
the
payload
needed
to
subscribe
to
the
event
and
the
payload
needed
to
cancel
receiving
event
data
from
the
Exposed
Thing,
respectively.
</ins>
</p>
<p>
In
addition
to
the
example
pattern
in
<del class="diff-old">[TD]
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description"><ins class="diff-chg">
WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-chg">
]
</ins>
of
an
object
with
name/value
constructs
or
simple
arrays,
Protocol
Bindings
for
existing
standards
may
require
nested
arrays
and
objects,
and
some
constant
values
to
be
specified.
</p>
<p>
<ins class="diff-new">Below
are
examples
of
different
payloads
and
their
corresponding
</ins><code><ins class="diff-new">
DataSchema
</ins></code>.</p><p>
For
example,
a
simple
payload
structure
may
use
a
map:
</p>
<table>
<tbody>
<tr>
<td style="vertical-align: top; width: 50%">
<div class="example" id="example-1-simple-json-object-payload">
<div class="marker">
<a class="self-link" href= "#example-1-simple-json-object-payload">
Example
<bdi>
1
</bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
Simple
<ins class="diff-new">JSON
Object
</ins>
Payload
<del class="diff-old">Structure
</del>
</span>
</div>
<del class="diff-old">{
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"level"</span>: <span class=
"hljs-number">50</span>,
  <span class="hljs-attr">"time"</span>: <span class=
"hljs-number">10</span>
}
</code>
</pre>
</div>
</td>
<td style="vertical-align: top; width: 50%">
<div class="example" id= "example-2-dataschema-for-simple-json-object-payload">
<div class="marker">
<a class="self-link" href= "#example-2-dataschema-for-simple-json-object-payload">
<ins class="diff-new">Example
</ins><bdi><ins class="diff-new">
2
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
DataSchema
for
Simple
JSON
Object
Payload
</ins></span></div><pre aria-busy="false"><code class="hljs json">{  <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>  <span class="hljs-attr">"properties"</span>: {    <span class="hljs-attr">"level"</span>: {      <span class="hljs-attr">"@type"</span>: [<span class=<ins class="diff-new">
"hljs-string">"iot:LevelData"</span>],
</ins>      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"integer"</span>,
</ins>      <span class="hljs-attr">"minimum"</span>: <span class=<ins class="diff-new">
"hljs-number">0</span>,
</ins>      <span class="hljs-attr">"maximum"</span>: <span class=<ins class="diff-new">
"hljs-number">255</span>
    },
</ins>    <span class="hljs-attr">"time"</span>: {      <span class="hljs-attr">"@type"</span>: [<span class=<ins class="diff-new">
"hljs-string">"iot:TransitionTimeData"</span>],
</ins>      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"integer"</span>,
</ins>      <span class="hljs-attr">"minimum"</span>: <span class=<ins class="diff-new">
"hljs-number">0</span>,
</ins>      <span class="hljs-attr">"maximum"</span>: <span class=<ins class="diff-new">
"hljs-number">65535</span>
    }
  }
}
</ins></code></pre></div></td></tr></tbody></table>
<p>
SenML
might
use
the
following
construct:
</p>
<table>
<tbody>
<tr>
<td style="vertical-align: top; width: 50%">
<div class="example" id="example-3-senml-example">
<div class="marker">
<a class="self-link" href= "#example-3-senml-example">
Example
<del class="diff-old">2
</del>
<bdi>
<ins class="diff-chg">3
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class= "example-title">:
SenML
Example
</span>
</div>
<del class="diff-old">[
</del>
<pre aria-busy="false"><code class="hljs json">[
  {
    <span class="hljs-attr">"bn"</span>: <span class=
"hljs-string">"/example/light/"</span>
  },
  {
    <span class="hljs-attr">"n"</span>: <span class=
"hljs-string">"level"</span>,
    <span class="hljs-attr">"v"</span>: <span class=
"hljs-number">50</span>
  },
  {
    <span class="hljs-attr">"n"</span>: <span class=
"hljs-string">"time"</span>,
    <span class="hljs-attr">"v"</span>: <span class=
"hljs-number">10</span>
  }
]
</code>
</pre>
</div>
</td>
<td style="vertical-align: top; width: 50%">
<div class="example" id="example-4-dataschema-for-senml-payload">
<div class="marker">
<a class="self-link" href= "#example-4-dataschema-for-senml-payload">
<ins class="diff-new">Example
</ins><bdi><ins class="diff-new">
4
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
DataSchema
for
SenML
Payload
</ins></span></div><pre aria-busy="false"><code class="hljs json">{  <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"array"</span>,
</ins>  <span class="hljs-attr">"items"</span>: [<ins class="diff-new">
    {
</ins>      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>      <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"bn"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"const"</span>: <span class=<ins class="diff-new">
"hljs-string">"example/light"</span>
        }
      }
    },
    {
</ins>      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>      <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"n"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"const"</span>: <span class=<ins class="diff-new">
"hljs-string">"level"</span>
        },
</ins>        <span class="hljs-attr">"v"</span>: {          <span class="hljs-attr">"@type"</span>: [<span class=<ins class="diff-new">
"hljs-string">"iot:LevelData"</span>],
</ins>          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"integer"</span>,
</ins>          <span class="hljs-attr">"minimum"</span>: <span class=<ins class="diff-new">
"hljs-number">0</span>,
</ins>          <span class="hljs-attr">"maximum"</span>: <span class=<ins class="diff-new">
"hljs-number">255</span>
        }
      }
    },
    {
</ins>      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>      <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"n"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"const"</span>: <span class=<ins class="diff-new">
"hljs-string">"time"</span>
        },
</ins>        <span class="hljs-attr">"v"</span>: {          <span class="hljs-attr">"@type"</span>: [<span class=<ins class="diff-new">
"hljs-string">"iot:TransitionTimeData"</span>],
</ins>          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"integer"</span>,
</ins>          <span class="hljs-attr">"minimum"</span>: <span class=<ins class="diff-new">
"hljs-number">0</span>,
</ins>          <span class="hljs-attr">"maximum"</span>: <span class=<ins class="diff-new">
"hljs-number">65535</span>
        }
      }
    }
  ]
}
</ins></code>
</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p>
A
Batch
Collection
according
to
OCF
may
be
structured
like
this:
</p>
<table>
<tbody>
<tr>
<td style="vertical-align: top; width: 50%">
<div class="example" id="example-5-ocf-batch-example">
<div class="marker">
<a class="self-link" href= "#example-5-ocf-batch-example">
Example
<del class="diff-old">3
</del>
<bdi>
<ins class="diff-chg">5
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class= "example-title">:
OCF
Batch
Example
</span>
</div>
<del class="diff-old">[
</del>
<pre aria-busy="false"><code class="hljs json">[
  {
    <span class="hljs-attr">"href"</span>: <span class=
"hljs-string">"/example/light/level"</span>,
    <span class="hljs-attr">"rep"</span>: {
      <span class="hljs-attr">"dimming"</span>: <span class=
"hljs-number">50</span>
    }
  },
  {
    <span class="hljs-attr">"href"</span>: <span class=
"hljs-string">"/example/light/time"</span>,
    <span class="hljs-attr">"rep"</span>: {
      <span class="hljs-attr">"ramptime"</span>: <span class=
"hljs-number">10</span>
    }
  }
]
</code>
</pre>
</div>
</td>
<td style="vertical-align: top; width: 50%">
<div class="example" id= "example-6-dataschema-for-ocf-batch-payload">
<div class="marker">
<a class="self-link" href= "#example-6-dataschema-for-ocf-batch-payload">
<ins class="diff-new">Example
</ins><bdi><ins class="diff-new">
6
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
DataSchema
for
OCF
Batch
Payload
</ins></span></div><pre aria-busy="false"><code class="hljs json">{  <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"array"</span>,
</ins>  <span class="hljs-attr">"items"</span>: [<ins class="diff-new">
    {
</ins>      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>      <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"href"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"const"</span>: <span class=<ins class="diff-new">
"hljs-string">"/example/light/level"</span>
        },
</ins>        <span class="hljs-attr">"rep"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>          <span class="hljs-attr">"properties"</span>: {            <span class="hljs-attr">"dimming"</span>: {              <span class="hljs-attr">"@type"</span>: [<span class=<ins class="diff-new">
"hljs-string">"iot:LevelData"</span>],
</ins>              <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"integer"</span>,
</ins>              <span class=<ins class="diff-new">
"hljs-attr">"minimum"</span>: <span class="hljs-number">0</span>,
</ins>              <span class=<ins class="diff-new">
"hljs-attr">"maximum"</span>: <span class="hljs-number">255</span>
            }
          }
        }
      }
    },
    {
</ins>      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>      <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"href"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"const"</span>: <span class=<ins class="diff-new">
"hljs-string">"/example/light/time"</span>
        },
</ins>        <span class="hljs-attr">"rep"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>          <span class="hljs-attr">"properties"</span>: {            <span class="hljs-attr">"ramptime"</span>: {              <span class="hljs-attr">"@type"</span>: [<span class=<ins class="diff-new">
"hljs-string">"iot:TransitionTimeData"</span>],
</ins>              <span class="hljs-attr">"type"</span>:<span class=<ins class="diff-new">
"hljs-string">"integer"</span>,
</ins>              <span class=<ins class="diff-new">
"hljs-attr">"minimum"</span>: <span class="hljs-number">0</span>,
</ins>              <span class=<ins class="diff-new">
"hljs-attr">"maximum"</span>: <span class="hljs-number">65535</span>
            }
          }
        }
      }
    }
  ]
}
</ins></code>
</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p>
And
an
IPSO
Smart
Object
on
LWM2M
might
look
like
the
following:
</p>
<table>
<tbody>
<tr>
<td style="vertical-align: top; width: 50%">
<div class="example" id="example-7-ipso-lwm2m-example">
<div class="marker">
<a class="self-link" href= "#example-7-ipso-lwm2m-example">
Example
<del class="diff-old">4
</del>
<bdi>
<ins class="diff-chg">7
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
IPSO/LWM2M
Example
</span>
</div>
<del class="diff-old">{
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"bn"</span>: <span class=
"hljs-string">"/3001/0/"</span>,
  <span class="hljs-attr">"e"</span>: [
    {
      <span class="hljs-attr">"n"</span>: <span class=
"hljs-string">"5044"</span>,
      <span class="hljs-attr">"v"</span>: <span class=
"hljs-number">0.5</span>
    },
    {
      <span class="hljs-attr">"n"</span>: <span class=
"hljs-string">"5002"</span>,
      <span class="hljs-attr">"v"</span>: <span class=
"hljs-number">10.0</span>
    }
  ]
}
<del class="diff-old">The
Protocol
Binding
template
for
each
of
these
payloads
will
be
structured
according
to
the
desired
payload
structure.
For
the
Simple
Payload
in
Example
1
above,
the
data
schema
element
would
be
structured
as
follows:
Example
5
:
data
Schema
for
Simple
JSON
Object
Payload
</del>
</code>
<del class="diff-old">{
  "schema": {
    "type": "object",
    "field": [
      {
        "name": "level",
        "@type": ["iot:LevelData],
        "schema": {
          "type": "integer",
          "minimum": 0,
          "maximum": 255
        }
      },
      {
        "name": "time",
        "@type": ["iot:TransitionTimeData"],
        "schema": {
          "type": "integer",
          "minimum": 0,
          "maximum": 65535
        }
      }
    ]
  }
}
</del>
</pre>
</div>
<del class="diff-old">For
the
SenML
Payload
in
Example
2
above,
the
DataSchema
element
would
be
structured
as
follows:
</del>
</td>
<td style="vertical-align: top; width: 50%">
<div class="example" id= "example-8-dataschema-for-ipso-lwm2m-payload">
<div class="marker">
<a class="self-link" href= "#example-8-dataschema-for-ipso-lwm2m-payload">
Example
<del class="diff-old">6
</del>
<bdi>
<ins class="diff-chg">8
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
DataSchema
for
<del class="diff-old">SenML
</del>
<ins class="diff-chg">IPSO/LWM2M
</ins>
Payload
</span>
</div>
<del class="diff-old">{
  : {
    : &lt;span class=
"hljs-string"&gt;"array",
    : [
      {
        : &lt;span class=
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"bn",
            : {
              : &lt;span class=
</del>
  <span class="hljs-attr">"properties"</span>: {
    <span class="hljs-attr">"bn"</span>: {
      <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
<del class="diff-old">              : &lt;span class=
"hljs-string"&gt;"example/light"
            }
          }
        ]
      },
      {
        : &lt;span class=
</del>
      <span class="hljs-attr">"const"</span>: <span class=
<ins class="diff-chg">"hljs-string">"/3001/0/"</span>
    },
</ins>    <span class="hljs-attr">"e"</span>: {      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"array"</span>,
</ins>      <span class="hljs-attr">"items"</span>: [<ins class="diff-chg">
        {
</ins>          <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"n",
            : {
</del>
          <span class="hljs-attr">"properties"</span>: {
            <span class="hljs-attr">"n"</span>: {
              <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
              <span class="hljs-attr">"const"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"level"
            }
          },
          {
            : &lt;span class=
"hljs-string"&gt;"v",
            : [&lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"5044"</span>
            },
</ins>            <span class="hljs-attr">"v"</span>: {              <span class="hljs-attr">"@type"</span>: [<span class=
"hljs-string">"iot:LevelData"</span>],
<del class="diff-old">            : {
</del>
              <span class="hljs-attr">"type"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"integer",
</del>
<ins class="diff-chg">"hljs-string">"number"</span>,
</ins>
              <span class=
<del class="diff-old">"hljs-attr"&gt;"minimum",
</del>
<ins class="diff-chg">"hljs-attr">"minimum"</span>: <span class="hljs-number">0.0</span>,
</ins>
              <span class=
<del class="diff-old">"hljs-attr"&gt;"maximum"
</del>
<ins class="diff-chg">"hljs-attr">"maximum"</span>: <span class="hljs-number">1.0</span>
</ins>
            }
          }
<del class="diff-old">        ]
      },
      {
        : &lt;span class=
</del>
<ins class="diff-chg">        },
        {
</ins>          <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"n",
            : {
</del>
          <span class="hljs-attr">"Properties"</span>: {
            <span class="hljs-attr">"n"</span>: {
              <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
              <span class="hljs-attr">"const"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"time"
            }
          },
          {
            : &lt;span class=
"hljs-string"&gt;"v",
            : [&lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"5002"</span>
            },
</ins>            <span class="hljs-attr">"v"</span>: {              <span class="hljs-attr">"@type"</span>: [<span class=
"hljs-string">"iot:TransitionTimeData"</span>],
<del class="diff-old">            : {
</del>
              <span class="hljs-attr">"type"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"integer",
</del>
<ins class="diff-chg">"hljs-string">"number"</span>,
</ins>
              <span class=
<del class="diff-old">"hljs-attr"&gt;"minimum",
</del>
<ins class="diff-chg">"hljs-attr">"minimum"</span>: <span class="hljs-number">0.0</span>,
</ins>
              <span class=
<del class="diff-old">"hljs-attr"&gt;"maximum"
</del>
<ins class="diff-chg">"hljs-attr">"maximum"</span>: <span class="hljs-number">6553.5</span>
</ins>
            }
          }
<del class="diff-old">        ]
</del>
<ins class="diff-chg">        }
</ins>
      ]
    }
  }
}
</code>
</pre>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="data-types-constraints">
<h4 id="x4-1-2-data-types-and-value-constraints">
<bdi class= "secno">
<ins class="diff-new">4.1.2
</ins></bdi><ins class="diff-new">
Data
Types
and
value
constraints
</ins><a class= "self-link" aria-label="§" href="#data-types-constraints"></a></h4>
<p>
<del class="diff-old">For
the
OCF
Batch
Payload
</del>
<ins class="diff-chg">Note
that
</ins>
in
Example
<del class="diff-old">3
</del>
<ins class="diff-chg">7
</ins>
above,
the
<ins class="diff-new">values
are
floating
point
(
</ins>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">double
</ins>
</code>
<del class="diff-old">element
would
be
structured
as
follows:
</del>
<ins class="diff-chg">)
while
the
other
examples
have
integer
values.
In
general,
Consumers
should
follow
the
data
schemas
strictly,
not
generating
anything
not
given
in
the
WoT
Thing
Description,
but
should
accept
additional
data
from
the
Thing
not
given
explicitly
in
the
WoT
Thing
Description.
This
means
that
a
Consumer
sending
the
payload
of
the
</ins>
Example
7
<ins class="diff-chg">should
use
floating
points
in
the
payload.
</ins></p></section><section id="mapping-to-xml-schema"><h4 id="x4-1-3-xml-schema-binding">
<del class="diff-old">:
DataSchema
</del>
<bdi class="secno">
<ins class="diff-chg">4.1.3
</ins></bdi><ins class="diff-chg">
XML
Schema
Binding
</ins><a class="self-link" aria-label="§" href= "#mapping-to-xml-schema"></a></h4><ins class="diff-chg">
In
the
previous
sections,
the
examples
showed
what
data,
whose
value
is
described
using
the
Data
Schema,
look
like
when
serialized
to
JSON.
This
section
describes
how
type
definitions
described
using
the
Data
Schema
can
be
mapped
to
XML
schema
definitions
by
using
the
same
examples.
Given
these
Data
Schemas,
providing
the
mapping
to
XML
schema
allows
XML
tools
to
directly
validate
serialized
XML
data,
</ins>
for
<del class="diff-old">OCF
Batch
Payload
</del>
<ins class="diff-chg">example.
The
XML
structure
for
which
this
mapping
is
designed
is
based
on
EXI4JSON
[exi-for-json].
</ins><section id="mapping-to-xml-schema-object"><h5 id="x4-1-3-1-object-definition-to-xml-schema"><bdi class= "secno"><ins class="diff-chg">
4.1.3.1
</ins></bdi><ins class="diff-chg">
Object
Definition
to
XML
Schema
</ins><a class= "self-link" aria-label="§" href= "#mapping-to-xml-schema-object"></a></h5><ins class="diff-chg">
Shown
below
is
an
example
Data
Schema
of
an
Object
Schema.
The
object
consists
of
two
named
literals
</ins><code><ins class="diff-chg">
id
</ins></code><ins class="diff-chg">
(of
type
</ins><code><ins class="diff-chg">
integer
</ins></code><ins class="diff-chg">
)
and
</ins><code><ins class="diff-chg">
name
</ins></code><ins class="diff-chg">
(of
type
</ins><code><ins class="diff-chg">
string
</ins></code><ins class="diff-chg">
)
where
</ins><code><ins class="diff-chg">
id
</ins></code><ins class="diff-chg">
is
required
to
be
present.
</ins><div class="example" id= "example-9-json-schema-description-of-the-required-json-object"><div class="marker"><a class="self-link" href= "#example-9-json-schema-description-of-the-required-json-object"><ins class="diff-chg">
Example
</ins><bdi><ins class="diff-chg">
9
</ins></bdi></a><span class="example-title">:<ins class="diff-chg">
JSON
Schema
description
of
the
required
JSON
Object
</ins>
</span>
</div>
<del class="diff-old">{
  : {
    : &lt;span class=
"hljs-string"&gt;"array",
    : [
      {
        : &lt;span class=
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"href",
            : {
</del>
  <span class="hljs-attr">"properties"</span>: {
      <span class="hljs-attr">"id"</span>: {
              <span class="hljs-attr">"type"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"string",
              : &lt;span class=
"hljs-string"&gt;"/light/level"
            }
          },
          {
            : &lt;span class=
"hljs-string"&gt;"rep",
            : &lt;span class=
"hljs-string"&gt;"object",
            : [
              {
                : &lt;span class=
"hljs-string"&gt;"dimming",
                &lt;span class=
"hljs-attr"&gt;"@type": [&lt;span class=
"hljs-string"&gt;"iot:LevelData"],
                : {
                  &lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"integer",
                  &lt;span class=
"hljs-attr"&gt;"minimum",
                  &lt;span class=
"hljs-attr"&gt;"maximum"
                }
              }
            ]
          }
        ]
</del>
<ins class="diff-chg">"hljs-string">"integer"</span>
</ins>
      },
<del class="diff-old">      {
        : &lt;span class=
"hljs-string"&gt;"object",
        : [
          {
            : &lt;span class=
"hljs-string"&gt;"href",
            : {
              : &lt;span class=
"hljs-string"&gt;"string",
              : &lt;span class=
"hljs-string"&gt;"/light/time"
            }
          },
          {
            : &lt;span class=
"hljs-string"&gt;"rep",
            : {
</del>
      <span class="hljs-attr">"name"</span>: {
              <span class="hljs-attr">"type"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"object",
              : [
                {
                  &lt;span class=
"hljs-attr"&gt;"name": &lt;span class=
"hljs-string"&gt;"ramptime",
                  &lt;span class=
"hljs-attr"&gt;"@type": [&lt;span class=
"hljs-string"&gt;"iot:TransitionTimeData"],
                  : {
                    &lt;span class=
"hljs-attr"&gt;"type":&lt;span class=
"hljs-string"&gt;"integer",
                    &lt;span class=
"hljs-attr"&gt;"minimum",
                    &lt;span class=
"hljs-attr"&gt;"maximum": &lt;span class=
"hljs-number"&gt;65535
                  }
                }
              ]
            }
          }
        ]
      ]
    }
  }
</del>
<ins class="diff-chg">"hljs-string">"string"</span>
      }
  },
</ins>  <span class="hljs-attr">"required"</span>: [      <span class="hljs-string">"id"</span><ins class="diff-chg">
  ]
</ins>
}
</code>
</pre>
</div>
<del class="diff-old">For
</del>
<ins class="diff-chg">When
</ins>
the
<del class="diff-old">IPSO/LWM2M
Payload
</del>
<code>
<ins class="diff-chg">object
</ins></code><ins class="diff-chg">
is
anonymous
(i.e.
it
is
the
root,
or
participates
</ins>
in
<ins class="diff-new">an
</ins><code><ins class="diff-new">
array
</ins></code><ins class="diff-new">
definition),
the
above
</ins><code><ins class="diff-new">
object
</ins></code><ins class="diff-new">
definition
transforms
to
the
following
XML
Schema
element
definition.
</ins><div class="example" id= "example-10-xml-schema-mapping-of-the-above-json-schema-with-an-anonymous-object"><div class="marker"><a class="self-link" href= "#example-10-xml-schema-mapping-of-the-above-json-schema-with-an-anonymous-object">
Example
<del class="diff-old">4
above,
</del>
<bdi>
<ins class="diff-chg">10
</ins></bdi></a><span class="example-title">:<ins class="diff-chg">
XML
Schema
mapping
of
the
above
JSON
Schema
with
an
anonymous
object
</ins></span></div><pre aria-busy="false"><code class="hljs xml">  <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"object"</span> <span class=
"hljs-attr">xmlns:xs</span>=<span class=
"hljs-string">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:all</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"id"</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>                  <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"integer"</span> <span class=
"hljs-attr">type</span>=<span class=
"hljs-string">"xs:integer"</span> /&gt;</span>
</ins>                  <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"name"</span> <span class=
"hljs-attr">minOccurs</span>=<span class=
"hljs-string">"0"</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>                  <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"string"</span> <span class=
"hljs-attr">type</span>=<span class=
"hljs-string">"xs:string"</span> /&gt;</span>
</ins>                  <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>        <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:all</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins><span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">
xs:element
</ins></span><ins class="diff-chg">
&gt;
</ins></span></code></pre></div><ins class="diff-chg">
Otherwise
(i.e.
</ins>
the
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">object
</ins></code><ins class="diff-chg">
is
a
member
of
another
</ins><code><ins class="diff-chg">
object
</ins>
</code>
<ins class="diff-new">definition,
thus
has
a
name),
the
object
definition
transforms
to
the
following
XML
schema
</ins>
element
<del class="diff-old">would
</del>
<ins class="diff-chg">definition.
Note
</ins><code><ins class="diff-chg">
$name
</ins></code><ins class="diff-chg">
represents
the
name
of
the
</ins><code><ins class="diff-chg">
object
</ins></code>,<ins class="diff-chg">
and
needs
to
</ins>
be
<del class="diff-old">structured
as
follows:
</del>
<ins class="diff-chg">replaced
by
the
actual
name
of
the
</ins><code><ins class="diff-chg">
object
</ins></code>.<div class="example" id= "example-11-xml-schema-mapping-of-the-above-json-schema-with-a-non-anonymous-object"><div class="marker">
<a class="self-link" href= "#example-11-xml-schema-mapping-of-the-above-json-schema-with-a-non-anonymous-object">
Example
<del class="diff-old">8
</del>
<bdi>
<ins class="diff-chg">11
</ins></bdi></a><span class="example-title">:<ins class="diff-chg">
XML
Schema
mapping
of
the
above
JSON
Schema
with
a
non-anonymous
object
</ins>
</span>
<del class="diff-old">:
DataSchema
for
IPSO/LWM2M
Payload
</del>
</div>
<pre aria-busy="false"><code class="hljs xml">  
<span class="hljs-tag">&lt;<span class=
<ins class="diff-chg">"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"$name"</span> <span class=
"hljs-attr">xmlns:xs</span>=<span class=
"hljs-string">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>        <span class=<ins class="diff-chg">
"hljs-comment">&lt;!--Until the next comment, it is a copy of the previous example--&gt;</span>
</ins>            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"object"</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>                    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:all</span>&gt;</span>
</ins>                        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"id"</span>&gt;</span>
</ins>                            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>                              <span class=<ins class="diff-chg">
"hljs-tag">&lt;<span class=
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                                <span class=<ins class="diff-chg">
"hljs-tag">&lt;<span class=
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"integer"</span> <span class=
"hljs-attr">type</span>=<span class=
"hljs-string">"xs:integer"</span> /&gt;</span>
</ins>                              <span class=<ins class="diff-chg">
"hljs-tag">&lt;/<span class=
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                            <span class=<ins class="diff-chg">
"hljs-tag">&lt;/<span class="hljs-name">xs:complexType</span>&gt;</span>
</ins>                        <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>                        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"name"</span> <span class=
"hljs-attr">minOccurs</span>=<span class=
"hljs-string">"0"</span>&gt;</span>
</ins>                            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>                              <span class=<ins class="diff-chg">
"hljs-tag">&lt;<span class=
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                                <span class=<ins class="diff-chg">
"hljs-tag">&lt;<span class=
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"string"</span> <span class=
"hljs-attr">type</span>=<span class=
"hljs-string">"xs:string"</span> /&gt;</span>
</ins>                              <span class=<ins class="diff-chg">
"hljs-tag">&lt;/<span class=
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                            <span class=<ins class="diff-chg">
"hljs-tag">&lt;/<span class="hljs-name">xs:complexType</span>&gt;</span>
</ins>                        <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>                    <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:all</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>        <span class="hljs-comment">&lt;!--Until here--&gt;</span>        <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins><span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">
xs:element
</ins></span><ins class="diff-chg">
&gt;
</ins>
</span>
</code>
</pre>
</div>
<del class="diff-old">{
  : {
</del>
</section>
<section id="mapping-to-xml-schema-array">
<h5 id="x4-1-3-2-array-schema-to-xml-schema">
<bdi class= "secno">
<ins class="diff-chg">4.1.3.2
</ins></bdi><ins class="diff-chg">
Array
Schema
to
XML
Schema
</ins><a class= "self-link" aria-label="§" href= "#mapping-to-xml-schema-array"></a></h5><ins class="diff-chg">
Shown
below
is
an
example
Data
Schema
of
an
Array
Schema.
The
</ins><code><ins class="diff-chg">
array
</ins></code><ins class="diff-chg">
consists
of
exactly
three
number
literals
with
each
value
within
the
value
range
of
[
0
...
2047
].
</ins><div class="example" id= "example-12-json-schema-description-of-the-required-json-array"><div class="marker"><a class="self-link" href= "#example-12-json-schema-description-of-the-required-json-array"><ins class="diff-chg">
Example
</ins><bdi><ins class="diff-chg">
12
</ins></bdi></a><span class="example-title">:<ins class="diff-chg">
JSON
Schema
description
of
the
required
JSON
Array
</ins></span></div><pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"type"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"object",
    : [
      {
        : &lt;span class=
"hljs-string"&gt;"bn",
        : {
          : &lt;span class=
"hljs-string"&gt;"string",
          : &lt;span class=
"hljs-string"&gt;"/3001/0/"
        }
      },
      {
        : &lt;span class=
"hljs-string"&gt;"e",
        : &lt;span class=
</del>
"hljs-string">"array"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"object",
            : [
              {
                : &lt;span class=
"hljs-string"&gt;"n",
                : {
                  &lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                  &lt;span class=
"hljs-attr"&gt;"const"
                }
              },
              {
                : &lt;span class=
"hljs-string"&gt;"v",
                &lt;span class=
"hljs-attr"&gt;"@type": [&lt;span class=
"hljs-string"&gt;"iot:LevelData"],
                : {
                  &lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"number",
                  &lt;span class=
"hljs-attr"&gt;"minimum",
                  &lt;span class=
"hljs-attr"&gt;"maximum"
                }
              }
            ]
          },
          {
            : &lt;span class=
"hljs-string"&gt;"object",
            : [
              {
                : &lt;span class=
"hljs-string"&gt;"n",
                : {
                  &lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                  &lt;span class=
"hljs-attr"&gt;"const"
                }
              },
              {
                : &lt;span class=
"hljs-string"&gt;"v",
                &lt;span class=
"hljs-attr"&gt;"@type": [&lt;span class=
"hljs-string"&gt;"iot:TransitionTimeData"],
                : {
                  &lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
</del>
    <span class="hljs-attr">"items"</span>: {
        <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"number"</span>,
<del class="diff-old">                  &lt;span class=
"hljs-attr"&gt;"minimum",
                  &lt;span class=
"hljs-attr"&gt;"maximum": &lt;span class=
"hljs-number"&gt;6553.5
                }
              }
            ]
          ]
        }
      }
    ]
  }
</del>
        <span class="hljs-attr">"minimum"</span>: <span class=
<ins class="diff-chg">"hljs-number">0</span>,
</ins>        <span class="hljs-attr">"maximum"</span>: <span class=<ins class="diff-chg">
"hljs-number">2047</span>
    },
</ins>    <span class="hljs-attr">"minItems"</span>: <span class=<ins class="diff-chg">
"hljs-number">3</span>,
</ins>    <span class="hljs-attr">"maxItems"</span>: <span class=<ins class="diff-chg">
"hljs-number">3</span>
</ins>
}
</code>
</pre>
</div>
<del class="diff-old">2.1.2
Data
Types
and
value
constraints
Note
that
</del>
<ins class="diff-chg">When
the
</ins><code><ins class="diff-chg">
array
</ins></code><ins class="diff-chg">
is
anonymous
(i.e.
it
is
the
root,
or
participates
</ins>
in
<ins class="diff-new">another
</ins><code><ins class="diff-new">
array
</ins></code><ins class="diff-new">
definition),
the
above
</ins><code><ins class="diff-new">
array
</ins></code><ins class="diff-new">
definition
transforms
to
the
following
XML
Schema
element
definition.
</ins><div class="example" id= "example-13-xml-schema-mapping-of-the-above-json-schema-with-an-anonymous-array"><div class="marker"><a class="self-link" href= "#example-13-xml-schema-mapping-of-the-above-json-schema-with-an-anonymous-array">
Example
<del class="diff-old">5
above,
</del>
<bdi>
<ins class="diff-chg">13
</ins></bdi></a><span class="example-title">:<ins class="diff-chg">
XML
Schema
mapping
of
</ins>
the
<del class="diff-old">values
are
floating
point
while
</del>
<ins class="diff-chg">above
JSON
Schema
with
an
anonymous
array
</ins></span></div><pre aria-busy="false"><code class="hljs xml">          <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"array"</span> <span class=
"hljs-attr">xmlns:xs</span>=<span class=
"hljs-string">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"double"</span> <span class=
"hljs-attr">minOccurs</span>=<span class=
"hljs-string">"3"</span> <span class=
"hljs-attr">maxOccurs</span>=<span class=
"hljs-string">"3"</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:simpleType</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"minInclusive"</span>&gt;</span>
</ins>                    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:restriction</span> <span class=
"hljs-attr">base</span>=<span class=
"hljs-string">"xs:double"</span>&gt;</span>
</ins>                        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:minInclusive</span> <span class=
"hljs-attr">value</span>=<span class=
"hljs-string">"0"</span>/&gt;</span>
</ins>                        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:maxInclusive</span> <span class=
"hljs-attr">value</span>=<span class=
"hljs-string">"2047"</span>/&gt;</span>
</ins>                    <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:restriction</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:simpleType</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>        <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins><span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">
xs:element
</ins></span><ins class="diff-chg">
&gt;
</ins></span></code></pre></div><ins class="diff-chg">
Otherwise
(i.e.
</ins>
the
<del class="diff-old">other
examples
have
integer
values.
It
</del>
<code>
<ins class="diff-chg">array
</ins></code>
is
<del class="diff-old">up
to
</del>
<ins class="diff-chg">a
member
of
an
</ins><code><ins class="diff-chg">
object
</ins></code><ins class="diff-chg">
definition,
thus
has
a
name),
</ins>
the
<del class="diff-old">client
to
adapt
</del>
<code>
<ins class="diff-chg">array
</ins></code><ins class="diff-chg">
definition
transforms
</ins>
to
the
<del class="diff-old">range
</del>
<ins class="diff-chg">following
XML
schema
element
definition.
Note
</ins><code><ins class="diff-chg">
$name
</ins></code><ins class="diff-chg">
represents
the
name
of
the
</ins><code><ins class="diff-chg">
array
</ins></code>,
and
<del class="diff-old">type
as
well
as
</del>
<ins class="diff-chg">needs
to
be
replaced
by
</ins>
the
<del class="diff-old">engineering
units
provided.
</del>
<ins class="diff-chg">actual
name
of
the
</ins><code><ins class="diff-chg">
array
</ins></code>.<div class="example" id= "example-14-xml-schema-mapping-of-the-above-json-schema-with-a-non-anonymous-array"><div class="marker"><a class="self-link" href= "#example-14-xml-schema-mapping-of-the-above-json-schema-with-a-non-anonymous-array"><ins class="diff-chg">
Example
</ins><bdi><ins class="diff-chg">
14
</ins></bdi></a><span class="example-title">:<ins class="diff-chg">
XML
Schema
mapping
of
the
above
JSON
Schema
with
a
non-anonymous
array
</ins></span></div><pre aria-busy="false"><code class="hljs xml">          <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"$name"</span> <span class=
"hljs-attr">xmlns:xs</span>=<span class=
"hljs-string">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>        <span class=<ins class="diff-chg">
"hljs-comment">&lt;!--Until the next comment, it is a copy of the previous example--&gt;</span>
</ins>            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"array"</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>                    <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                        <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:element</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"double"</span> <span class=
"hljs-attr">minOccurs</span>=<span class=
"hljs-string">"3"</span> <span class=
"hljs-attr">maxOccurs</span>=<span class=
"hljs-string">"3"</span> &gt;</span>
</ins>                            <span class="hljs-tag">&lt;<span class=<ins class="diff-chg">
"hljs-name">xs:simpleType</span> <span class=
"hljs-attr">name</span>=<span class=
"hljs-string">"minInclusive"</span>&gt;</span>
</ins>                                <span class=<ins class="diff-chg">
"hljs-tag">&lt;<span class=
"hljs-name">xs:restriction</span> <span class=
"hljs-attr">base</span>=<span class=
"hljs-string">"xs:double"</span>&gt;</span>
</ins>                                    <span class=<ins class="diff-chg">
"hljs-tag">&lt;<span class=
"hljs-name">xs:minInclusive</span> <span class=
"hljs-attr">value</span>=<span class=
"hljs-string">"0"</span>/&gt;</span>
</ins>                                    <span class=<ins class="diff-chg">
"hljs-tag">&lt;<span class=
"hljs-name">xs:maxInclusive</span> <span class=
"hljs-attr">value</span>=<span class=
"hljs-string">"2047"</span>/&gt;</span>
</ins>                                <span class=<ins class="diff-chg">
"hljs-tag">&lt;/<span class=
"hljs-name">xs:restriction</span>&gt;</span>
</ins>                            <span class=<ins class="diff-chg">
"hljs-tag">&lt;/<span class="hljs-name">xs:simpleType</span>&gt;</span>
</ins>                        <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>                    <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>                <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins>            <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:element</span>&gt;</span>
</ins>        <span class="hljs-comment">&lt;!--Until here--&gt;</span>        <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:sequence</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">xs:complexType</span>&gt;</span>
</ins><span class="hljs-tag">&lt;/<span class=<ins class="diff-chg">
"hljs-name">
xs:element
</ins></span><ins class="diff-chg">
&gt;
</ins></span></code></pre></div></section>
</section>
</section>
<section id="form-element">
<h3 id="x4-2-forms-element">
<del class="diff-old">2.2
Form
</del>
<bdi class="secno">
<ins class="diff-chg">4.2
</ins></bdi><ins class="diff-chg">
Forms
</ins>
Element
<a class="self-link" aria-label="§" href= "#form-element">
</a>
</h3>
<p>
The
<del class="diff-old">"form"
element
contains
</del>
<ins class="diff-chg">form
elements
contain
</ins>
the
URI
<ins class="diff-new">[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986" title= "Uniform Resource Identifier (URI): Generic Syntax"><ins class="diff-new">
RFC3986
</ins></a></cite><ins class="diff-new">
]
</ins>
pointing
to
an
instance
of
the
interaction
and
descriptions
of
the
protocol
settings
and
options
expected
to
be
used
when
between
the
<del class="diff-old">client
</del>
<ins class="diff-chg">Consumer
</ins>
and
<del class="diff-old">server
</del>
<ins class="diff-chg">the
Thing
</ins>
for
the
interaction.
</p>
<section id="operation-types">
<h4 id="x4-2-1-operation-types">
<del class="diff-old">2.2.1
Relation
</del>
<bdi class="secno">
<ins class="diff-chg">4.2.1
</ins></bdi><ins class="diff-chg">
Operation
</ins>
Types
<a class="self-link" aria-label="§" href= "#operation-types">
</a>
</h4>
<p>
Form
<del class="diff-old">Relation
</del>
<ins class="diff-chg">Operation
</ins>
Types
describe
the
<del class="diff-old">expected
result
</del>
<ins class="diff-chg">intended
semantics
</ins>
of
performing
the
operation
described
by
the
form.
</p>
<p>
For
example,
the
Property
interaction
allows
read
and
write
operations.
The
protocol
binding
may
contain
a
form
for
the
read
operation
and
a
different
form
for
the
write
operation.
The
value
of
the
<del class="diff-old">"rel"
</del>
<code>
<ins class="diff-chg">op
</ins></code>
attribute
of
the
form
indicates
which
form
is
which
and
allows
the
<del class="diff-old">client
</del>
<ins class="diff-chg">Consumer
</ins>
to
select
the
correct
form
for
the
operation
required.
</p>
<div class="example" id="example-15-form-operation-types">
<div class="marker">
<a class="self-link" href= "#example-15-form-operation-types">
Example
<del class="diff-old">9
</del>
<bdi>
<ins class="diff-chg">15
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
Form
<del class="diff-old">Relation
</del>
<ins class="diff-chg">Operation
</ins>
Types
</span>
</div>
<del class="diff-old">&lt;span class=
"hljs-string"&gt;"rel": &lt;span class=
"hljs-string"&gt;"readProperty"
: &lt;span class=
</del>
<pre aria-busy="false"><code class="hljs javascript"><span class=
<ins class="diff-chg">"hljs-string">"op"</span>: <span class=
"hljs-string">"readproperty"</span>
</ins><span class="hljs-string">"op"</span>: <span class=
"hljs-string">
<del class="diff-old">"writeProperty"
</del>
<ins class="diff-chg">"writeproperty"
</ins>
</span>
</code>
</pre>
</div>
<p>
The
vocabulary
in
section
<del class="diff-old">5
</del>
<ins class="diff-chg">4
</ins>
lists
the
recommended
set
of
form
<del class="diff-old">relations,
</del>
<ins class="diff-chg">operations,
</ins>
and
the
full
TD
examples
in
section
<del class="diff-old">6
</del>
<ins class="diff-chg">5
</ins>
contain
example
uses
of
form
<del class="diff-old">relation
</del>
<ins class="diff-chg">operations
</ins>
types.
</p>
</section>
<section id="content-types">
<h4 id="x4-2-2-content-types">
<del class="diff-old">2.2.2
Media
</del>
<bdi class="secno">
<ins class="diff-chg">4.2.2
</ins></bdi><ins class="diff-chg">
Content
</ins>
Types
<a class="self-link" aria-label="§" href= "#content-types">
</a>
</h4>
<p>
<del class="diff-old">Media
</del>
<ins class="diff-chg">Content
</ins>
Types
define
the
serialization
details
and
other
rules
for
processing
the
payloads.
The
<del class="diff-old">media
</del>
<ins class="diff-chg">content
</ins>
type
is
used
to
select
a
serializer/deserializer
and
to
select
an
additional
set
of
rules
and
constraints
for
the
protocol
driver.
<ins class="diff-new">Content
type
includes
the
media
type
and
potential
parameters
for
the
media
type.
</ins>
</p>
<p>
For
example,
the
<del class="diff-old">mediaType
"application/ocf+cbor"
</del>
<ins class="diff-chg">media
type
</ins><code><ins class="diff-chg">
application/ocf+cbor
</ins></code>
indicates
that
CBOR
serialization
is
used,
but
also
that
OCF
rules
and
namespaces
apply
to
the
processing
of
the
representations.
</p>
<p>
<del class="diff-old">Additionally,
there
may
be
a
profile
which
points
to
a
URI
for
further
description,
for
example
a
form
with
profile=http://iotschema.org/protocols/ipso.jsonld
indicates
that
the
target
representation
follows
a
set
of
additional
encoding
rules
and
constraints
which
are
further
defined
at
the
URI
by
the
profile
attribute's
value.
</del>
Some
special
protocol
drivers
may
be
invoked
by
using
a
non-registered
media
type
<del class="diff-old">e.g.
</del>
<ins class="diff-chg">(e.g.,
</ins><code>
x-&lt;echonet&gt;
</code>
<ins class="diff-new">)
</ins>
along
with
a
custom
URI
<del class="diff-old">scheme
</del>
<ins class="diff-chg">Scheme
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986" title= "Uniform Resource Identifier (URI): Generic Syntax"><ins class="diff-chg">
RFC3986
</ins></a></cite><ins class="diff-chg">
]
</ins>
and
its
own
set
of
protocol
methods
and
options
defined
for
that
URI
<del class="diff-old">scheme.
</del>
<ins class="diff-chg">Scheme.
</ins></p><p><ins class="diff-chg">
When
the
media
type
is
</ins><code><ins class="diff-chg">
application/xml
</ins></code><ins class="diff-chg">
(or
its
binary
representation
</ins><code><ins class="diff-chg">
application/exi
</ins></code><ins class="diff-chg">
)
and
there
is
a
Data
Schema
provided
for
the
payload,
the
payloads
are
constrained
by
a
XML
Schema
derived
from
the
Data
Schema.
See
</ins><a href= "#mapping-to-xml-schema" class="sec-ref"><ins class="diff-chg">
§&nbsp;
</ins><bdi class= "secno"><ins class="diff-chg">
3.1.3
</ins></bdi><ins class="diff-chg">
XML
Schema
Binding
</ins></a><ins class="diff-chg">
Schema
Binding
for
how
to
derive
a
XML
Schema
from
a
Data
Schema
definition.
</ins>
</p>
<p>
<ins class="diff-new">Below
are
some
examples
of
payloads
in
JSON
and
their
corresponding
equivalent
payloads
in
XML.
</ins></p><div class="example" id= "example-16-json-payload-of-object-type-for-specifying-the-desired-brightness-and-flashing-frequency-of-a-lamp"><div class="marker"><a class="self-link" href= "#example-16-json-payload-of-object-type-for-specifying-the-desired-brightness-and-flashing-frequency-of-a-lamp"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
16
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
JSON
Payload
of
Object
type
for
specifying
the
desired
brightness
and
flashing
frequency
of
a
lamp
</ins></span></div><pre aria-busy="false"><code class="hljs json">{  <span class="hljs-attr">"brightness"</span>: <span class=<ins class="diff-new">
"hljs-number">200</span>,
</ins>  <span class="hljs-attr">"frequency"</span>: <span class=<ins class="diff-new">
"hljs-string">"fast"</span>
}
</ins></code></pre></div><div class="example" id= "example-17-corresponding-xml-payload-for-the-previous-json-payload"><div class="marker"><a class="self-link" href= "#example-17-corresponding-xml-payload-for-the-previous-json-payload"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
17
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
Corresponding
XML
Payload
for
the
previous
JSON
Payload
</ins></span></div><pre aria-busy="false"><code class="hljs xml"><span class=<ins class="diff-new">
"hljs-tag">&lt;<span class="hljs-name">object</span>&gt;</span>
</ins>  <span class="hljs-tag">&lt;<span class=<ins class="diff-new">
"hljs-name">id</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;<span class=<ins class="diff-new">
"hljs-name">integer</span>&gt;</span>200<span class=
"hljs-tag">&lt;/<span class="hljs-name">integer</span>&gt;</span>
</ins>  <span class="hljs-tag">&lt;/<span class=<ins class="diff-new">
"hljs-name">id</span>&gt;</span>
</ins>  <span class="hljs-tag">&lt;<span class=<ins class="diff-new">
"hljs-name">frequency</span>&gt;</span>
</ins>    <span class="hljs-tag">&lt;<span class=<ins class="diff-new">
"hljs-name">string</span>&gt;</span>fast<span class=
"hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
</ins>  <span class="hljs-tag">&lt;/<span class=<ins class="diff-new">
"hljs-name">frequency</span>&gt;</span>
</ins><span class="hljs-tag">&lt;/<span class=<ins class="diff-new">
"hljs-name">
object
</ins></span><ins class="diff-new">
&gt;
</ins></span></code></pre></div><div class="example" id= "example-18-json-payload-of-array-type-for-specifying-the-desired-brightness-and-flashing-frequency-of-a-lamp"><div class="marker"><a class="self-link" href= "#example-18-json-payload-of-array-type-for-specifying-the-desired-brightness-and-flashing-frequency-of-a-lamp"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
18
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
JSON
Payload
of
Array
type
for
specifying
the
desired
brightness
and
flashing
frequency
of
a
lamp
</ins></span></div><pre aria-busy="false"><code class="hljs json">[  <span class="hljs-number">520</span>,  <span class="hljs-number">184</span>,  <span class="hljs-number">1314</span><ins class="diff-new">
]
</ins></code></pre></div><div class="example" id= "example-19-corresponding-xml-payload-for-the-previous-json-payload"><div class="marker"><a class="self-link" href= "#example-19-corresponding-xml-payload-for-the-previous-json-payload"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
19
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
Corresponding
XML
Payload
for
the
previous
JSON
Payload
</ins></span></div><pre aria-busy="false"><code class="hljs xml"><span class=<ins class="diff-new">
"hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>
</ins>  <span class="hljs-tag">&lt;<span class=<ins class="diff-new">
"hljs-name">number</span>&gt;</span>520<span class=
"hljs-tag">&lt;/<span class="hljs-name">number</span>&gt;</span>
</ins>  <span class="hljs-tag">&lt;<span class=<ins class="diff-new">
"hljs-name">number</span>&gt;</span>184<span class=
"hljs-tag">&lt;/<span class="hljs-name">number</span>&gt;</span>
</ins>  <span class="hljs-tag">&lt;<span class=<ins class="diff-new">
"hljs-name">number</span>&gt;</span>1314<span class=
"hljs-tag">&lt;/<span class="hljs-name">number</span>&gt;</span>
</ins><span class="hljs-tag">&lt;/<span class=<ins class="diff-new">
"hljs-name">
array
</ins></span><ins class="diff-new">
&gt;
</ins></span></code></pre></div>
</section>
<section id="protocol-methods-options">
<h4 id="x4-2-3-protocol-methods-and-options">
<del class="diff-old">2.2.3
</del>
<bdi class= "secno">
<ins class="diff-chg">4.2.3
</ins></bdi>
Protocol
Methods
and
Options
<a class= "self-link" aria-label="§" href= "#protocol-methods-options">
</a>
</h4>
<p>
Each
target
protocol
may
specify
different
method
names
for
similar
<del class="diff-old">methods,
</del>
<ins class="diff-chg">operations,
</ins>
and
there
may
be
semantic
differences
between
similar
<del class="diff-old">methods
</del>
<ins class="diff-chg">method
names
</ins>
of
different
protocols.
Additionally,
<del class="diff-old">will
</del>
<ins class="diff-chg">platforms
may
</ins>
use
different
methods
for
<del class="diff-old">mapping
to
</del>
<ins class="diff-chg">realizing
</ins>
a
particular
WoT
Interaction
<del class="diff-old">type.
</del>
<ins class="diff-chg">Affordance.
</ins>
For
example,
POST
may
be
used
for
<del class="diff-old">setting
</del>
<ins class="diff-chg">writing
</ins>
a
<del class="diff-old">property
</del>
<ins class="diff-chg">Property
</ins>
value
in
one
<del class="diff-old">protocol,
</del>
<ins class="diff-chg">platform,
</ins>
while
PUT
may
be
used
in
another.
For
these
reasons,
we
require
the
ability
to
specify
which
method
to
use
for
a
particular
<del class="diff-old">interaction.
</del>
<ins class="diff-chg">Interaction.
</ins>
We
also
will
provide
vocabulary
to
differentiate
between
methods
of
different
protocols.
</p>
<p>
The
<abbr title="World Wide Web Consortium">
W3C
</abbr>
RDF
vocabulary
for
HTTP
<del class="diff-old">[ref]
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-http-in-rdf10" title= "HTTP Vocabulary in RDF 1.0"><ins class="diff-chg">
HTTP-in-RDF10
</ins></a></cite><ins class="diff-chg">
]
</ins>
is
used
to
identify
the
methods
and
options
specified
in
the
HTTP
protocol
bindings.
</p>
<p>
For
the
sake
of
consistency,
we
will
use
the
same
ontology
design
pattern
to
derive
a
vocabulary
for
each
target
protocol,
e.g.
CoAP,
MQTT.
</p>
<p>
The
example
below
shows
some
method
definitions
for
various
protocols.
</p>
<div class="example" id= "example-20-vocabulary-example-for-methods">
<div class="marker">
<a class="self-link" href= "#example-20-vocabulary-example-for-methods">
Example
<del class="diff-old">10
</del>
<bdi>
<ins class="diff-chg">20
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
Vocabulary
Example
for
Methods
</span>
</div>
<del class="diff-old">&lt;span class=
"hljs-string"&gt;"http:methodName": &lt;span class=
</del>
<pre aria-busy="false"><code class="hljs javascript"><span class=
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"GET"</span>
<del class="diff-old">: &lt;span class=
"hljs-number"&gt;8
</del>
<span class=
<ins class="diff-chg">"hljs-string">"mqv:controlPacketValue"</span>: <span class=
"hljs-string">"SUBSCRIBE"</span>
</ins>
<del class="diff-old">: &lt;span class=
"hljs-number"&gt;
1
</del>
<span class="hljs-string">"cov:methodName"</span>: <span class=
<ins class="diff-chg">"hljs-string">
"GET"
</ins>
</span>
</code>
</pre>
</div>
<p>
Header
options
in
HTTP,
CoAP,
MQTT
sometimes
must
be
included
in
a
protocol
binding
in
order
to
successfully
interact
with
the
underlying
protocol.
The
example
below
shows
the
structure
of
the
definition
for
<del class="diff-old">http
</del>
<ins class="diff-chg">HTTP
</ins>
header
options,
according
to
the
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
HTTP
Vocabulary
in
RDF.
</p>
<div class="example" id= "example-21-http-vocabulary-example-for-header-options">
<div class="marker">
<a class="self-link" href= "#example-21-http-vocabulary-example-for-header-options">
Example
<del class="diff-old">11
</del>
<bdi>
<ins class="diff-chg">21
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
HTTP
Vocabulary
Example
for
Header
Options
</span>
</div>
<del class="diff-old">&lt;span class=
"hljs-string"&gt;"http:headers":
</del>
<pre aria-busy="false"><code class="hljs javascript"><span class=
<ins class="diff-chg">"hljs-string">"htv:headers"</span>:
</ins>
  [
    {
      <span class=
<del class="diff-old">"hljs-string"&gt;"http:fieldName": &lt;span class=
"hljs-string"&gt;"Accept",
</del>
<ins class="diff-chg">"hljs-string">"htv:fieldName"</span>: <span class="hljs-string">"Accept"</span>,
</ins>
      <span class=
<del class="diff-old">"hljs-string"&gt;"http:fieldValue": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:fieldValue"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>
    },
    {
      <span class=
<del class="diff-old">"hljs-string"&gt;"http:fieldName": &lt;span class=
"hljs-string"&gt;"Transfer-Encoding",
</del>
<ins class="diff-chg">"hljs-string">"htv:fieldName"</span>: <span class="hljs-string">"Transfer-Encoding"</span>,
</ins>
      <span class=
<del class="diff-old">"hljs-string"&gt;"http:fieldValue": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:fieldValue"</span>: <span class=
</ins>
"hljs-string">"chunked"</span>
    }
]
</code>
</pre>
</div>
<p>
Note:
different
forms
in
a
binding
may
need
different
header
constructions,
therefore
the
<code>
<del class="diff-old">headers
</del>
<ins class="diff-chg">htv:headers
</ins>
</code>
construct
is
an
extension
of
the
TD
"form"
element.
</p>
<p>
Protocols
may
have
defined
sub-protocols
that
can
be
used
for
some
interaction
types.
For
example,
to
<del class="diff-old">recieve
</del>
<ins class="diff-chg">receive
</ins>
asynchronous
notifications
using
<del class="diff-old">http,
</del>
<ins class="diff-chg">HTTP,
</ins>
some
servers
may
support
long
<del class="diff-old">polling,
EventSource,
or
a
simple
non-multiplexed
websocket
protocol.
</del>
<ins class="diff-chg">polling
(
</ins><code><ins class="diff-chg">
longpoll
</ins></code><ins class="diff-chg">
),
WebSub
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-websub" title= "WebSub"><ins class="diff-chg">
WebSub
</ins></a></cite><ins class="diff-chg">
]
(
</ins><code><ins class="diff-chg">
websub
</ins></code><ins class="diff-chg">
)
and
Server-Sent
Events
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-eventsource" title= "Server-Sent Events"><ins class="diff-chg">
eventsource
</ins></a></cite><ins class="diff-chg">
]
(
</ins><code><ins class="diff-chg">
sse
</ins></code><ins class="diff-chg">
).
</ins>
The
<del class="diff-old">"subProtocol"
</del>
<code>
<ins class="diff-chg">subprotocol
</ins></code>
item
may
be
defined
in
a
form
instance
to
indicate
the
use
of
one
of
these
protocols,
for
<del class="diff-old">example:
</del>
<ins class="diff-chg">example
long
polling
with
its
special
use
of
HTTP:
</ins>
</p>
<div class="example" id="example-22-subprotocol">
<div class="marker">
<a class="self-link" href= "#example-22-subprotocol">
Example
<del class="diff-old">12
</del>
<bdi>
<ins class="diff-chg">22
</ins></bdi>
<del class="diff-old">:
subProtocol
</del>
</a>
<span class= "example-title">:
<ins class="diff-chg">subprotocol
</ins>
</span>
</div>
<del class="diff-old">{
: &lt;span class=
"hljs-string"&gt;"LongPoll"
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"op"</span>: <span class=
<ins class="diff-chg">"hljs-string">"subscribeevent"</span>,
</ins>  <span class="hljs-attr">"href"</span>: <span class=<ins class="diff-chg">
"hljs-string">"https://mylamp.example.com/overheating"</span>,
</ins>  <span class="hljs-attr">"subprotocol"</span>: <span class=<ins class="diff-chg">
"hljs-string">"longpoll"</span>
</ins>
}
</code>
</pre>
</div>
</section>
<section id="uri-variables">
<h4 id="x4-2-4-uri-template-variables">
<del class="diff-old">2.3
</del>
<bdi class= "secno">
<ins class="diff-chg">4.2.4
</ins></bdi><ins class="diff-chg">
URI
Template
Variables
</ins><a class="self-link" aria-label="§" href="#uri-variables"></a></h4><p><ins class="diff-chg">
When
Interaction
Affordances
require
dynamic
variables
in
the
</ins><code><ins class="diff-chg">
href
</ins></code>,<ins class="diff-chg">
they
can
be
described
using
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
in
the
Data
Schema
of
the
interaction.
For
example,
</ins><code><ins class="diff-chg">
p
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
d
</ins></code><ins class="diff-chg">
in
</ins><code><ins class="diff-chg">
http://192.168.1.25/left?p=2&amp;d=1
</ins></code><ins class="diff-chg">
can
be
described
with
a
template
as
defined
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570" title= "URI Template"><ins class="diff-chg">
RFC6570
</ins></a></cite><ins class="diff-chg">
]
]:
</ins><code><ins class="diff-chg">
http://192.168.1.25/left{?p,d}
</ins></code>.</p><p><ins class="diff-chg">
In
such
a
case,
the
URI
Template
variables
</ins><i><em class= "rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em></i><ins class="diff-chg">
be
collected
in
the
JSON-object
based
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
member
with
the
associated
(unique)
variable
names
as
JSON
names.
</ins></p><p><ins class="diff-chg">
The
serialization
of
each
value
in
the
map
assigned
to
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
in
an
instance
of
</ins><code><ins class="diff-chg">
Form
</ins></code><i><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em></i><ins class="diff-chg">
rely
on
the
DataSchema
as
explained
in
</ins><a href="#sec-data-schema" class= "sec-ref"><ins class="diff-chg">
§&nbsp;
</ins><bdi class="secno"><ins class="diff-chg">
3.1
</ins></bdi><ins class="diff-chg">
Data
Schema
</ins></a>.</p><p><ins class="diff-chg">
An
action
affordance
snippet
using
a
URI
Template
and
</ins><code><ins class="diff-chg">
uriVariables
</ins></code><ins class="diff-chg">
is
given
below:
</ins></p><div class="example" id= "example-23-action-affordance-using-uri-template-variables"><div class="marker"><a class="self-link" href= "#example-23-action-affordance-using-uri-template-variables"><ins class="diff-chg">
Example
</ins><bdi><ins class="diff-chg">
23
</ins></bdi></a><span class="example-title">:<ins class="diff-chg">
Action
Affordance
using
URI
Template
Variables
</ins>
</span>
</div>
<pre aria-busy="false"><code class="hljs javascript">...
<span class="hljs-string">"actions"</span>: {
    <span class="hljs-string">"LeftDown"</span>: {
<ins class="diff-new">        ...
</ins>        <span class="hljs-string">"uriVariables"</span>: {            <span class="hljs-string">"p"</span> : { <span class=<ins class="diff-new">
"hljs-string">"type"</span>: <span class=
"hljs-string">"integer"</span>, <span class=
"hljs-string">"minimum"</span>: <span class=
"hljs-number">0</span>, <span class=
"hljs-string">"maximum"</span>: <span class=
"hljs-number">16</span> },
</ins>            <span class="hljs-string">"d"</span> : { <span class=<ins class="diff-new">
"hljs-string">"type"</span>: <span class=
"hljs-string">"integer"</span>, <span class=
"hljs-string">"minimum"</span>: <span class=
"hljs-number">0</span>, <span class=
"hljs-string">"maximum"</span>: <span class=
"hljs-number">1</span> }
        },
</ins>        <span class="hljs-string">"forms"</span>: [{          <span class="hljs-string">"href"</span> : <span class=<ins class="diff-new">
"hljs-string">"http://192.168.1.25/left{?p,d}"</span>,
</ins>          <span class=<ins class="diff-new">
"hljs-string">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>
        }]
    },
    ...
},
...
</ins></code></pre></div></section></section><section id="sec-interaction-patterns" class="informative"><h3 id="x4-3-interaction-affordances"><bdi class="secno"><ins class="diff-new">
4.3
</ins></bdi>
Interaction
<del class="diff-old">Types
</del>
<ins class="diff-chg">Affordances
</ins><a class="self-link" aria-label="§" href= "#sec-interaction-patterns"></a>
</h3>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
This
section
describes
unique
aspects
of
protocol
bindings
for
the
three
WoT
<del class="diff-old">interaction
types.
</del>
<ins class="diff-chg">Interaction
Affordances.
</ins>
</p>
<section id="property-bindings">
<h4 id="x4-3-1-bindings-for-properties">
<del class="diff-old">2.3.1
</del>
<bdi class= "secno">
<ins class="diff-chg">4.3.1
</ins></bdi>
Bindings
for
Properties
<a class="self-link" aria-label="§" href="#property-bindings">
</a>
</h4>
<p>
This
section
describes
unique
aspects
of
protocol
bindings
for
WoT
Property
<del class="diff-old">type
</del>
interactions.
</p>
<p>
The
abstract
<del class="diff-old">methods
</del>
<ins class="diff-chg">operations
</ins>
exposed
for
the
Property
Interaction
are
<del class="diff-old">readProperty,
writeProperty,
</del>
<code>
<ins class="diff-chg">readproperty
</ins></code>,<code><ins class="diff-chg">
writeproperty
</ins></code>,<code><ins class="diff-chg">
observeproperty
</ins></code>
and
<del class="diff-old">observeProperty.
</del>
<code>
<ins class="diff-chg">unobserveproperty
</ins></code>.
These
are
mapped
by
using
form
<del class="diff-old">relations
</del>
<ins class="diff-chg">operations
</ins>
that
describe
<ins class="diff-new">how
</ins>
the
abstract
<del class="diff-old">method,
</del>
<ins class="diff-chg">operation
is
performed,
</ins>
resulting
in
a
semantic
interpretation
similar
to
HTML
form
submission.
</p>
<p>
<ins class="diff-chg">Additionally,
the
abstract
operations
exposed
for
multiple
Property
Interactions
are
</ins><code><ins class="diff-chg">
readallproperties
</ins></code>,<code><ins class="diff-chg">
writeallproperties
</ins></code>,<code><ins class="diff-chg">
readmultipleproperties
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
writemultipleproperties
</ins></code>.</p><div class="example" id= "example-24-example-use-of-form-operation-for-property"><div class="marker">
<a class="self-link" href= "#example-24-example-use-of-form-operation-for-property">
Example
<del class="diff-old">13
</del>
<bdi>
<ins class="diff-chg">24
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
Example
use
of
form
<del class="diff-old">relation
</del>
<ins class="diff-chg">operation
</ins>
for
Property
</span>
</div>
<del class="diff-old">  For example a form having href=&lt;span class=
"hljs-regexp"&gt;/example/level, rel=writeProperty, and
  http:methodName=POST conveys the statement:
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"op"</span>: <span class=
<ins class="diff-chg">"hljs-string">"writeproperty"</span>,
</ins>  <span class="hljs-attr">"href"</span>: <span class=<ins class="diff-chg">
"hljs-string">"/example/level"</span>,
</ins>  <span class="hljs-attr">"htv:methodName"</span>: <span class=<ins class="diff-chg">
"hljs-string">"POST"</span>
}
</ins></code>
<del class="diff-old">  To &lt;span class=
"hljs-keyword"&gt;do a writeProperty &lt;span class=
"hljs-keyword"&gt;of the subject Property (context &lt;span class=
"hljs-keyword"&gt;of the form),
  perform a POST on the resource at the target URI /example/level.
</del>
</pre>
</div>
<p>
<ins class="diff-new">The
form
element
in
the
example
above
conveys
the
statement:
</ins><i><ins class="diff-new">
"To
do
a
</ins><code><ins class="diff-new">
writeproperty
</ins></code><ins class="diff-new">
of
the
subject
Property
(context
of
the
form),
perform
an
</ins><code><ins class="diff-new">
HTTP
POST
</ins></code><ins class="diff-new">
on
the
resource
at
the
target
URI
</ins><code><ins class="diff-new">
/example/level
</ins></code>."</i></p><p>
Properties
may
be
observable,
defined
by
the
TD
keyword
"observable".
If
there
is
an
observe
form
and
a
retrieve
form,
the
observe
form
may
be
indicated
by
including
<del class="diff-old">rel=observeProperty
</del>
<code>
<ins class="diff-chg">op=observeproperty
</ins></code>
in
the
form.
The
observe
form
may
also
specify
header
options
to
use,
<del class="diff-old">for
</del>
<ins class="diff-chg">as
specified
in
Observing
in
CoAP[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7641" title= "Observing Resources in the Constrained Application Protocol (CoAP)"><ins class="diff-chg">
RFC7641
</ins></a></cite><ins class="diff-chg">
]for
</ins>
example
<ins class="diff-new">setting
the
</ins>
CoAP
<del class="diff-old">observe
option=0
</del>
<ins class="diff-chg">Observe
option
to
</ins><code><ins class="diff-chg">
0
</ins></code>
in
the
<del class="diff-old">header
to
start
</del>
<ins class="diff-chg">header,
starts
</ins>
observation.
</p>
</section>
<section id="action-bindings" class="informative">
<h4 id="x4-3-2-bindings-for-actions">
<del class="diff-old">2.3.2
</del>
<bdi class="secno">
<ins class="diff-chg">4.3.2
</ins></bdi>
Bindings
for
Actions
<a class="self-link" aria-label="§" href= "#action-bindings">
</a>
</h4>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
This
section
describes
unique
aspects
of
protocol
bindings
for
<del class="diff-old">WoT
Action
type
interactions.
</del>
<ins class="diff-chg">Actions.
</ins>
</p>
<p>
The
abstract
<del class="diff-old">method
</del>
<ins class="diff-chg">operation
</ins>
on
Actions
is
<del class="diff-old">invokeAction.
</del>
<code>
<ins class="diff-chg">invokeaction
</ins></code>.
In
the
same
way
that
the
abstract
<del class="diff-old">methods
</del>
<ins class="diff-chg">operations
</ins>
on
<del class="diff-old">properties
</del>
<ins class="diff-chg">Properties
</ins>
are
mapped
using
form
<del class="diff-old">relations,
</del>
<ins class="diff-chg">operation
types,
</ins>
the
abstract
<del class="diff-old">methods
</del>
<ins class="diff-chg">operation
</ins>
of
<del class="diff-old">actions
are
</del>
<ins class="diff-chg">Actions
is
</ins>
also
mapped.
</p>
<div class="example" id= "example-25-example-use-of-form-operation-for-action">
<div class="marker">
<a class="self-link" href= "#example-25-example-use-of-form-operation-for-action">
Example
<del class="diff-old">14
</del>
<bdi>
<ins class="diff-chg">25
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
Example
use
of
form
<del class="diff-old">relation
</del>
<ins class="diff-chg">operation
</ins>
for
Action
</span>
</div>
<del class="diff-old">  For example a form &lt;span class=
"hljs-keyword"&gt;with href=&lt;span class=
"hljs-regexp"&gt;/example/levelaction, rel=invokeAction,
  and http:methodName=POST conveys the statement:
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"op"</span>: <span class=
<ins class="diff-chg">"hljs-string">"invokeaction"</span>,
</ins>  <span class="hljs-attr">"href"</span>: <span class=<ins class="diff-chg">
"hljs-string">"/example/levelaction"</span>,
</ins>  <span class="hljs-attr">"http:methodName"</span>: <span class=<ins class="diff-chg">
"hljs-string">"POST"</span>
}
</ins></code>
<del class="diff-old">  To &lt;span class=
"hljs-keyword"&gt;do an invokeAction &lt;span class=
"hljs-keyword"&gt;of the subject Action (context &lt;span class=
"hljs-keyword"&gt;of the form),
  perform a POST on the resource at /example/levelaction.
</del>
</pre>
</div>
<p>
<ins class="diff-new">The
form
element
in
the
example
above
conveys
the
statement:
</ins><i><ins class="diff-new">
"To
do
an
</ins><code><ins class="diff-new">
invokeaction
</ins></code><ins class="diff-new">
of
the
subject
Action
(context
of
the
form),
perform
a
</ins><code><ins class="diff-new">
POST
</ins></code><ins class="diff-new">
on
the
resource
at
the
target
URI
</ins><code><ins class="diff-new">
/example/levelaction
</ins></code>."</i></p>
</section>
<section id="event-bindings" class="informative">
<h4 id="x4-3-3-bindings-for-events">
<del class="diff-old">2.3.3
</del>
<bdi class="secno">
<ins class="diff-chg">4.3.3
</ins></bdi>
Bindings
for
Events
<a class="self-link" aria-label="§" href= "#event-bindings">
</a>
</h4>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
This
section
describes
unique
aspects
of
protocol
bindings
for
WoT
Event
<del class="diff-old">type
interactions.
</del>
<ins class="diff-chg">Interaction
Affordances.
</ins>
</p>
<p>
The
abstract
<del class="diff-old">methods
</del>
<ins class="diff-chg">operations
</ins>
on
Events
are
<del class="diff-old">subscribeEvent
</del>
<code>
<ins class="diff-chg">subscribeevent
</ins></code>
and
<del class="diff-old">unsubscribeEvent.
</del>
<code>
<ins class="diff-chg">unsubscribeevent
</ins></code>.
The
<del class="diff-old">subscribeEvent
</del>
<code>
<ins class="diff-chg">subscribeevent
</ins></code>
operation
<del class="diff-old">returns
</del>
<ins class="diff-chg">may
directly
enable
event
instance
delivery
from
the
pre-defined
URI
to
observable
resources
or
pubsub
topics
encoded
in
URIs.
Alternatively,
it
may
return
</ins>
a
location
or
resource
URI
from
which
<del class="diff-old">events
</del>
<ins class="diff-chg">event
instance
</ins>
may
be
obtained,
either
by
observation
or
some
other
<del class="diff-old">method,
</del>
<ins class="diff-chg">mechanism,
</ins>
depending
on
the
transfer
protocol.
</p>
<p>
<del class="diff-old">The
binding
for
Events
allows
pre-defined
URIs
to
observable
resources,
or
pubsub
topica
encoded
in
URI.
If
</del>
<ins class="diff-chg">Usually,
</ins>
the
<del class="diff-old">binding
offers
a
subscription,
there
will
be
a
form
with
rel=subscribeEvent
</del>
<code>
<ins class="diff-chg">unsubscribeevent
</ins></code><ins class="diff-chg">
only
occurs
when
the
transfer
protocol
has
no
implicit
unsubscribe
operation
such
as
closing
the
connection.
Examples
are
Webhooks
that
require
particular
unsubscribe
requests.
</ins>
</p>
<p>
If
the
binding
offers
an
observable
Event
resource
from
which
events
are
obtained,
there
will
be
a
form
which
describes
the
required
transfer
layer
operation,
for
example
CoAP
Observe
or
HTTP
Long
Polling.
</p>
<div class="example" id= "example-26-example-use-of-form-operation-for-events">
<div class="marker">
<a class="self-link" href= "#example-26-example-use-of-form-operation-for-events">
Example
<del class="diff-old">15
</del>
<bdi>
<ins class="diff-chg">26
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
Example
use
of
form
<del class="diff-old">relation
</del>
<ins class="diff-chg">operation
</ins>
for
Events
</span>
</div>
<del class="diff-old">  For example, a form having href=mqtt:&lt;span class=
"hljs-comment"&gt;//0m2m.net/example/levelevent,
  rel=subscribeEvent,
  and mqtt:methodCode=&lt;span class=
"hljs-number"&gt;8 conveys the statement:
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"op"</span>: <span class=
<ins class="diff-chg">"hljs-string">"subscribeevent"</span>,
</ins>  <span class="hljs-attr">"href"</span>: <span class=<ins class="diff-chg">
"hljs-string">"mqtt://wot.example.com/levelevent"</span>,
</ins>  <span class=<ins class="diff-chg">
"hljs-attr">"mqv:controlPacketValue"</span>: <span class=
"hljs-string">"SUBSCRIBE"</span>
}
</ins></code>
<del class="diff-old">  To &lt;span class=
"hljs-keyword"&gt;do a subscribeEvent &lt;span class=
"hljs-keyword"&gt;of the subject Event (context &lt;span class=
"hljs-keyword"&gt;of the form),
  perform an MQTT SUBSCRIBE (code &lt;span class=
"hljs-number"&gt;8) on the topic /example/levelevent
  on the broker at mqtt:&lt;span class=
"hljs-comment"&gt;//0m2m.net using the default MQTT port.
</del>
</pre>
</div>
<p>
<ins class="diff-new">The
form
element
in
the
example
above
conveys
the
statement:
</ins><i><ins class="diff-new">
"To
do
an
</ins><code><ins class="diff-new">
subscribeevent
</ins></code><ins class="diff-new">
of
the
subject
Event
(context
of
the
form),
perform
an
</ins><code><ins class="diff-new">
MQTT
SUBSCRIBE
</ins></code><ins class="diff-new">
on
the
topic
</ins><code><ins class="diff-new">
/levelevent
</ins></code><ins class="diff-new">
on
the
broker
at
</ins><code><ins class="diff-new">
wot.example.com
</ins></code><ins class="diff-new">
using
the
default
MQTT
port."
</ins></i></p>
</section>
</section>
<section id="processing-model" class="informative">
<h3 id="x4-4-processing-model-and-runtime">
<del class="diff-old">2.4
</del>
<bdi class= "secno">
<ins class="diff-chg">4.4
</ins></bdi>
Processing
Model
and
Runtime
<a class="self-link" aria-label="§" href="#processing-model">
</a>
</h3>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
This
section
describes
the
processing
model
for
Protocol
Bindings
with
respect
to
the
abstract
WoT
Interactions
provided
by
the
Scripting
API.
</p>
<p>
<code>
DataSchema
</code>
elements
(see
<del class="diff-old">Section
2.1)
</del>
<a href="#sec-data-schema" class="sec-ref">
<ins class="diff-chg">§&nbsp;
</ins><bdi class="secno"><ins class="diff-chg">
3.1
</ins></bdi><ins class="diff-chg">
Data
Schema
</ins></a><ins class="diff-chg">
)
</ins>
are
processed,
and
value
scaling
is
performed,
in
the
application
library
or
adaptation
layer.
</p>
<p>
Form
elements
that
specify
href,
method,
options,
and
<del class="diff-old">mediaType
</del>
<ins class="diff-chg">contentType
</ins>
are
processed
in
a
driver
context
which
is
isolated
from
the
application.
</p>
<p>
The
application,
or
a
protocol
adaptation
layer,
constructs
an
instance
of
the
appropriate
DataSchema
element
and
sends
it
along
with
the
selected
form
contents
to
the
protocol
driver
or,
in
the
case
of
get,
receives
a
payload
form
the
protocol
driver
and
uses
the
appropriate
<code>
DataSchema
</code>
element
to
extract
the
field
values
of
interest.
</p>
<p>
The
separation
of
execution
context
between
the
application
and
the
protocol
driver
enables
isolation
of
fault
domains
and
isolation
of
security
domains.
</p>
<div class="note" id="issue-container-generatedID-1">
<div role="heading" class="ednote-title marker" id="h-ednote-1" aria-level="4">
<span>
Editor's
note
</span>
<del class="diff-old">:
</del>
<span class= "issue-label">:
Multiple
Security
Bindings
</span>
</div>
<p class="">
Additional
information
in
the
Thing
Description
may
be
considered
part
of
the
Protocol
Binding,
relating
to
security
protocols.
There
is
currently
a
single
declaration
of
security
bindings
for
each
TD
instance,
with
no
defined
way
to
indicate
a
different
security
protocol
for
each
form
element,
which
may
specify
a
different
transfer
protocol.
</p>
</div>
<p>
Protocol
Bindings
may
be
used
by
proxies,
where
a
Consumed
Thing
has
its
Protocol
Binding,
and
the
corresponding
Exposed
Thing
may
have
a
different
Protocol
Binding.
</p>
</section>
</section>
<section id="vocabulary" class="normative">
<h2 id="x5-vocabulary">
<del class="diff-old">3.
</del>
<bdi class="secno">
<ins class="diff-chg">5.
</ins></bdi>
Vocabulary
<a class="self-link" aria-label="§" href= "#vocabulary">
<del class="diff-old">This
section
is
non-normative.
</del>
</a>
</h2>
<p>
This
section
<del class="diff-old">specifies
</del>
<ins class="diff-chg">summarizes
</ins>
the
vocabulary
<ins class="diff-new">used
</ins>
for
<del class="diff-old">protocol
binding
templates
</del>
<ins class="diff-chg">Binding
Templates.
The
vocabulary
is
defined
in
other
documents,
in
particular
the
WoT
Thing
Description
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description"><ins class="diff-chg">
WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-chg">
]
</ins>
</p>
<section id="dataschema-vocabulary">
<h3 id="x5-1-dataschema-vocabulary">
<del class="diff-old">3.1
</del>
<bdi class="secno">
<ins class="diff-chg">5.1
</ins></bdi>
<code>
DataSchema
</code>
Vocabulary
<a class="self-link" aria-label= "§" href="#dataschema-vocabulary">
</a>
</h3>
<p>
<code>
DataSchema
</code>
elements
describe
the
structure
of
the
payload.
The
<code>
DataSchema
</code>
<ins class="diff-new">class
and
</ins>
vocabulary
is
<del class="diff-old">described
</del>
<ins class="diff-chg">defined
</ins>
in
<del class="diff-old">[TD].
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description"><ins class="diff-chg">
WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-chg">
].
</ins>
Properties
and
Events
<del class="diff-old">define
a
"schema"
for
</del>
<ins class="diff-chg">directly
implement
the
</ins><code><ins class="diff-chg">
DataSchema
</ins></code><ins class="diff-chg">
class
(i.e.,
they
contain
the
corresponding
fields
such
as
</ins><code><ins class="diff-chg">
type
</ins></code><ins class="diff-chg">
),
which
describes
the
</ins>
data
transfer
in
either
direction.
Actions
may
define
<del class="diff-old">"inputSchema"
</del>
<ins class="diff-chg">an
</ins><code><ins class="diff-chg">
input
</ins></code><ins class="diff-chg">
data
schema
</ins>
for
actuation
data
being
sent
to
the
<del class="diff-old">resource
using,
for
example,
POST
or
PUT,
and
"outputSchema"
</del>
<ins class="diff-chg">Action
and/or
an
</ins><code><ins class="diff-chg">
output
</ins></code><ins class="diff-chg">
data
schema
</ins>
for
result
or
status
data
being
returned
from
the
<del class="diff-old">Action
resource.
</del>
<ins class="diff-chg">Action.
</ins>
</p>
</section>
<section id="form-operation-type-vocabulary">
<h3 id="x5-2-form-operation-type-vocabulary">
<bdi class= "secno">
<ins class="diff-chg">5.2
</ins></bdi><ins class="diff-chg">
Form
Operation
Type
Vocabulary
</ins><a class= "self-link" aria-label="§" href= "#form-operation-type-vocabulary"></a>
<del class="diff-old">3.2
Interaction
Verbs
</del>
</h3>
<p>
<del class="diff-old">Interactions
have
one
or
more
defined
interaction
verbs
for
each
interaction
pattern.
Form
Relations
allow
an
</del>
<ins class="diff-chg">Each
</ins>
interaction
<ins class="diff-new">affordance
has
associated
form
operation
types
(i.e.
</ins><code><ins class="diff-new">
op
</ins></code><ins class="diff-new">
)
that
are
used
</ins>
to
<del class="diff-old">have
separate
protocol
mechanisms
</del>
<ins class="diff-chg">select
the
form
element
corresponding
</ins>
to
<del class="diff-old">support
different
</del>
<ins class="diff-chg">the
intended
</ins>
interaction
<del class="diff-old">verbs.
</del>
<ins class="diff-chg">from
the
Array
of
forms.
For
example,
for
one
interaction,
a
Consumer
can
choose
the
form
element
corresponding
to
reading
a
Property,
observing
a
Property
or
writing
to
Property
by
using
the
form
operation
type.
</ins>
</p>
<section id="property-forms">
<h4 id="x5-2-1-property-forms">
<del class="diff-old">3.2.1
</del>
<bdi class="secno">
<ins class="diff-chg">5.2.1
</ins></bdi>
Property
<del class="diff-old">Interactions
</del>
<ins class="diff-chg">Forms
</ins><a class="self-link" aria-label="§" href= "#property-forms"></a>
</h4>
<p>
Properties
<ins class="diff-new">can
</ins>
provide
<del class="diff-old">'"read"
and,
optionally,
"write"
</del>
<code>
<ins class="diff-chg">readproperty
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
writeproperty
</ins></code>
operations,
which
map
to
GET
and
PUT/POST
of
a
REST
<del class="diff-old">API.
</del>
<ins class="diff-chg">API,
respectively.
</ins>
Properties
may
also
by
<del class="diff-old">observed,
though
some
properties
may
not
</del>
<ins class="diff-chg">observed
if
they
provide
an
</ins><code><ins class="diff-chg">
observeproperty
</ins></code><ins class="diff-chg">
operation
and
the
observation
can
</ins>
be
<del class="diff-old">observable.
readProperty
writeProperty
observeProperty
</del>
<ins class="diff-chg">stopped
if
the
property
provides
an
</ins><code><ins class="diff-chg">
unobserveproperty
</ins></code><ins class="diff-chg">
operation.
</ins>
</p>
<table class="def">
<thead>
<tr>
<th>
<code>
<ins class="diff-new">op
</ins></code><ins class="diff-new">
Term
</ins></th><th><ins class="diff-new">
Description
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
readproperty
</ins></code></td><td><ins class="diff-new">
Read
a
Property.
Requires
</ins><code><ins class="diff-new">
writeOnly
</ins></code><ins class="diff-new">
to
be
set
to
</ins><code><ins class="diff-new">
false
</ins></code>.</td></tr><tr><td><code><ins class="diff-new">
writeproperty
</ins></code></td><td><ins class="diff-new">
Write
a
Property.
Requires
</ins><code><ins class="diff-new">
readOnly
</ins></code><ins class="diff-new">
to
be
set
to
</ins><code><ins class="diff-new">
false
</ins></code>.</td></tr><tr><td><code><ins class="diff-new">
observeproperty
</ins></code></td><td><ins class="diff-new">
Observe
a
Property.
Requires
</ins><code><ins class="diff-new">
observable
</ins></code><ins class="diff-new">
to
be
set
to
</ins><code><ins class="diff-new">
true
</ins></code>.</td></tr><tr><td><code><ins class="diff-new">
unobserveproperty
</ins></code></td><td><ins class="diff-new">
Unobserve
a
Property.
Requires
</ins><code><ins class="diff-new">
observable
</ins></code><ins class="diff-new">
to
be
set
to
</ins><code><ins class="diff-new">
true
</ins></code>.</td></tr></tbody></table>
</section>
<section id="action-forms">
<h4 id="x5-2-2-action-forms">
<del class="diff-old">3.2.2
</del>
<bdi class="secno">
<ins class="diff-chg">5.2.2
</ins></bdi>
Action
<del class="diff-old">Interactions
</del>
<ins class="diff-chg">Forms
</ins><a class="self-link" aria-label="§" href= "#action-forms"></a>
</h4>
<p>
Actions
<ins class="diff-new">only
</ins>
provide
<del class="diff-old">'"invoke"
operations,
which
can
map
to
PUT,
POST,
or
PUBLISH
</del>
<code>
<ins class="diff-chg">invokeaction
</ins></code>
operations.
<ins class="diff-new">For
completeness,
there
is
also
a
form
operation
type
defined.
</ins>
</p>
<del class="diff-old">invokeAction
</del>
<table class="def">
<thead>
<tr>
<th>
<code>
<ins class="diff-chg">op
</ins></code><ins class="diff-chg">
Term
</ins></th><th><ins class="diff-chg">
Description
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-chg">
invokeaction
</ins></code></td><td><ins class="diff-chg">
Invoke
an
Action.
</ins></td></tr></tbody></table>
</section>
<section id="event-forms">
<h4 id="x5-2-3-event-forms">
<del class="diff-old">3.2.3
</del>
<bdi class="secno">
<ins class="diff-chg">5.2.3
</ins></bdi>
Event
<del class="diff-old">Interactions
</del>
<ins class="diff-chg">Forms
</ins><a class="self-link" aria-label="§" href= "#event-forms"></a>
</h4>
<p>
Events
<del class="diff-old">may
directly
expose
observable
resources
</del>
<ins class="diff-chg">describe
subscription
endpoints
</ins>
from
which
to
<del class="diff-old">obtain
</del>
<ins class="diff-chg">event
instances
can
be
received
and
unsubscription
endpoints
to
stop
receiving
</ins>
event
instances.
</p>
<del class="diff-old">subscribeEvent
unsubscribeEvent
</del>
<table class="def">
<thead>
<tr>
<th>
<code>
<ins class="diff-chg">op
</ins></code><ins class="diff-chg">
Term
</ins></th><th><ins class="diff-chg">
Description
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-chg">
subscribeevent
</ins></code></td><td><ins class="diff-chg">
Subscribe
to
an
Event.
</ins></td></tr><tr><td><code><ins class="diff-chg">
unsubscribeevent
</ins></code></td><td><ins class="diff-chg">
Unsubscribe
from
an
Event.
</ins></td></tr></tbody></table>
</section>
</section>
<section id="protocol-vocabulary">
<h3 id="x5-3-protocol-vocabulary">
<del class="diff-old">3.3
Form
</del>
<bdi class="secno">
<ins class="diff-chg">5.3
</ins></bdi><ins class="diff-chg">
Protocol
</ins>
Vocabulary
<a class="self-link" aria-label="§" href= "#protocol-vocabulary">
</a>
</h3>
<p>
Extensions
to
the
<del class="diff-old">form
</del>
<ins class="diff-chg">Thing
Description
core
</ins>
vocabulary
<del class="diff-old">provide
a
way
to
</del>
<ins class="diff-chg">can
</ins>
inform
the
<del class="diff-old">client
</del>
<ins class="diff-chg">Consumer
</ins>
about
<del class="diff-old">protocol
</del>
<ins class="diff-chg">protocol-specific
message
configurations
such
as
</ins>
methods,
options,
and
status
codes.
<ins class="diff-new">By
using
such
information,
the
Consumer
can
build
the
protocol
specific
request
that
allows
interaction
with
the
Exposed
Thing.
Per
default
the
Thing
Description
includes
HTTP
Vocabulary
by
including
the
HTTP
RDF
vocabulary
definitions
from
HTTP
Vocabulary
in
RDF
1.0
[HTTP-in-RDF10].
</ins>
</p>
<div class="note" id="issue-container-generatedID-2">
<div role="heading" class="ednote-title marker" id="h-ednote-2" aria-level="4">
<del class="diff-old">3.3.1
</del>
<span>
<ins class="diff-chg">Editor's
note
</ins>
</span>
<del class="diff-old">HTTP
form
</del>
<span class= "issue-label">:
<ins class="diff-chg">Protocol
Vocabulary
Definitions
</ins></span></div><p class=""><ins class="diff-chg">
The
WoT
Working
Group
is
investigating
good
ways
to
also
provide
COAP
and
MQTT
Vocabulary
in
RDF.
Whether
the
WG
will
publish
corresponding
WG
Notes
is
still
subject
to
discussion.
</ins></p></div><ins class="diff-chg">
The
protocol
vocabularies
for
each
protocol
are
presented
as
two
tables
per
protocol.
The
first
table
details
the
</ins>
vocabulary
<ins class="diff-new">terms,
whereas
the
second
one
lists
a
default
mapping
of
the
</ins><code><ins class="diff-new">
op
</ins></code><ins class="diff-new">
for
the
given
protocol,
if
that
</ins><code><ins class="diff-new">
op
</ins></code><ins class="diff-new">
value
is
defined
for
the
given
protocol.
</ins><section id="http-vocabulary"><h4 id="x5-3-1-http-vocabulary"><bdi class="secno"><ins class="diff-new">
5.3.1
</ins></bdi><ins class="diff-new">
HTTP
Vocabulary
</ins><a class="self-link" aria-label="§" href= "#http-vocabulary"></a>
</h4>
<section id="http-vocabulary-terms">
<h5 id="x5-3-1-1-http-vocabulary-terms">
<bdi class= "secno">
<ins class="diff-new">5.3.1.1
</ins></bdi><ins class="diff-new">
HTTP
Vocabulary
Terms
</ins><a class="self-link" aria-label="§" href="#http-vocabulary-terms"></a></h5><table class="def"><thead><tr><th><ins class="diff-new">
Vocabulary
term
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Assignment
</ins></th><th><ins class="diff-new">
Type
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
htv:methodName
</ins></code></td><td><ins class="diff-new">
HTTP
method
name
(Literal).
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-new">
string
</ins></code></a>
<p>
<del class="diff-old">http:methodName
[
"GET",
"PUT",
"POST",
"DELETE"]
http:headers
example:
[
{"http:fieldName":
"accept",
"http:fieldValue":
"text/plain"}
]
http:fieldName
[
accept,
content-type,
transfer-encoding
]
http:fieldValue
</del>
<ins class="diff-chg">(one
of
</ins><code><ins class="diff-chg">
"GET"
</ins></code>,<code><ins class="diff-chg">
"PUT"
</ins></code>,<code><ins class="diff-chg">
"POST"
</ins></code>,<code><ins class="diff-chg">
"DELETE"
</ins></code>,<code><ins class="diff-chg">
"PATCH"
</ins></code><ins class="diff-chg">
)
</ins>
</p>
</td>
</tr>
<tr>
<td>
<code>
<ins class="diff-new">htv:headers
</ins></code></td><td><ins class="diff-new">
HTTP
headers
sent
with
the
message.
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><ins class="diff-new">
array
of
</ins><a href= "https://www.w3.org/TR/HTTP-in-RDF10/#MessageHeaderClass"><code><ins class="diff-new">
htv:MessageHeader
</ins></code></a></td></tr><tr><td><code><ins class="diff-new">
htv:fieldName
</ins></code></td><td><ins class="diff-new">
Header
name
(Literal),
e.g.,
</ins><code><ins class="diff-new">
"Accept"
</ins></code>,<code><ins class="diff-new">
"Transfer-Encoding"
</ins></code>.</td><td><ins class="diff-new">
mandatory
within
</ins><code><ins class="diff-new">
htv:MessageHeader
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-new">
string
</ins></code></a></td></tr><tr><td><code><ins class="diff-new">
htv:fieldValue
</ins></code></td><td><ins class="diff-new">
Header
value
(Literal).
</ins></td><td><ins class="diff-new">
mandatory
within
</ins><code><ins class="diff-new">
htv:MessageHeader
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-new">
string
</ins></code></a></td></tr></tbody></table>
</section>
<section id="http-default-vocabulary-terms">
<h5 id="x5-3-1-2-http-default-vocabulary-terms">
<del class="diff-old">3.3.2
</del>
<bdi class= "secno">
<ins class="diff-chg">5.3.1.2
</ins></bdi><ins class="diff-chg">
HTTP
Default
Vocabulary
Terms
</ins><a class= "self-link" aria-label="§" href= "#http-default-vocabulary-terms"></a></h5><table class="def"><thead><tr><th><code><ins class="diff-chg">
op
</ins></code><ins class="diff-chg">
value
</ins></th><th><ins class="diff-chg">
Default
Binding
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-chg">
readproperty
</ins></code></td><td><code><ins class="diff-chg">
"htv:methodName":
"GET"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writeproperty
</ins></code></td><td><code><ins class="diff-chg">
"htv:methodName":
"PUT"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
invokeaction
</ins></code></td><td><code><ins class="diff-chg">
"htv:methodName":
"POST"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
readallproperties
</ins></code></td><td><code><ins class="diff-chg">
"htv:methodName":
"GET"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writeallproperties
</ins></code></td><td><code><ins class="diff-chg">
"htv:methodName":
"PUT"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
readmultipleproperties
</ins></code></td><td><code><ins class="diff-chg">
"htv:methodName":
"GET"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writemultipleproperties
</ins></code></td><td><code><ins class="diff-chg">
"htv:methodName":
"PUT"
</ins></code></td></tr></tbody></table></section></section><section id="coap-vocabulary"><h4 id="x5-3-2-coap-vocabulary"><bdi class="secno"><ins class="diff-chg">
5.3.2
</ins></bdi>
CoAP
<del class="diff-old">form
vocabulary
</del>
<ins class="diff-chg">Vocabulary
</ins><a class="self-link" aria-label="§" href= "#coap-vocabulary"></a>
</h4>
<section id="coap-vocabulary-terms">
<h5 id="x5-3-2-1-coap-vocabulary-terms">
<bdi class= "secno">
<ins class="diff-new">5.3.2.1
</ins></bdi><ins class="diff-new">
CoAP
Vocabulary
Terms
</ins><a class="self-link" aria-label="§" href="#coap-vocabulary-terms"></a></h5><table class="def"><thead><tr><th><ins class="diff-new">
Vocabulary
term
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Assignment
</ins></th><th><ins class="diff-new">
Type
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
cov:methodName
</ins></code></td><td><ins class="diff-new">
CoAP
method
name
(Literal).
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-new">
string
</ins></code></a>
<p>
<del class="diff-old">coap:methodCode
[
1,
2,
3,
4
]
</del>
<ins class="diff-chg">(one
of
</ins><code><ins class="diff-chg">
"GET"
</ins></code><ins class="diff-chg">
(1),
</ins><code><ins class="diff-chg">
"POST"
</ins></code><ins class="diff-chg">
(2),
</ins><code><ins class="diff-chg">
"PUT"
</ins></code><ins class="diff-chg">
(3),
</ins><code><ins class="diff-chg">
"DELETE"
</ins></code><ins class="diff-chg">
(4),
</ins><code><ins class="diff-chg">
"FETCH"
</ins></code><ins class="diff-chg">
(5),
</ins><code><ins class="diff-chg">
"PATCH"
</ins></code><ins class="diff-chg">
(6),
</ins><code><ins class="diff-chg">
"iPATCH"
</ins></code><ins class="diff-chg">
(7))
</ins>
</p>
<del class="diff-old">coap:options
example:
</del>
</td>
</tr>
<tr>
<td>
<code>
<ins class="diff-chg">cov:options
</ins></code></td><td><ins class="diff-chg">
CoAP
options
sent
with
the
message,
e.g.,
</ins><code>
[
{
<del class="diff-old">"coap:optionCode":
6,
"coap:optionValue":
49
}
]
coap:optionCode
</del>
<ins class="diff-chg">"cov:optionName":
"Accept",
"cov:optionValue":
110
}]
</ins></code><ins class="diff-chg">
to
observe.
</ins></td><td><ins class="diff-chg">
optional
</ins></td><td><ins class="diff-chg">
array
of
</ins><code><ins class="diff-chg">
cov:MessageOption
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
cov:optionName
</ins></code></td><td><ins class="diff-chg">
Option
name
(Literal),
see
</ins><a href= "https://www.iana.org/assignments/core-parameters/core-parameters.xhtml#option-names"><ins class="diff-chg">
CoRE
Parameters
</ins></a>.</td><td><ins class="diff-chg">
mandatory
within
</ins><code><ins class="diff-chg">
cov:MessageOption
</ins></code></td><td><a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code></a></td></tr><tr><td><code><ins class="diff-chg">
cov:optionValue
</ins></code></td><td><ins class="diff-chg">
Header
value
(Literal).
</ins></td><td><ins class="diff-chg">
mandatory
within
</ins><code><ins class="diff-chg">
cov:MessageOption
</ins></code></td><td><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#anyType"><code><ins class="diff-chg">
anyType
</ins></code></a></td></tr></tbody></table></section><section id="coap-default-vocabulary-terms"><h5 id="x5-3-2-2-coap-default-vocabulary-terms"><bdi class= "secno"><ins class="diff-chg">
5.3.2.2
</ins></bdi><ins class="diff-chg">
CoAP
Default
Vocabulary
Terms
</ins><a class= "self-link" aria-label="§" href= "#coap-default-vocabulary-terms"></a></h5><table class="def"><thead><tr><th><code><ins class="diff-chg">
op
</ins></code><ins class="diff-chg">
value
</ins></th><th><ins class="diff-chg">
Default
Binding
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-chg">
readproperty
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"GET"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writeproperty
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"PUT"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
observeproperty
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"GET"
</ins></code>,<code><ins class="diff-chg">
"subprotocol":"cov:observe"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
unobserveproperty
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"GET"
</ins></code>,<code><ins class="diff-chg">
"subprotocol":"cov:observe"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
invokeaction
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"POST"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
subscribeevent
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"GET"
</ins></code>,<code><ins class="diff-chg">
"subprotocol":"cov:observe"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
unsubscribeevent
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"GET"
</ins></code>,<code><ins class="diff-chg">
"subprotocol":"cov:observe"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
readallproperties
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"GET"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writeallproperties
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"PUT"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
readmultipleproperties
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"GET"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writemultipleproperties
</ins></code></td><td><code><ins class="diff-chg">
"cov:methodName":
"PUT"
</ins></code></td></tr></tbody></table></section><ins class="diff-chg">
Observing
Resources
in
CoAP
should
be
done
as
specified
in
</ins>
[
<del class="diff-old">0..65535
]
coap:optionValue
</del>
<cite>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc7641" title= "Observing Resources in the Constrained Application Protocol (CoAP)">
<ins class="diff-chg">RFC7641
</ins></a></cite><ins class="diff-chg">
].
Since
observing
and
unobserving
need
to
be
indicated
with
the
Observe
flag
in
the
header,
this
mechanism
can
be
also
described
in
the
</ins><code><ins class="diff-chg">
cov:options
</ins></code><ins class="diff-chg">
with
the
value
</ins><code>
[
<del class="diff-old">any
type
]
</del>
<ins class="diff-chg">{
"cov:optionName":
"Observe",
"cov:optionValue":
0
}]
</ins></code>.<ins class="diff-chg">
However,
this
is
not
enough
to
describe
the
mechanism
of
getting
asynchronous
updates
from
the
observed
resource.
Thus,
</ins><code><ins class="diff-chg">
"subprotocol":"cov:observe"
</ins></code><ins class="diff-chg">
is
used
to
indicate
the
observation
mechanism.
</ins><div class="note" id="issue-container-generatedID-3"><div role="heading" class="ednote-title marker" id="h-ednote-3" aria-level="5"><span><ins class="diff-chg">
Editor's
note
</ins></span></div><p class=""><ins class="diff-chg">
As
indicated
by
the
</ins><a href= "#coap-default-vocabulary-terms" class="sec-ref"><ins class="diff-chg">
CoAP
Default
Vocabulary
Terms
</ins></a>,<ins class="diff-chg">
it
is
recommended
to
use
the
</ins><code><ins class="diff-chg">
subprotocol
</ins></code><ins class="diff-chg">
to
describe
the
observation.
Thus,
</ins><code><ins class="diff-chg">
cov:options
</ins></code><ins class="diff-chg">
with
the
value
</ins><code><ins class="diff-chg">
[
{
"cov:optionName":
"Observe",
"cov:optionValue":
0
}]
</ins></code><em class="rfc2119" title="MUST NOT"><ins class="diff-chg">
MUST
NOT
</ins></em><ins class="diff-chg">
be
used
together
with
</ins><code><ins class="diff-chg">
"subprotocol":"cov:observe"
</ins></code>,<ins class="diff-chg">
since
it
can
lead
to
confusion.
</ins>
</p>
</div>
</section>
<section id="mqtt-vocabulary">
<h4 id="x5-3-3-mqtt-vocabulary">
<del class="diff-old">3.3.3
</del>
<bdi class="secno">
<ins class="diff-chg">5.3.3
</ins></bdi>
MQTT
<del class="diff-old">form
vocabulary
</del>
<ins class="diff-chg">Vocabulary
</ins><a class="self-link" aria-label="§" href= "#mqtt-vocabulary"></a>
</h4>
<section id="mqtt-vocabulary-terms">
<h5 id="x5-3-3-1-mqtt-vocabulary-terms">
<bdi class= "secno">
<ins class="diff-new">5.3.3.1
</ins></bdi><ins class="diff-new">
MQTT
Vocabulary
Terms
</ins><a class="self-link" aria-label="§" href="#mqtt-vocabulary-terms"></a></h5><table class="def"><thead><tr><th><ins class="diff-new">
Vocabulary
term
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Assignment
</ins></th><th><ins class="diff-new">
Type
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
mqv:controlPacketValue
</ins></code></td><td><ins class="diff-new">
MQTT
Control
Packet
type
(Literal).
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-new">
string
</ins></code></a>
<p>
<del class="diff-old">mqtt:commandCode
[
3,
8,
10
]
</del>
<ins class="diff-chg">(one
of
</ins><code><ins class="diff-chg">
"PUBLISH"
</ins></code><ins class="diff-chg">
(3),
</ins><code><ins class="diff-chg">
"SUBSCRIBE"
</ins></code><ins class="diff-chg">
(8),
</ins><code><ins class="diff-chg">
"UNSUBSCRIBE"
</ins></code><ins class="diff-chg">
(10))
</ins>
</p>
<del class="diff-old">mqtt:options
example:
</del>
</td>
</tr>
<tr>
<td>
<code>
<ins class="diff-chg">mqv:options
</ins></code></td><td><ins class="diff-chg">
MQTT
options
sent
with
the
message,
e.g.,
</ins><code>
[
{
<del class="diff-old">"mqtt:optionName":
</del>
<ins class="diff-chg">"mqv:optionName":
</ins>
"qos",
<del class="diff-old">"mqtt:optionValue":
</del>
<ins class="diff-chg">"mqv:optionValue":
</ins>
1
}]
</code>.
</td>
<td>
<ins class="diff-chg">optional
</ins></td><td><ins class="diff-chg">
array
of
</ins><code><ins class="diff-chg">
mqv:MessageOption
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
mqv:optionName
</ins></code></td><td><ins class="diff-chg">
Option
name
(Literal).
</ins></td><td><ins class="diff-chg">
mandatory
within
</ins><code><ins class="diff-chg">
mqv:MessageOption
</ins></code><ins class="diff-chg">
)
</ins></td><td><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code><ins class="diff-chg">
string
</ins></code></a>
<p>
<del class="diff-old">mqtt:optionName
[
qos,
retain
]
</del>
<ins class="diff-chg">(one
of
</ins><code><ins class="diff-chg">
"qos"
</ins></code>,<code><ins class="diff-chg">
"retain"
</ins></code>,<code><ins class="diff-chg">
"dup"
</ins></code><ins class="diff-chg">
)
</ins>
</p>
<del class="diff-old">mqtt:optionValue
(qos)
[
0,
1,
2,
3
]
mqtt:optionValue
(retain)
[
0,
</del>
</td>
</tr>
<tr>
<td>
<code>
<ins class="diff-chg">mqv:optionValue
</ins></code></td><td><ins class="diff-chg">
Header
value
(Literal).
</ins></td><td><ins class="diff-chg">
mandatory
within
</ins><code><ins class="diff-chg">
mqv:MessageOption
</ins></code><ins class="diff-chg">
)
</ins></td><td><ins class="diff-chg">
One
of
</ins><code><ins class="diff-chg">
0
</ins></code>,<code>
1
<del class="diff-old">]
</del>
</code>
<ins class="diff-chg">or
</ins><code><ins class="diff-chg">
2
</ins></code><ins class="diff-chg">
(only
for
</ins><code><ins class="diff-chg">
qos
</ins></code><ins class="diff-chg">
)
</ins></td></tr></tbody></table>
</section>
<section id="mqtt-default-vocabulary-terms">
<h5 id="x5-3-3-2-mqtt-default-vocabulary-terms">
<bdi class= "secno">
<ins class="diff-chg">5.3.3.2
</ins></bdi><ins class="diff-chg">
MQTT
Default
Vocabulary
Terms
</ins><a class= "self-link" aria-label="§" href= "#mqtt-default-vocabulary-terms"></a></h5><table class="def"><thead><tr><th><code><ins class="diff-chg">
op
</ins></code><ins class="diff-chg">
value
</ins></th><th><ins class="diff-chg">
Default
Binding
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-chg">
readproperty
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"SUBSCRIBE",
</ins><br /></code></td></tr><tr><td><code><ins class="diff-chg">
writeproperty
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"PUBLISH"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
observeproperty
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"SUBSCRIBE"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
unobserveproperty
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"UNSUBSCRIBE"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
invokeaction
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"PUBLISH"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
subscribeevent
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"SUBSCRIBE"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
unsubscribeevent
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"UNSUBSCRIBE"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
readallproperties
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"SUBSCRIBE"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writeallproperties
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"PUBLISH"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
readmultipleproperties
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"SUBSCRIBE"
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
writemultipleproperties
</ins></code></td><td><code><ins class="diff-chg">
"mqv:controlPacketValue":
"PUBLISH"
</ins></code></td></tr></tbody></table><ins class="diff-chg">
For
the
MQTT
protocol,
if
an
MQTT
client
publishes
a
message
to
a
topic
with
the
retain
flag
set
to
true,
the
future
subscribers
of
the
topic
will
also
get
this
message.
Outside
of
this
case,
it
is
not
possible
to
read
a
property
but
only
possible
to
observe
it.
Additionally,
in
a
Form
element
with
MQTT
protocol,
if
the
</ins><code><ins class="diff-chg">
op
</ins></code><ins class="diff-chg">
contains
</ins><code><ins class="diff-chg">
readproperty
</ins></code><ins class="diff-chg">
(meaning
that
retain
flag
is
set
to
true),
it
</ins><em class="rfc2119" title= "SHOULD"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
also
contain
</ins><code><ins class="diff-chg">
observeproperty
</ins></code>.<ins class="diff-chg">
On
the
other
hand,
if
the
MQTT
publisher
does
not
set
the
retain
flag
to
true,
the
property
will
be
only
observable.
In
this
case,
the
property
in
the
exposed
Thing
Description
</ins><em class="rfc2119" title="SHOULD NOT"><ins class="diff-chg">
SHOULD
NOT
</ins></em><ins class="diff-chg">
have
Form
elements
with
MQTT
protocol
containing
</ins><code><ins class="diff-chg">
readproperty
</ins></code><ins class="diff-chg">
operation.
</ins></section></section><section id="subprotocol-vocabulary"><h4 id="x5-3-4-subprotocol-vocabulary"><bdi class= "secno"><ins class="diff-chg">
5.3.4
</ins></bdi><code><ins class="diff-chg">
subprotocol
</ins></code><ins class="diff-chg">
Vocabulary
</ins><a class= "self-link" aria-label="§" href="#subprotocol-vocabulary"></a>
<del class="diff-old">3.3.4
subProtocol
form
vocabulary
</del>
</h4>
<p>
<del class="diff-old">subProtocol
</del>
<ins class="diff-chg">The
</ins><code><ins class="diff-chg">
subprotocol
</ins></code><ins class="diff-chg">
field
is
defined
in
</ins>
[
<del class="diff-old">"LongPoll",
"EventSource"
]
</del>
<cite>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description" title= "Web of Things (WoT) Thing Description">
<ins class="diff-chg">WOT-THING-DESCRIPTION
</ins></a></cite><ins class="diff-chg">
].
</ins>
</p>
<p>
<del class="diff-old">subProtocol
</del>
<ins class="diff-chg">Currently,
the
supported
</ins>
values
<del class="diff-old">for
websockets
</del>
are
<del class="diff-old">registered
by
IANA:
</del>
<code>
<ins class="diff-chg">longpoll
</ins></code>,<code><ins class="diff-chg">
websub
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
sse
</ins></code><ins class="diff-chg">
defined
for
HTTP.
Subprotocols
can
be
used
for
asynchronous
event
delivery
or
observing
Properties.
</ins></p><p><ins class="diff-chg">
For
WebSockets,
the
IANA-registered
</ins>
Websocket
Subprotocols
<ins class="diff-new">[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-iana-web-socket-registry" title= "IANA Registry for Websocket Subprotocols"><ins class="diff-new">
iana-web-socket-registry
</ins></a></cite><ins class="diff-new">
]
may
be
used.
</ins></p><p><ins class="diff-new">
For
CoAP,
</ins><code><ins class="diff-new">
"subprotocol":"cov:observe"
</ins></code><ins class="diff-new">
can
be
used
to
describe
asynchronous
observation
operations
as
defined
by
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc6741" title= "Identifier-Locator Network Protocol (ILNP) Engineering Considerations"><ins class="diff-new">
RFC6741
</ins>
</a>
</cite>
<ins class="diff-new">]
</ins>
</p>
</section>
</section>
</section>
<section id="binding-examples" class="informative">
<del class="diff-old">4.
</del>
<h2 id= "x6-examples-of-thing-descriptions-including-protocol-bindings">
<bdi class="secno">
<ins class="diff-chg">6.
</ins></bdi>
Examples
of
Thing
Descriptions
including
protocol
bindings
<a class="self-link" aria-label="§" href="#binding-examples">
</a>
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
<ins class="diff-new">The
following
TD
examples
uses
a
fictional
CoAP
and
MQTT
Protocol
Bindings,
as
no
such
Protocol
Binding
is
available
at
the
time
of
writing
this
specification.
These
</ins><a href= "#dfn-context-ext" class="internalDFN" data-link-type="dfn"><ins class="diff-new">
TD
Context
Extensions
</ins></a><ins class="diff-new">
assume
that
there
is
a
CoAP
and
MQTT
in
RDF
vocabulary
similar
to
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-http-in-rdf10" title= "HTTP Vocabulary in RDF 1.0"><ins class="diff-new">
HTTP-in-RDF10
</ins></a></cite><ins class="diff-new">
]
that
is
accessible
via
the
namespace
</ins><code><ins class="diff-new">
http://www.example.org/coap-binding#
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
http://www.example.org/mqtt-binding#
</ins></code>,<ins class="diff-new">
respectively.
The
supplemented
</ins><code><ins class="diff-new">
cov:methodName
</ins></code><ins class="diff-new">
member
instructs
the
Consumer
which
CoAP
method
has
to
be
applied
(e.g.,
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
for
the
CoAP
Method
Code
0.01,
</ins><code><ins class="diff-new">
POST
</ins></code><ins class="diff-new">
for
the
CoAP
Method
Code
0.02,
or
</ins><code><ins class="diff-new">
iPATCH
</ins></code><ins class="diff-new">
for
CoAP
Method
Code
0.07).
The
supplemented
</ins><code><ins class="diff-new">
"mqv:controlPacketValue"
</ins></code><ins class="diff-new">
member
instructs
the
Consumer
which
MQTT
command
has
to
be
applied
(e.g.,
</ins><code><ins class="diff-new">
8
</ins></code><ins class="diff-new">
for
the
subscribing
and
</ins><code><ins class="diff-new">
10
</ins></code><ins class="diff-new">
for
unsubscribing).
</ins></p><p><ins class="diff-new">
A
</ins>
TD
with
simple
payload
format
<ins class="diff-new">and
protocols
can
be
seen
below.
Here
each
interaction
affordance
has
one
form
with
one
protocol.
</ins>
</p>
<div class="example" id="example-27-td-with-a-simple-payload">
<div class="marker">
<a class="self-link" href= "#example-27-td-with-a-simple-payload">
Example
<del class="diff-old">16
</del>
<bdi>
<ins class="diff-chg">27
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
TD
with
a
<del class="diff-old">simple
</del>
<ins class="diff-chg">Simple
</ins>
Payload
</span>
</div>
<del class="diff-old">{
</del>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"@context"</span>: [
    <span class=
<del class="diff-old">"hljs-string"&gt;"https://w3c.github.io/wot/w3c-wot-td-context.jsonld",
    &lt;span class=
"hljs-string"&gt;"https://w3c.github.io/wot/w3c-wot-common-context.jsonld",
          {
</del>
<ins class="diff-chg">"hljs-string">"https://www.w3.org/2019/wot/td/v1"</span>,
    {
</ins>
      <span class="hljs-attr">"iot"</span>: <span class=
"hljs-string">"http://iotschema.org/"</span>,
<del class="diff-old">      : &lt;span class=
"hljs-string"&gt;"http://iotschema.org/protocol/http",
      : &lt;span class=
"hljs-string"&gt;"http://iotschema.org/protocol/coap",
      : &lt;span class=
"hljs-string"&gt;"http://iotschema.org/protocol/mqtt"
</del>
      <span class="hljs-attr">"cov"</span>: <span class=
<ins class="diff-chg">"hljs-string">"http://www.example.org/coap-binding#"</span>
</ins>      <span class="hljs-string">"mqv"</span>: <span class=<ins class="diff-chg">
"hljs-string">"http://www.example.org/mqtt-binding#"</span>
</ins>
    }
  ],
  <span class="hljs-attr">"@type"</span>: [ <span class=
"hljs-string">"Thing"</span>, <span class=
"hljs-string">"iot:Light"</span>, <span class=
"hljs-string">"iot:LevelCapability"</span>, <span class=
<del class="diff-old">"hljs-string"&gt;"iot:BinarySwitch" ],
</del>
<ins class="diff-chg">"hljs-string">"iot:BinarySwitchCapability"</span> ],
</ins>
  <span class="hljs-attr">"base"</span>: <span class=
"hljs-string">"http://example.com"</span>,
<del class="diff-old">  : &lt;span class=
</del>
  <span class="hljs-attr">"title"</span>: <span class=
"hljs-string">"Lamp"</span>,
<del class="diff-old">  : [
    {
      : &lt;span class=
"hljs-string"&gt;"Switch State",
</del>
  <span class="hljs-attr">"id"</span>: <span class=
<ins class="diff-chg">"hljs-string">"urn:dev:ops:32473-WoTLamp-1234"</span>,
</ins>  <span class=<ins class="diff-chg">
"hljs-attr">"securityDefinitions"</span>: {<span class=
"hljs-attr">"basic_sc"</span>: {
</ins>    <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic"</span>,
</ins>    <span class="hljs-attr">"in"</span>: <span class=<ins class="diff-chg">
"hljs-string">"header"</span>
  }},
</ins>  <span class="hljs-attr">"security"</span>: [<span class=<ins class="diff-chg">
"hljs-string">"basic_sc"</span>],
</ins>  <span class="hljs-attr">"properties"</span>: {    <span class="hljs-attr">"switchState"</span>: {
      <span class="hljs-attr">"@type"</span>: [<span class=
<del class="diff-old">"hljs-string"&gt;"Property", &lt;span class=
"hljs-string"&gt;"iot:SwitchStatus"],
      :  {
        : [&lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"iot:SwitchStatus"</span>, <span class=
</ins>
"hljs-string">"iot:SwitchData"</span>],
<del class="diff-old">        : &lt;span class=
"hljs-string"&gt;"boolean"
      },
      : &lt;span class=
</del>
      <span class="hljs-attr">"type"</span>: <span class=
<ins class="diff-chg">"hljs-string">"boolean"</span>,
</ins>      <span class="hljs-attr">"writeOnly"</span>: <span class=<ins class="diff-chg">
"hljs-literal">false</span>,
</ins>      <span class="hljs-attr">"readOnly"</span>: <span class=
"hljs-literal">false</span>,
      <span class="hljs-attr">"observable"</span>: <span class=
"hljs-literal">false</span>,
<del class="diff-old">      : [
</del>
      <span class="hljs-attr">"forms"</span>: [
        {
          <span class="hljs-attr">"href"</span>: <span class=
"hljs-string">"/example/light/currentswitch"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"readProperty", &lt;span class=
"hljs-string"&gt;"writeProperty"],
          : &lt;span class=
"hljs-string"&gt;"application/json"
</del>
          <span class="hljs-attr">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"readproperty"</span>, <span class=
"hljs-string">"writeproperty"</span>],
</ins>          <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class="hljs-string">"application/json"</span>
</ins>
        }
      ]
    },
<del class="diff-old">    {
      : &lt;span class=
"hljs-string"&gt;"Current brightness",
</del>
    <span class="hljs-attr">"brightness"</span>: {
      <span class="hljs-attr">"@type"</span>: [<span class=
<del class="diff-old">"hljs-string"&gt;"Property", &lt;span class=
"hljs-string"&gt;"iot:CurrentLevel"],
      :  {
        : [&lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"iot:CurrentLevel"</span>, <span class=
</ins>
"hljs-string">"iot:LevelData"</span>],
<del class="diff-old">        : &lt;span class=
"hljs-string"&gt;"number"
      },
      : &lt;span class=
</del>
      <span class="hljs-attr">"type"</span>: <span class=
<ins class="diff-chg">"hljs-string">"number"</span>,
</ins>      <span class="hljs-attr">"writeOnly"</span>: <span class=<ins class="diff-chg">
"hljs-literal">false</span>,
</ins>      <span class="hljs-attr">"readOnly"</span>: <span class=
"hljs-literal">false</span>,
      <span class="hljs-attr">"observable"</span>: <span class=
"hljs-literal">false</span>,
<del class="diff-old">      : [
</del>
      <span class="hljs-attr">"forms"</span>: [
        {
          <span class="hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"/example/light/currentdimmer",
          : [&lt;span class=
"hljs-string"&gt;"readProperty", &lt;span class=
"hljs-string"&gt;"writeProperty"],
          : &lt;span class=
"hljs-string"&gt;"application/json"
</del>
<ins class="diff-chg">"hljs-string">"coap://example.com/example/light/currentdimmer"</span>,
</ins>          <span class="hljs-attr">"op"</span>: [<span class=<ins class="diff-chg">
"hljs-string">"readproperty"</span>, <span class=
"hljs-string">"writeproperty"</span>],
</ins>          <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class="hljs-string">"application/json"</span>
</ins>
        }
      ]
<del class="diff-old">    },
    {
      : &lt;span class=
"hljs-string"&gt;"Switch On",
</del>
<ins class="diff-chg">    }
  },
</ins>  <span class="hljs-attr">"actions"</span>: {    <span class="hljs-attr">"switchOn"</span>: {
      <span class="hljs-attr">"@type"</span>: [<span class=
<del class="diff-old">"hljs-string"&gt;"Action", &lt;span class=
"hljs-string"&gt;"iot:SwitchOn"],
      :  {
</del>
<ins class="diff-chg">"hljs-string">"iot:SwitchOnAction"</span>],
</ins>      <span class="hljs-attr">"input"</span>:  {
        <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"boolean"</span>,
        <span class="hljs-attr">"const"</span>: <span class=
"hljs-literal">true</span>
      },
<del class="diff-old">      : [
</del>
      <span class="hljs-attr">"forms"</span>: [
        {
          <span class="hljs-attr">"href"</span>: <span class=
"hljs-string">"/example/light/currentswitch"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"invokeAction"],
          : &lt;span class=
"hljs-string"&gt;"application/json"
</del>
          <span class="hljs-attr">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"invokeaction"</span>],
</ins>          <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class="hljs-string">"application/json"</span>
</ins>
        }
      ]
    },
<del class="diff-old">    {
      : &lt;span class=
"hljs-string"&gt;"Switch Off",
</del>
    <span class="hljs-attr">"switchOff"</span>: {
      <span class="hljs-attr">"@type"</span>: [<span class=
<del class="diff-old">"hljs-string"&gt;"Action", &lt;span class=
</del>
"hljs-string">"iot:SwitchOff"</span>],
<del class="diff-old">      :  {
</del>
      <span class="hljs-attr">"input"</span>:  {
        <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"boolean"</span>,
        <span class="hljs-attr">"const"</span>: <span class=
"hljs-literal">false</span>
      },
<del class="diff-old">      : [
</del>
      <span class="hljs-attr">"forms"</span>: [
        {
          <span class="hljs-attr">"href"</span>: <span class=
"hljs-string">"/example/light/currentswitch"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"invokeAction"],
          : &lt;span class=
"hljs-string"&gt;"application/json"
</del>
          <span class="hljs-attr">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"invokeaction"</span>],
</ins>          <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class="hljs-string">"application/json"</span>
</ins>
        }
      ]
    },
<del class="diff-old">    {
      : &lt;span class=
"hljs-string"&gt;"Set brightness level",
</del>
    <span class="hljs-attr">"setBrightness"</span>: {
      <span class="hljs-attr">"@type"</span>: [<span class=
<del class="diff-old">"hljs-string"&gt;"Action", &lt;span class=
"hljs-string"&gt;"iot:SetLevel"],
      :  {
</del>
<ins class="diff-chg">"hljs-string">"iot:SetLevelAction"</span>],
</ins>      <span class="hljs-attr">"input"</span>:  {
        <span class="hljs-attr">"@type"</span>: [<span class=
"hljs-string">"iot:LevelData"</span>],
        <span class="hljs-attr">"type"</span>: <span class=
"hljs-string">"number"</span>
      },
<del class="diff-old">      : [
</del>
      <span class="hljs-attr">"forms"</span>: [
        {
          <span class="hljs-attr">"href"</span>: <span class=
"hljs-string">"/example/light/currentdimmer"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"invokeAction"],
          : &lt;span class=
"hljs-string"&gt;"application/json"
</del>
          <span class="hljs-attr">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"invokeaction"</span>],
</ins>          <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class="hljs-string">"application/json"</span>
</ins>
        }
      ]
    }
<del class="diff-old">  ]
</del>
<ins class="diff-chg">  }
</ins>
}
</code>
</pre>
</div>
<p>
<ins class="diff-new">Another
version
of
the
previous
</ins>
TD
with
complex
payload
and
multiple
protocol
options
<ins class="diff-new">is
shown
below.
Notably,
the
</ins><code><ins class="diff-new">
brightness
</ins></code><ins class="diff-new">
property
can
be
read
via
HTTP,
written
to
via
CoAP
and
observed
via
MQTT.
</ins>
</p>
<div class="example" id= "example-28-td-with-protocol-options-and-complex-payload">
<div class="marker">
<a class="self-link" href= "#example-28-td-with-protocol-options-and-complex-payload">
Example
<del class="diff-old">17
</del>
<bdi>
<ins class="diff-chg">28
</ins></bdi>
<del class="diff-old">:
</del>
</a>
<span class="example-title">:
TD
with
protocol
options
and
complex
payload
</span>
</div>
<del class="diff-old">{
  : [
    &lt;span class=
"hljs-string"&gt;"https://w3c.github.io/wot/w3c-wot-td-context.jsonld",
</del>
<pre aria-busy="false"><code class="hljs javascript">{
  <span class="hljs-string">"@context"</span>: [
    <span class=
<del class="diff-old">"hljs-string"&gt;"https://w3c.github.io/wot/w3c-wot-common-context.jsonld",
</del>
<ins class="diff-chg">"hljs-string">"https://www.w3.org/2019/wot/td/v1"</span>,
</ins>
    {
<del class="diff-old">      : &lt;span class=
</del>
      <span class="hljs-string">"iot"</span>: <span class=
"hljs-string">"http://iotschema.org/"</span>,
<del class="diff-old">      : &lt;span class=
"hljs-string"&gt;"http://iotschema.org/protocol/http",
      : &lt;span class=
"hljs-string"&gt;"http://iotschema.org/protocol/coap",
      : &lt;span class=
"hljs-string"&gt;"http://iotschema.org/protocol/mqtt"
</del>
      <span class="hljs-string">"cov"</span>: <span class=
<ins class="diff-chg">"hljs-string">"http://www.example.org/coap-binding#"</span>
</ins>      <span class="hljs-string">"mqv"</span>: <span class=<ins class="diff-chg">
"hljs-string">"http://www.example.org/mqtt-binding#"</span>
</ins>
    }
  ],
<del class="diff-old">  : &lt;span class=
</del>
  <span class="hljs-string">"base"</span>: <span class=
"hljs-string">"http://example.com/"</span>,
<del class="diff-old">  : [ &lt;span class=
</del>
  <span class="hljs-string">"@type"</span>: [ <span class=
"hljs-string">"Thing"</span>, <span class=
"hljs-string">"iot:Light"</span>, <span class=
"hljs-string">"iot:LevelCapability"</span>, <span class=
"hljs-string">"iot:BinarySwitch"</span> ],
<del class="diff-old">  : &lt;span class=
</del>
  <span class="hljs-string">"title"</span>: <span class=
"hljs-string">"Lamp"</span>,
<del class="diff-old">  : [
    {
      : &lt;span class=
"hljs-string"&gt;"Switch State",
      : [&lt;span class=
"hljs-string"&gt;"Property", &lt;span class=
</del>
  <span class="hljs-string">"id"</span>: <span class=
<ins class="diff-chg">"hljs-string">"urn:dev:ops:32473-WoTLamp-1234"</span>,
</ins>  <span class=<ins class="diff-chg">
"hljs-string">"securityDefinitions"</span>: {<span class=
"hljs-string">"basic_sc"</span>: {
</ins>    <span class="hljs-string">"scheme"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic"</span>,
</ins>    <span class="hljs-string">"in"</span>: <span class=<ins class="diff-chg">
"hljs-string">"header"</span>
  }},
</ins>  <span class="hljs-string">"security"</span>: [<span class=<ins class="diff-chg">
"hljs-string">"basic_sc"</span>],
</ins>  <span class="hljs-string">"properties"</span>: {    <span class="hljs-string">"switchState"</span>: {      <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:SwitchStatus"</span>],
<del class="diff-old">      :  {
        : &lt;span class=
</del>
      <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"switch",
            : [&lt;span class=
</del>
      <span class="hljs-string">"properties"</span>: {
        <span class="hljs-string">"switch"</span>: {
          <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:SwitchData"</span>],
<del class="diff-old">            : {
              : &lt;span class=
</del>
          <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"boolean"</span>
<del class="diff-old">            }
          }
        ]
</del>
<ins class="diff-chg">        }
</ins>
      },
<del class="diff-old">      : &lt;span class=
"hljs-literal"&gt;true,
      : &lt;span class=
</del>
      <span class="hljs-string">"writeOnly"</span>: <span class=
<ins class="diff-chg">"hljs-literal">false</span>,
</ins>      <span class="hljs-string">"readOnly"</span>: <span class=<ins class="diff-chg">
"hljs-literal">false</span>,
</ins>      <span class="hljs-string">"observable"</span>: <span class=
"hljs-literal">true</span>,
<del class="diff-old">      : [
</del>
      <span class="hljs-string">"forms"</span>: [
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/currentswitch"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"readProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"readproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"GET"</span>
        },
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/currentswitch"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"writeProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"writeproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"POST"</span>
        },
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"mqtt://example.com/example/light/currentswitch"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"observeProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"observeproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"mqtt:commandCode": &lt;span class=
"hljs-number"&gt;8
</del>
<ins class="diff-chg">"hljs-string">"mqv:controlPacketValue"</span>: <span class=
"hljs-string">"SUBSCRIBE"</span>
</ins>
        }
      ]
    },
<del class="diff-old">    {
      : &lt;span class=
"hljs-string"&gt;"Current brightness",
      : [&lt;span class=
"hljs-string"&gt;"Property", &lt;span class=
</del>
    <span class="hljs-string">"brightness"</span>: {
      <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:CurrentLevel"</span>],
<del class="diff-old">      : {
        : &lt;span class=
</del>
      <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"brightness",
            : [&lt;span class=
</del>
      <span class="hljs-string">"properties"</span>: {
        <span class="hljs-string">"brightness"</span>: {
          <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:LevelData"</span> ],
<del class="diff-old">            : {
              : &lt;span class=
</del>
          <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"integer"</span>,
<del class="diff-old">              &lt;span class=
"hljs-attr"&gt;"minimum",
              &lt;span class=
"hljs-attr"&gt;"maximum"
            }
          }
        ]
</del>
          <span class="hljs-string">"minimum"</span>: <span class=
<ins class="diff-chg">"hljs-number">0</span>,
</ins>          <span class="hljs-string">"maximum"</span>: <span class=<ins class="diff-chg">
"hljs-number">255</span>
        }
</ins>
      },
<del class="diff-old">      : &lt;span class=
"hljs-literal"&gt;true,
      : &lt;span class=
</del>
      <span class="hljs-string">"writeOnly"</span>: <span class=
<ins class="diff-chg">"hljs-literal">false</span>,
</ins>      <span class="hljs-string">"readOnly"</span>: <span class=<ins class="diff-chg">
"hljs-literal">false</span>,
</ins>      <span class="hljs-string">"observable"</span>: <span class=
"hljs-literal">true</span>,
<del class="diff-old">      : [
</del>
      <span class="hljs-string">"forms"</span>: [
        {
<del class="diff-old">          : &lt;span class=
"hljs-string"&gt;"/example/light/currentdimmer",
          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
<ins class="diff-chg">"hljs-string">"coap://example.com/example/light/currentdimmer"</span>,
</ins>          <span class=<ins class="diff-chg">
"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"readProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"readproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"cov:methodName"</span>: <span class=
</ins>
"hljs-string">"GET"</span>
        },
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/currentdimmer"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"writeProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"writeproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"POST"</span>
        },
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"mqtt://example.com/example/light/currentdimmer"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"observeProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"observeproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"mqtt:commandCode": &lt;span class=
"hljs-number"&gt;8
</del>
<ins class="diff-chg">"hljs-string">"mqv:controlPacketValue"</span>: <span class=
"hljs-string">"SUBSCRIBE"</span>
</ins>
        }
      ]
    },
<del class="diff-old">    {
      : &lt;span class=
"hljs-string"&gt;"Transition Time",
      : [&lt;span class=
"hljs-string"&gt;"Property", &lt;span class=
</del>
    <span class="hljs-string">"transitionTime"</span>: {
      <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:TransitionTime"</span>],
<del class="diff-old">      : {
        : &lt;span class=
</del>
      <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"transitiontime",
            : [&lt;span class=
</del>
      <span class="hljs-string">"properties"</span>: {
        <span class="hljs-string">"transitionTime"</span>: {
          <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:TransitionTimeData"</span> ],
<del class="diff-old">            : {
              : &lt;span class=
</del>
          <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"integer"</span>,
<del class="diff-old">              &lt;span class=
"hljs-attr"&gt;"minimum",
              &lt;span class=
"hljs-attr"&gt;"maximum"
            }
          }
        ]
</del>
          <span class="hljs-string">"minimum"</span>: <span class=
<ins class="diff-chg">"hljs-number">0</span>,
</ins>          <span class="hljs-string">"maximum"</span>: <span class=<ins class="diff-chg">
"hljs-number">255</span>
        }
</ins>
      },
<del class="diff-old">      : &lt;span class=
"hljs-literal"&gt;true,
      : &lt;span class=
</del>
      <span class="hljs-string">"writeOnly"</span>: <span class=
"hljs-literal">false</span>,
<del class="diff-old">      : [
</del>
      <span class="hljs-string">"readOnly"</span>: <span class=
<ins class="diff-chg">"hljs-literal">false</span>,
</ins>      <span class="hljs-string">"observable"</span>: <span class=<ins class="diff-chg">
"hljs-literal">false</span>,
</ins>      <span class="hljs-string">"forms"</span>: [
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/transitiontime"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"readProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"readproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"GET"</span>
        },
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/transitiontime"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"writeProperty"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"writeproperty"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"POST"</span>
        }
      ]
<del class="diff-old">    },
    {
      : &lt;span class=
"hljs-string"&gt;"Switch On",
      : [&lt;span class=
"hljs-string"&gt;"Action", &lt;span class=
"hljs-string"&gt;"iot:SwitchOn"],
      :  {
        : &lt;span class=
</del>
<ins class="diff-chg">    }
  },
</ins>  <span class="hljs-string">"actions"</span>: {    <span class="hljs-string">"switchOn"</span>: {      <span class="hljs-string">"@type"</span>: [<span class=<ins class="diff-chg">
"hljs-string">"iot:SwitchOnAction"</span>],
</ins>      <span class="hljs-string">"input"</span>:  {        <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"switch",
            :{
              : &lt;span class=
</del>
        <span class="hljs-string">"properties"</span>: {
          <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"boolean"</span>,
<del class="diff-old">              : &lt;span class=
</del>
          <span class="hljs-string">"const"</span>: <span class=
"hljs-literal">true</span>
<del class="diff-old">            }
          }
        ]
</del>
<ins class="diff-chg">        }
</ins>
      },
<del class="diff-old">      : [
</del>
      <span class="hljs-string">"forms"</span>: [
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/currentswitch"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"invokeAction"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"invokeaction"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"POST"</span>
        }
      ]
    },
<del class="diff-old">    {
      : &lt;span class=
"hljs-string"&gt;"Switch Off",
      : [&lt;span class=
"hljs-string"&gt;"Action", &lt;span class=
"hljs-string"&gt;"iot:SwitchOff"],
      :  {
        : &lt;span class=
"hljs-string"&gt;"object",
        : [
          {
            : &lt;span class=
"hljs-string"&gt;"switch",
            : {
              : &lt;span class=
</del>
    <span class="hljs-string">"switchOff"</span>: {
      <span class="hljs-string">"@type"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"iot:SwitchOffAction"</span>],
</ins>      <span class="hljs-string">"input"</span>: {            <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"boolean"</span>,
<del class="diff-old">              : &lt;span class=
</del>
            <span class="hljs-string">"const"</span>: <span class=
"hljs-literal">false</span>
<del class="diff-old">            }
          }
        ]
</del>
<ins class="diff-chg">        }
</ins>
      },
<del class="diff-old">      : [
</del>
      <span class="hljs-string">"forms"</span>: [
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/currentswitch"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"invokeAction"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"invokeaction"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"POST"</span>
        }
      ]
    },
<del class="diff-old">    {
      : &lt;span class=
"hljs-string"&gt;"Set brightness level",
      : [&lt;span class=
"hljs-string"&gt;"Action", &lt;span class=
"hljs-string"&gt;"iot:SetLevel"],
      : {
        : &lt;span class=
</del>
    <span class="hljs-string">"setBrightness"</span>: {
      <span class="hljs-string">"title"</span>: <span class=
<ins class="diff-chg">"hljs-string">"Set Brightness Level"</span>,
</ins>      <span class="hljs-string">"@type"</span>: [<span class=<ins class="diff-chg">
"hljs-string">"iot:SetLevelAction"</span>],
</ins>      <span class="hljs-string">"input"</span>: {        <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"object"</span>,
<del class="diff-old">        : [
          {
            : &lt;span class=
"hljs-string"&gt;"brightness",
            : [&lt;span class=
</del>
        <span class="hljs-string">"properties"</span>: {
          <span class="hljs-string">"brightness"</span>: {
            <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:LevelData"</span>],
<del class="diff-old">            : {
              : &lt;span class=
</del>
            <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"integer"</span>,
<del class="diff-old">              &lt;span class=
"hljs-attr"&gt;"minimum",
              &lt;span class=
"hljs-attr"&gt;"maximum"
</del>
            <span class=
<ins class="diff-chg">"hljs-string">"minimum"</span>: <span class="hljs-number">0</span>,
</ins>            <span class=<ins class="diff-chg">
"hljs-string">"maximum"</span>: <span class="hljs-number">255</span>
</ins>
            }
          },
<del class="diff-old">          {
            : &lt;span class=
"hljs-string"&gt;"transitiontime",
            : [&lt;span class=
</del>
          <span class="hljs-string">"transitionTime"</span>: {
            <span class="hljs-string">"@type"</span>: [<span class=
"hljs-string">"iot:TransitionTimeData"</span>],
<del class="diff-old">            : {
              : &lt;span class=
</del>
            <span class="hljs-string">"type"</span>: <span class=
"hljs-string">"integer"</span>,
<del class="diff-old">              &lt;span class=
"hljs-attr"&gt;"minimum",
              &lt;span class=
"hljs-attr"&gt;"maximum"
            }
</del>
            <span class=
<ins class="diff-chg">"hljs-string">"minimum"</span>: <span class="hljs-number">0</span>,
</ins>            <span class=<ins class="diff-chg">
"hljs-string">"maximum"</span>: <span class="hljs-number">65535</span>
</ins>
          }
<del class="diff-old">        ]
</del>
      },
<del class="diff-old">      : [
</del>
      <span class="hljs-string">"forms"</span>: [
        {
<del class="diff-old">          : &lt;span class=
</del>
          <span class="hljs-string">"href"</span>: <span class=
"hljs-string">"/example/light/"</span>,
<del class="diff-old">          : &lt;span class=
</del>
          <span class=
<ins class="diff-chg">"hljs-string">"contentType"</span>: <span class=
</ins>
"hljs-string">"application/json"</span>,
<del class="diff-old">          : [&lt;span class=
"hljs-string"&gt;"invokeAction"],
</del>
          <span class="hljs-string">"op"</span>: [<span class=
<ins class="diff-chg">"hljs-string">"invokeaction"</span>],
</ins>
          <span class=
<del class="diff-old">"hljs-attr"&gt;"http:methodName": &lt;span class=
</del>
<ins class="diff-chg">"hljs-string">"htv:methodName"</span>: <span class=
</ins>
"hljs-string">"POST"</span>
        }
      ]
    }
<del class="diff-old">  ]
</del>
<ins class="diff-chg">  }
</ins>
}
</code>
</pre>
</div>
</section>
<del class="diff-old">5.
References
This
section
is
non-normative.
IANA
link
relations
"profile"
relation
A
media
type
defines
both
the
semantics
and
the
serialization
of
a
specific
type
of
content.
In
many
cases,
media
types
have
some
built-in
extensibility
or
openness,
so
that
specific
instances
of
the
media
type
can
layer
additional
semantics
on
top
of
the
media
type's
foundation.
In
this
case,
a
profile
is
the
appropriate
mechanism
to
signal
that
the
original
semantics
and
processing
model
of
the
media
type
still
apply,
but
that
an
additional
processing
model
can
be
used
to
extract
additional
semantics.
HTTP
vocabulary
IANA
Registry
for
Websocket
Subprotocols
</del>
<section id="sec-security-considerations">
<h2 id="x7-security-and-privacy-considerations">
<del class="diff-old">6.
</del>
<bdi class= "secno">
<ins class="diff-chg">7.
</ins></bdi>
Security
and
Privacy
Considerations
<a class= "self-link" aria-label="§" href= "#sec-security-considerations">
</a>
</h2>
<div class="note" id="issue-container-generatedID-4">
<div role="heading" class="ednote-title marker" id="h-ednote-4" aria-level="3">
<span>
Editor's
note
</span>
</div>
<p class="">
Security
and
privacy
considerations
are
still
under
discussion
and
development;
the
content
below
should
be
considered
preliminary.
Due
to
the
complexity
of
the
subject
we
are
considering
producing
a
separate
document
containing
a
detailed
security
and
privacy
considerations
discussion
including
a
risk
analysis,
threat
model,
recommended
mitigations,
and
appropriate
references
to
best
practices.
A
summary
will
be
included
here.
Work
in
progress
is
located
in
the
<a href= "https://github.com/w3c/wot-security/">
WoT
Security
and
Privacy
</a>
repository.
Please
file
any
security
or
privacy
considerations
and/or
concerns
using
the
<a href= "https://github.com/w3c/wot-security/issues">
GitHub
Issue
</a>
feature.
</p>
</div>
<p>
Security
is
a
cross-cutting
issue
that
needs
to
be
taken
into
account
in
all
WoT
building
<del class="diff-old">blocks
.
</del>
<ins class="diff-chg">blocks.
</ins>
The
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
WoT
does
not
define
any
new
security
mechanisms,
but
provides
guidelines
to
apply
the
best
practices
from
Web
security,
IoT
security,
and
information
security
for
general
software
and
hardware
considerations.
</p>
<p>
The
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">
WoT
Thing
Description
</a>
must
be
used
together
with
integrity
protection
mechanisms
and
access
control
policies.
Users
must
ensure
that
no
sensitive
information
is
included
in
the
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">
TDs
</a>
themselves.
</p>
<p>
The
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">
WoT
Binding
Templates
</a>
must
correctly
cover
the
security
mechanisms
employed
by
the
underlying
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">
IoT
<del class="diff-old">Platform
</del>
<ins class="diff-chg">platform
</ins>
</a>.
Due
to
the
automation
of
network
interactions
necessary
in
the
IoT,
operators
need
to
ensure
that
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">
Things
</a>
are
exposed
and
consumed
in
a
way
that
is
compliant
with
their
security
policies.
</p>
<p>
The
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">
WoT
Runtime
</a>
implementation
for
the
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">
WoT
Scripting
API
</a>
must
have
mechanisms
to
prevent
malicious
access
to
the
system
and
isolate
scripts
in
multi-tenant
<a href= "https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">
Servients
</a>.
</p>
</section>
<section id="appendix-example-sequences" class= "appendix informative">
<h2 id="a-example-sequences-of-interaction-affordances">
<bdi class= "secno">
A.
</bdi>
<ins class="diff-chg">Example
Sequences
of
Interaction
Affordances
</ins><a class="self-link" aria-label="§" href= "#appendix-example-sequences"></a></h2><p><em><ins class="diff-chg">
This
section
is
non-normative.
</ins></em></p><p><ins class="diff-chg">
This
section
illustrates
example
sequences
of
application
and
protocol
transactions
that
correspond
to
operations
(defined
in
the
Thing
Description
Specification)
implementing
various
interactions
among
WoT
Consumer
and
WoT
Things.
The
illustrations
show
both
the
concrete
protocol
transactions
and
the
interactions
between
the
applications
running
inside
the
WoT
Consumer
and
WoT
Thing
and
the
Consumed
Thing
and
Exposed
Thing
abstractions.
</ins></p><p><ins class="diff-chg">
For
the
sake
of
simplicity,
remote
and
local
proxies
between
the
Consumer
and
the
Thing
are
omitted
from
the
following
sequences.
We
also
assume
HTTP
as
the
concrete
protocol
and
omit
any
additional
transactions
for
implementing
security,
such
as
those
that
would
be
used
for
authentication
or
to
set
up
a
secure
connection
for
HTTPS.
Other
concrete
protocols
and
the
addition
of
security
transactions
however
would
only
affect
the
concrete
protocol
transactions,
not
the
application-level
interactions
with
the
Consumed
Thing
and
Exposed
Thing
abstractions.
</ins></p><section id="property-interactions"><h3 id="a-1-property-interactions"><bdi class="secno"><ins class="diff-chg">
A.1
</ins></bdi><ins class="diff-chg">
Property
Interactions
</ins><a class="self-link" aria-label="§" href= "#property-interactions"></a></h3><section id="read-property-http-binding"><h4 id="a-1-1-read-property-http-binding"><bdi class= "secno"><ins class="diff-chg">
A.1.1
</ins></bdi><ins class="diff-chg">
Read
property
(HTTP
binding)
</ins><a class= "self-link" aria-label="§" href= "#read-property-http-binding"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
readproperty
</ins></code><ins class="diff-chg">
operation
with
an
HTTP
protocol
binding.
</ins></p><p><img src="images/message-flows/A_1_1_readProperty.png" alt= "Read property (HTTP binding)" height="385" width="568" /></p></section><section id="write-property-http-binding"><h4 id="a-1-2-write-property-http-binding"><bdi class= "secno"><ins class="diff-chg">
A.1.2
</ins></bdi><ins class="diff-chg">
Write
property
(HTTP
binding)
</ins><a class= "self-link" aria-label="§" href= "#write-property-http-binding"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
writeproperty
</ins></code><ins class="diff-chg">
operation
with
an
HTTP
protocol
binding.
</ins></p><p><img src="images/message-flows/A_1_2_writeProperty.png" alt= "Write property (HTTP binding)" height="355" width="579" /></p></section><section id= "observe-property-http-binding-with-long-polling-subprotocol"><h4 id= "a-1-3-observe-property-http-binding-with-long-polling-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.1.3
</ins></bdi><ins class="diff-chg">
Observe
property
(HTTP
binding
with
Long
Polling
subprotocol)
</ins><a class="self-link" aria-label="§" href= "#observe-property-http-binding-with-long-polling-subprotocol"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
observeproperty
</ins></code><ins class="diff-chg">
operation
with
an
HTTP
protocol
binding
using
the
"longpolling"
(Long
Polling)
subprotocol.
</ins></p><p><img src= "images/message-flows/A_1_3a_observePropertyLongPoll.png" alt= "Observe property (HTTP binding with Long Polling subprotocol)" /></p></section><section id= "observe-property-http-binding-with-server-sent-event-subprotocol"><h4 id= "a-1-4-observe-property-http-binding-with-server-sent-event-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.1.4
</ins></bdi><ins class="diff-chg">
Observe
property
(HTTP
binding
with
Server
Sent
Event
subprotocol)
</ins><a class="self-link" aria-label="§" href= "#observe-property-http-binding-with-server-sent-event-subprotocol"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
observeproperty
</ins></code><ins class="diff-chg">
operation
with
an
HTTP
protocol
binding
using
the
"sse"
(Server
Sent
Event)
subprotocol.
</ins></p><p><img src="images/message-flows/A_1_3b_observePropertySSE.png" alt= "Observe property (HTTP binding with Server Sent Event subprotocol)" /></p></section><section id= "observe-property-http-binding-with-websocket-subprotocol"><h4 id= "a-1-5-observe-property-http-binding-with-websocket-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.1.5
</ins></bdi><ins class="diff-chg">
Observe
property
(HTTP
binding
with
WebSocket
subprotocol)
</ins><a class="self-link" aria-label="§" href= "#observe-property-http-binding-with-websocket-subprotocol"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
observeproperty
</ins></code><ins class="diff-chg">
operation
with
an
HTTP
protocol
binding
using
a
WebSocket-based
subprotocol.
</ins></p><p><img src= "images/message-flows/A_1_3c_observePropertyWebSocket.png" alt= "Observe property (HTTP binding with a WebSocket subprotocol)" /></p></section></section><section id="action-interactions"><h3 id="a-2-action-interactions"><bdi class="secno"><ins class="diff-chg">
A.2
</ins></bdi><ins class="diff-chg">
Action
Interactions
</ins><a class="self-link" aria-label="§" href= "#action-interactions"></a></h3><section id="invoke-action-http-binding"><h4 id="a-2-1-invoke-action-http-binding"><bdi class= "secno"><ins class="diff-chg">
A.2.1
</ins></bdi><ins class="diff-chg">
Invoke
action
(HTTP
binding)
</ins><a class= "self-link" aria-label="§" href= "#invoke-action-http-binding"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
invokeaction
</ins></code><ins class="diff-chg">
operation
with
an
HTTP
protocol
binding,
where
the
operation
is
synchronous
and
the
response
from
the
server
is
delayed
until
after
the
action
completes.
</ins></p><p><img src="images/message-flows/A_2_1_invokeAction.png" alt= "Invoke action (HTTP binding)" /></p></section></section><section id="event-interactions"><h3 id="a-3-event-interactions"><bdi class="secno"><ins class="diff-chg">
A.3
</ins></bdi><ins class="diff-chg">
Event
Interactions
</ins><a class="self-link" aria-label="§" href= "#event-interactions"></a></h3><p><ins class="diff-chg">
In
the
following,
note
that
there
is
no
explicit
operation
defined
for
event
notification
itself.
The
subprotocol
used
for
notification
is
associated
with
the
</ins><code><ins class="diff-chg">
subscribeevent
</ins></code><ins class="diff-chg">
operation,
and
any
necessary
concrete
protocol
transactions
are
managed
by
the
Protocol
Binding
subsystem.
</ins></p><p><ins class="diff-chg">
There
are
also
several
subprotocols
possible
for
event
notification
using
WebSockets.
The
interaction
diagrams
show
only
one
of
several
possible
implementations.
</ins></p><section id= "subscribe-notify-and-unsubscribe-event-http-binding-with-long-polling-subprotocol"><h4 id= "a-3-1-subscribe-notify-and-unsubscribe-event-http-binding-with-long-polling-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.3.1
</ins></bdi><ins class="diff-chg">
Subscribe,
notify
and
unsubscribe
event
(HTTP
binding
with
Long
Polling
subprotocol)
</ins><a class= "self-link" aria-label="§" href= "#subscribe-notify-and-unsubscribe-event-http-binding-with-long-polling-subprotocol"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
subscribeevent
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
unsubscribeevent
</ins></code><ins class="diff-chg">
operations
with
an
HTTP
protocol
binding
using
the
Long
Polling
subprotocol.
</ins></p><p><img src="images/message-flows/A_3_1a_eventLongPoll.png" alt= "Subscribe, notify, and unsubscribe event (HTTP binding with Long Polling subprotocol)" /></p></section><section id= "subscribe-notify-and-unsubscribe-event-http-binding-with-server-sent-event-subprotocol"><h4 id= "a-3-2-subscribe-notify-and-unsubscribe-event-http-binding-with-server-sent-event-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.3.2
</ins></bdi><ins class="diff-chg">
Subscribe,
notify
and
unsubscribe
event
(HTTP
binding
with
Server
Sent
Event
subprotocol)
</ins><a class= "self-link" aria-label="§" href= "#subscribe-notify-and-unsubscribe-event-http-binding-with-server-sent-event-subprotocol"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
subscribeevent
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
unsubscribeevent
</ins></code><ins class="diff-chg">
operations
with
an
HTTP
protocol
binding
using
the
Server
Sent
Event
subprotocol.
</ins></p><p><img src="images/message-flows/A_3_1b_eventSSE.png" alt= "Subscribe, notify and unsubscribe event (HTTP binding with Server Sent Event subprotocol)" /></p></section><section id= "subscribe-notify-and-unsubscribe-event-http-binding-with-websocket-subprotocol"><h4 id= "a-3-3-subscribe-notify-and-unsubscribe-event-http-binding-with-websocket-subprotocol"><bdi class="secno"><ins class="diff-chg">
A.3.3
</ins></bdi><ins class="diff-chg">
Subscribe,
notify
and
unsubscribe
event
(HTTP
binding
with
WebSocket
subprotocol)
</ins><a class="self-link" aria-label="§" href= "#subscribe-notify-and-unsubscribe-event-http-binding-with-websocket-subprotocol"></a></h4><p><ins class="diff-chg">
The
following
sequence
illustrates
application
and
network
transactions
to
implement
the
</ins><code><ins class="diff-chg">
subscribeevent
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
unsubscribeevent
</ins></code><ins class="diff-chg">
operations
with
an
HTTP
protocol
binding
using
a
WebSocket
subprotocol.
</ins></p><p><img src="images/message-flows/A_3_1c_eventWebSocket.png" alt= "Subscribe, notify and unsubscribe event (HTTP binding with WebSocket subprotocol)" /></p></section></section></section><section id="sec-acknowledgements" class="appendix"><h2 id="b-acknowledgements"><bdi class="secno"><ins class="diff-chg">
B.
</ins></bdi>
Acknowledgements
<a class="self-link" aria-label="§" href= "#sec-acknowledgements">
</a>
</h2>
<p>
Special
thanks
to
all
active
<del class="diff-old">Participants
</del>
<ins class="diff-chg">participants
</ins>
of
the
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
Web
of
Things
Interest
Group
and
Working
Group
for
their
technical
input
and
suggestions
that
led
to
improvements
to
this
document.
</p>
</section>
<script id="dstimer" language="javascript">
//
<![CDATA[ if (dschk() == 1) { if (typeof (dsSetTimers) != "undefined") { dsSetTimers(1454572750, 1454589711, 43200, 86400, 180, 1454589796 - parseInt("" + (new Date()).getTime() / 1000), 1); } } //]]>
</script>
<section id="references" class="appendix">
<h2 id="c-references">
<bdi class="secno">
<ins class="diff-new">C.
</ins></bdi><ins class="diff-new">
References
</ins><a class="self-link" aria-label="§" href= "#references"></a></h2><section id="normative-references"><h3 id="c-1-normative-references"><bdi class="secno"><ins class="diff-new">
C.1
</ins></bdi><ins class="diff-new">
Normative
references
</ins><a class="self-link" aria-label="§" href= "#normative-references"></a></h3><dl class="bibliography"><dt id="bib-iana-media-types"><ins class="diff-new">
[IANA-MEDIA-TYPES]
</ins></dt><dd><a href= "https://www.iana.org/assignments/media-types/"><cite><ins class="diff-new">
Media
Types
</ins></cite></a>.<ins class="diff-new">
IANA.
URL:
</ins><a href= "https://www.iana.org/assignments/media-types/"><ins class="diff-new">
https://www.iana.org/assignments/media-types/
</ins></a></dd><dt id="bib-iana-web-socket-registry"><ins class="diff-new">
[iana-web-socket-registry]
</ins></dt><dd><a href= "https://www.iana.org/assignments/websocket/websocket.xml#subprotocol-name"><cite><ins class="diff-new">
IANA
Registry
for
Websocket
Subprotocols
</ins></cite></a>.<ins class="diff-new">
IANA.
24
May
2019.
URL:
</ins><a href= "https://www.iana.org/assignments/websocket/websocket.xml#subprotocol-name"><ins class="diff-new">
https://www.iana.org/assignments/websocket/websocket.xml#subprotocol-name
</ins></a></dd><dt id="bib-rfc2119"><ins class="diff-new">
[RFC2119]
</ins></dt><dd><a href="https://tools.ietf.org/html/rfc2119"><cite><ins class="diff-new">
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
</ins></cite></a>.<ins class="diff-new">
S.
Bradner.
IETF.
March
1997.
Best
Current
Practice.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc2119"><ins class="diff-new">
https://tools.ietf.org/html/rfc2119
</ins></a></dd><dt id="bib-rfc6741"><ins class="diff-new">
[RFC6741]
</ins></dt><dd><a href= "https://tools.ietf.org/html/rfc6741"><cite><ins class="diff-new">
Identifier-Locator
Network
Protocol
(ILNP)
Engineering
Considerations
</ins></cite></a>.<ins class="diff-new">
RJ
Atkinson;
SN
Bhatti.
IETF.
November
2012.
Experimental.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc6741"><ins class="diff-new">
https://tools.ietf.org/html/rfc6741
</ins></a></dd><dt id="bib-rfc7641"><ins class="diff-new">
[RFC7641]
</ins></dt><dd><a href="https://tools.ietf.org/html/rfc7641"><cite><ins class="diff-new">
Observing
Resources
in
the
Constrained
Application
Protocol
(CoAP)
</ins></cite></a>.<ins class="diff-new">
K.
Hartke.
IETF.
September
2015.
Proposed
Standard.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc7641"><ins class="diff-new">
https://tools.ietf.org/html/rfc7641
</ins></a></dd><dt id="bib-rfc8174"><ins class="diff-new">
[RFC8174]
</ins></dt><dd><a href="https://tools.ietf.org/html/rfc8174"><cite><ins class="diff-new">
Ambiguity
of
Uppercase
vs
Lowercase
in
RFC
2119
Key
Words
</ins></cite></a>.<ins class="diff-new">
B.
Leiba.
IETF.
May
2017.
Best
Current
Practice.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc8174"><ins class="diff-new">
https://tools.ietf.org/html/rfc8174
</ins></a></dd><dt id="bib-wot-thing-description"><ins class="diff-new">
[WOT-THING-DESCRIPTION]
</ins></dt><dd><a href= "https://www.w3.org/TR/wot-thing-description/"><cite><ins class="diff-new">
Web
of
Things
(WoT)
Thing
Description
</ins></cite></a>.<ins class="diff-new">
Sebastian
Käbisch;
Takuki
Kamiya;
Michael
McCool;
Victor
Charpenay;
Matthias
Kovatsch.
W3C.
6
November
2019.
W3C
Candidate
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/wot-thing-description/"><ins class="diff-new">
https://www.w3.org/TR/wot-thing-description/
</ins></a></dd></dl></section><section id="informative-references"><h3 id="c-2-informative-references"><bdi class="secno"><ins class="diff-new">
C.2
</ins></bdi><ins class="diff-new">
Informative
references
</ins><a class="self-link" aria-label="§" href= "#informative-references"></a></h3><dl class="bibliography"><dt id="bib-eventsource"><ins class="diff-new">
[eventsource]
</ins></dt><dd><a href="https://www.w3.org/TR/eventsource/"><cite><ins class="diff-new">
Server-Sent
Events
</ins></cite></a>.<ins class="diff-new">
Ian
Hickson.
W3C.
3
February
2015.
W3C
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/eventsource/"><ins class="diff-new">
https://www.w3.org/TR/eventsource/
</ins></a></dd><dt id="bib-http-in-rdf10"><ins class="diff-new">
[HTTP-in-RDF10]
</ins></dt><dd><a href="https://www.w3.org/TR/HTTP-in-RDF10/"><cite><ins class="diff-new">
HTTP
Vocabulary
in
RDF
1.0
</ins></cite></a>.<ins class="diff-new">
Johannes
Koch;
Carlos
A.
Velasco;
Philip
Ackermann.
W3C.
2
February
2017.
W3C
Note.
URL:
</ins><a href= "https://www.w3.org/TR/HTTP-in-RDF10/"><ins class="diff-new">
https://www.w3.org/TR/HTTP-in-RDF10/
</ins></a></dd><dt id="bib-json-ld11"><ins class="diff-new">
[json-ld11]
</ins></dt><dd><a href="https://www.w3.org/TR/json-ld11/"><cite><ins class="diff-new">
JSON-LD
1.1
</ins></cite></a>.<ins class="diff-new">
Gregg
Kellogg;
Pierre-Antoine
Champin;
Dave
Longley.
W3C.
18
October
2019.
W3C
Working
Draft.
URL:
</ins><a href= "https://www.w3.org/TR/json-ld11/"><ins class="diff-new">
https://www.w3.org/TR/json-ld11/
</ins></a></dd><dt id="bib-json-schema"><ins class="diff-new">
[json-schema]
</ins></dt><dd><a href= "https://tools.ietf.org/html/draft-zyp-json-schema"><cite><ins class="diff-new">
JSON
Schema:
core
definitions
and
terminology
</ins></cite></a>.<ins class="diff-new">
K.
Zyp.
Internet
Engineering
Task
Force
(IETF).
31
January
2013.
Internet-Draft.
URL:
</ins><a href= "https://tools.ietf.org/html/draft-zyp-json-schema"><ins class="diff-new">
https://tools.ietf.org/html/draft-zyp-json-schema
</ins></a></dd><dt id="bib-mqtt"><ins class="diff-new">
[MQTT]
</ins></dt><dd><a href= "https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html"><cite><ins class="diff-new">
MQTT
Version
5.0
</ins></cite></a>.<ins class="diff-new">
Andrew
Banks;
Ed
Briggs;
Ken
Borgendale;
Rahul
Gupta.
MQTT.
07
March
2019.
URL:
</ins><a href= "https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html"><ins class="diff-new">
https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html
</ins></a></dd><dt id="bib-rfc3986"><ins class="diff-new">
[RFC3986]
</ins></dt><dd><a href="https://tools.ietf.org/html/rfc3986"><cite><ins class="diff-new">
Uniform
Resource
Identifier
(URI):
Generic
Syntax
</ins></cite></a>.<ins class="diff-new">
T.
Berners-Lee;
R.
Fielding;
L.
Masinter.
IETF.
January
2005.
Internet
Standard.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc3986"><ins class="diff-new">
https://tools.ietf.org/html/rfc3986
</ins></a></dd><dt id="bib-rfc3987"><ins class="diff-new">
[RFC3987]
</ins></dt><dd><a href= "https://tools.ietf.org/html/rfc3987"><cite><ins class="diff-new">
Internationalized
Resource
Identifiers
(IRIs)
</ins></cite></a>.<ins class="diff-new">
M.
Duerst;
M.
Suignard.
IETF.
January
2005.
Proposed
Standard.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc3987"><ins class="diff-new">
https://tools.ietf.org/html/rfc3987
</ins></a></dd><dt id="bib-rfc6570"><ins class="diff-new">
[RFC6570]
</ins></dt><dd><a href="https://tools.ietf.org/html/rfc6570"><cite><ins class="diff-new">
URI
Template
</ins></cite></a>.<ins class="diff-new">
J.
Gregorio;
R.
Fielding;
M.
Hadley;
M.
Nottingham;
D.
Orchard.
IETF.
March
2012.
Proposed
Standard.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc6570"><ins class="diff-new">
https://tools.ietf.org/html/rfc6570
</ins></a></dd><dt id="bib-rfc7231"><ins class="diff-new">
[RFC7231]
</ins></dt><dd><a href="https://httpwg.org/specs/rfc7231.html"><cite><ins class="diff-new">
Hypertext
Transfer
Protocol
(HTTP/1.1):
Semantics
and
Content
</ins></cite></a>.<ins class="diff-new">
R.
Fielding,
Ed.;
J.
Reschke,
Ed..
IETF.
June
2014.
Proposed
Standard.
URL:
</ins><a href= "https://httpwg.org/specs/rfc7231.html"><ins class="diff-new">
https://httpwg.org/specs/rfc7231.html
</ins></a></dd><dt id="bib-rfc7252"><ins class="diff-new">
[RFC7252]
</ins></dt><dd><a href="https://tools.ietf.org/html/rfc7252"><cite><ins class="diff-new">
The
Constrained
Application
Protocol
(CoAP)
</ins></cite></a>.<ins class="diff-new">
Z.
Shelby;
K.
Hartke;
C.
Bormann.
IETF.
June
2014.
Proposed
Standard.
URL:
</ins><a href= "https://tools.ietf.org/html/rfc7252"><ins class="diff-new">
https://tools.ietf.org/html/rfc7252
</ins></a></dd><dt id="bib-websub"><ins class="diff-new">
[WebSub]
</ins></dt><dd><a href= "https://www.w3.org/TR/websub/"><cite><ins class="diff-new">
WebSub
</ins></cite></a>.<ins class="diff-new">
Julien
Genestoux;
Aaron
Parecki.
W3C.
23
January
2018.
W3C
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/websub/"><ins class="diff-new">
https://www.w3.org/TR/websub/
</ins></a></dd><dt id="bib-wot-architecture"><ins class="diff-new">
[WOT-ARCHITECTURE]
</ins></dt><dd><a href="https://www.w3.org/TR/wot-architecture/"><cite><ins class="diff-new">
Web
of
Things
(WoT)
Architecture
</ins></cite></a>.<ins class="diff-new">
Matthias
Kovatsch;
Ryuichi
Matsukura;
Michael
Lagally;
Toru
Kawaguchi;
Kunihiko
Toumura.
W3C.
6
November
2019.
W3C
Candidate
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/wot-architecture/"><ins class="diff-new">
https://www.w3.org/TR/wot-architecture/
</ins></a></dd></dl></section></section>
<p role="navigation" id="back-to-top">
<a href="#title">
<abbr title= "Back to Top">
↑
</abbr>
</a>
</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js">
</script>
</body>
</html>
